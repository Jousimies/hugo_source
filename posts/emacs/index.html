<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Personal emacs configuration - æ¢ç´¢ä¸–ç•Œï¼Œè·µè¡Œäººç”Ÿ</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Personal emacs configuration"><meta property="og:image" content><meta property="og:title" content="Personal emacs configuration"><meta property="og:description" content="Personal emacs configuration"><meta property="og:type" content="article"><meta property="og:url" content="https://jousimies.github.io/posts/emacs/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-26T22:02:00+08:00"><meta property="article:modified_time" content="2023-02-26T22:11:59+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Personal emacs configuration"><meta name=twitter:description content="Personal emacs configuration"><script src=https://jousimies.github.iojs/feather.min.js></script>
<link href=https://jousimies.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://jousimies.github.io/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://jousimies.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css media="(prefers-color-scheme: dark)"><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type=text/x-mathjax-config>
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></head><body><div class=content><header><div class=main><a href=https://jousimies.github.io>æ¢ç´¢ä¸–ç•Œï¼Œè·µè¡Œäººç”Ÿ</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
<a href=/tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>Personal emacs configuration</h1><div class=meta>Posted on Feb 26, 2023</div></div><section class=body><h2 id=early-init>Early Init</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;;; early-init.el --- Early Init File -*- lexical-binding: t; no-byte-compile: t -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Profiling since here when in debug-mode</span>
</span></span><span style=display:flex><span>(when init-file-debug
</span></span><span style=display:flex><span>  (profiler-start <span style=color:#e6db74>&#39;cpu</span>)
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;window-setup-hook</span> <span style=color:#a6e22e>#&#39;</span>profiler-stop <span style=color:#ae81ff>0</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Defer garbage collection further back in the startup process</span>
</span></span><span style=display:flex><span>(setq gc-cons-threshold most-positive-fixnum
</span></span><span style=display:flex><span>      gc-cons-percentage <span style=color:#ae81ff>1.0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Prevent the glimpse of un-styled Emacs by disabling these UI elements early.</span>
</span></span><span style=display:flex><span>(push <span style=color:#f92672>&#39;</span>(menu-bar-lines <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>) default-frame-alist)
</span></span><span style=display:flex><span>(push <span style=color:#f92672>&#39;</span>(tool-bar-lines <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>) default-frame-alist)
</span></span><span style=display:flex><span>(push <span style=color:#f92672>&#39;</span>(vertical-scroll-bars <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>) default-frame-alist)
</span></span><span style=display:flex><span>(push <span style=color:#f92672>&#39;</span>(undecorated <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>) default-frame-alist)
</span></span><span style=display:flex><span>(push <span style=color:#f92672>&#39;</span>(fullscreen <span style=color:#f92672>.</span> maximized) initial-frame-alist)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq-default initial-major-mode &#39;fundamental-mode)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Disable mode-line when emacs startup.</span>
</span></span><span style=display:flex><span>(setq-default mode-line-format <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq byte-compile-warnings <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>;;; early-init.el ends here</span>
</span></span></code></pre></div><h2 id=start-lexical-binding>Start, Lexical Binding</h2><p>å…³äº lexical-binding çš„ä½œç”¨è§ <a href=https://nullprogram.com/blog/2016/12/22/>Make Emacs run (slightly) faster with lexical binding</a> . æˆ–è€… <a href=http://www.yinwang.org/blog-cn/2013/03/26/lisp-dead-alive>Lisp å·²æ­»ï¼ŒLisp ä¸‡å²ï¼</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; init.el --- Personal Emacs Configuration -*- lexical-binding: t; no-byte-compile: t -*-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; Commentary:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; Code:</span>
</span></span></code></pre></div><h2 id=rudimentary-configuration>Rudimentary Configuration</h2><h3 id=speedup>Speedup</h3><p>è¿™éƒ¨ä»½çš„å†…å®¹æ¥æºï¼š<a href=https://github.com/seagle0128/.emacs.d/blob/master/init.el>.emacs.d/init.el at master Â· seagle0128/.emacs.d</a>
å¯ä»¥åŠ å¿« Emacs çš„å¯åŠ¨é€Ÿåº¦ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq auto-mode-case-fold <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(unless (or (<span style=color:#a6e22e>daemonp</span>) noninteractive init-file-debug)
</span></span><span style=display:flex><span>  (let ((old-file-name-handler-alist file-name-handler-alist))
</span></span><span style=display:flex><span>    (setq file-name-handler-alist <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>    (add-hook <span style=color:#e6db74>&#39;emacs-startup-hook</span>
</span></span><span style=display:flex><span>              (lambda ()
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;Recover file name handlers.&#34;</span>
</span></span><span style=display:flex><span>                (setq file-name-handler-alist
</span></span><span style=display:flex><span>                      (delete-dups (<span style=color:#a6e22e>append</span> file-name-handler-alist
</span></span><span style=display:flex><span>                                           old-file-name-handler-alist)))))))
</span></span></code></pre></div><h3 id=benchmark>Benchmark</h3><p>å¯ä»¥ä½¿ç”¨çš„é…ç½®ï¼š<a href=https://github.com/purcell/emacs.d/blob/master/lisp/init-benchmarking.el>emacs.d/init-benchmarking.el at master Â· purcell/emacs.d</a></p><p>Emacs è¿›è¡Œæ€§æ£€æ£€æµ‹è¿˜å¯ä»¥ä½¿ç”¨<a href=https://github.com/dholm/benchmark-init-el>dholm/benchmark-init-el: Benchmark your Emacs initialization</a> æˆ–è€…<a href=https://github.com/jschaf/esup>jschaf/esup: ESUP - Emacs Start Up Profiler</a>.</p><p>ç›¸æ¯”è¾ƒä¸ä½¿ç”¨ Emacs å†…ç½®çš„ <code>package.el</code>, ä½¿ç”¨ borg ç®¡ç†åŒ…ï¼ŒEmacs çš„å¯åŠ¨æ—¶é—´æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ä¼˜åŒ–ã€‚</p><p>ä¸ºäº†æé«˜ Emacs çš„å¯åŠ¨é€Ÿåº¦ï¼Œéœ€è¦åšçš„å‡ ä¸ªæ–¹é¢åŒ…æ‹¬ï¼š<a href=#speedup>Speedup</a>, <a href=#path>PATH</a>, <a href=#early-init>Early Init</a>, ä»¥åŠä½¿ç”¨ gcmh ç®¡ç†ä½¿ç”¨æ—¶çš„ Garbage collection è¡Œä¸ºã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;window-setup-hook</span>
</span></span><span style=display:flex><span>          (lambda ()
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>garbage-collect</span>)
</span></span><span style=display:flex><span>            (let ((curtime (<span style=color:#a6e22e>current-time</span>)))
</span></span><span style=display:flex><span>              (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Times: init:%.06f total:%.06f gc-done:%d&#34;</span>
</span></span><span style=display:flex><span>                       (<span style=color:#a6e22e>float-time</span> (<span style=color:#a6e22e>time-subtract</span> after-init-time before-init-time))
</span></span><span style=display:flex><span>                       (<span style=color:#a6e22e>float-time</span> (<span style=color:#a6e22e>time-subtract</span> curtime before-init-time))
</span></span><span style=display:flex><span>                       gcs-done)))
</span></span><span style=display:flex><span>          <span style=color:#ae81ff>90</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun sanityinc/time-subtract-millis (b a)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>*</span> <span style=color:#ae81ff>1000.0</span> (<span style=color:#a6e22e>float-time</span> (<span style=color:#a6e22e>time-subtract</span> b a))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar sanityinc/require-times <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;A list of (FEATURE LOAD-START-TIME LOAD-DURATION).
</span></span></span><span style=display:flex><span><span style=color:#e6db74>LOAD-DURATION is the time taken in milliseconds to load FEATURE.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun sanityinc/require-times-wrapper (orig feature <span style=color:#66d9ef>&amp;rest</span> args)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Note in </span><span style=color:#e6db74>`sanityinc/require-times&#39;</span><span style=color:#e6db74> the time taken to require each feature.&#34;</span>
</span></span><span style=display:flex><span>  (let* ((already-loaded (<span style=color:#a6e22e>memq</span> feature features))
</span></span><span style=display:flex><span>         (require-start-time (and (not already-loaded) (<span style=color:#a6e22e>current-time</span>))))
</span></span><span style=display:flex><span>    (prog1
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>apply</span> orig feature args)
</span></span><span style=display:flex><span>      (when (and (not already-loaded) (<span style=color:#a6e22e>memq</span> feature features))
</span></span><span style=display:flex><span>        (let ((time (sanityinc/time-subtract-millis (<span style=color:#a6e22e>current-time</span>) require-start-time)))
</span></span><span style=display:flex><span>          (add-to-list <span style=color:#e6db74>&#39;sanityinc/require-times</span>
</span></span><span style=display:flex><span>                       (<span style=color:#a6e22e>list</span> feature require-start-time time)
</span></span><span style=display:flex><span>                       <span style=color:#66d9ef>t</span>))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(advice-add <span style=color:#e6db74>&#39;require</span> :around <span style=color:#e6db74>&#39;sanityinc/require-times-wrapper</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(define-derived-mode sanityinc/require-times-mode tabulated-list-mode <span style=color:#e6db74>&#34;Require-Times&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Show times taken to </span><span style=color:#e6db74>`require&#39;</span><span style=color:#e6db74> packages.&#34;</span>
</span></span><span style=display:flex><span>  (setq tabulated-list-format
</span></span><span style=display:flex><span>        [(<span style=color:#e6db74>&#34;Start time (ms)&#34;</span> <span style=color:#ae81ff>20</span> sanityinc/require-times-sort-by-start-time-pred)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;Feature&#34;</span> <span style=color:#ae81ff>30</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;Time (ms)&#34;</span> <span style=color:#ae81ff>12</span> sanityinc/require-times-sort-by-load-time-pred)])
</span></span><span style=display:flex><span>  (setq tabulated-list-sort-key (<span style=color:#a6e22e>cons</span> <span style=color:#e6db74>&#34;Start time (ms)&#34;</span> <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; (setq tabulated-list-padding 2)</span>
</span></span><span style=display:flex><span>  (setq tabulated-list-entries <span style=color:#a6e22e>#&#39;</span>sanityinc/require-times-tabulated-list-entries)
</span></span><span style=display:flex><span>  (tabulated-list-init-header)
</span></span><span style=display:flex><span>  (when (<span style=color:#a6e22e>fboundp</span> <span style=color:#e6db74>&#39;tablist-minor-mode</span>)
</span></span><span style=display:flex><span>    (tablist-minor-mode)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun sanityinc/require-times-sort-by-start-time-pred (entry1 entry2)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>&lt;</span> (<span style=color:#a6e22e>string-to-number</span> (<span style=color:#a6e22e>elt</span> (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>1</span> entry1) <span style=color:#ae81ff>0</span>))
</span></span><span style=display:flex><span>     (<span style=color:#a6e22e>string-to-number</span> (<span style=color:#a6e22e>elt</span> (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>1</span> entry2) <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun sanityinc/require-times-sort-by-load-time-pred (entry1 entry2)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>&gt;</span> (<span style=color:#a6e22e>string-to-number</span> (<span style=color:#a6e22e>elt</span> (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>1</span> entry1) <span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>     (<span style=color:#a6e22e>string-to-number</span> (<span style=color:#a6e22e>elt</span> (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>1</span> entry2) <span style=color:#ae81ff>2</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun sanityinc/require-times-tabulated-list-entries ()
</span></span><span style=display:flex><span>  (cl-loop for (feature start-time millis) in sanityinc/require-times
</span></span><span style=display:flex><span>           with order <span style=color:#a6e22e>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>           do (cl-incf order)
</span></span><span style=display:flex><span>           collect (<span style=color:#a6e22e>list</span> order
</span></span><span style=display:flex><span>                         (<span style=color:#a6e22e>vector</span>
</span></span><span style=display:flex><span>                          (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;%.3f&#34;</span> (sanityinc/time-subtract-millis start-time before-init-time))
</span></span><span style=display:flex><span>                          (<span style=color:#a6e22e>symbol-name</span> feature)
</span></span><span style=display:flex><span>                          (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;%.3f&#34;</span> millis)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun sanityinc/require-times ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Show a tabular view of how long various libraries took to load.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (with-current-buffer (<span style=color:#a6e22e>get-buffer-create</span> <span style=color:#e6db74>&#34;*Require Times*&#34;</span>)
</span></span><span style=display:flex><span>    (sanityinc/require-times-mode)
</span></span><span style=display:flex><span>    (tabulated-list-revert)
</span></span><span style=display:flex><span>    (display-buffer (<span style=color:#a6e22e>current-buffer</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun sanityinc/show-init-time ()
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;init completed in %.2fms&#34;</span>
</span></span><span style=display:flex><span>           (sanityinc/time-subtract-millis after-init-time before-init-time)))
</span></span></code></pre></div><h3 id=path>PATH</h3><p>å¦‚æœä½¿ç”¨ emacs-plus, ä¼šè‡ªåŠ¨çš„æ·»åŠ åˆ° path å½“ä¸­ï¼Œæˆ–è€…ä½¿ç”¨<a href=https://github.com/purcell/exec-path-from-shell>purcell/exec-path-from-shell: Make Emacs use the $PATH set up by the user&rsquo;s shell</a>. æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„é…ç½®.</p><p>è¿™éƒ¨ä»½çš„é…ç½®æ¥æºï¼š<a href=https://www.emacswiki.org/emacs/ExecPath>EmacsWiki: Exec Path</a></p><p>ä¸è®¾ç½® <code>exec-path</code>, åœ¨ MacOS ä¸Šæœ‰å¯èƒ½ä¼šæç¤ºæ‰¾ä¸åˆ°ç¨‹åºã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun set-exec-path-from-shell-PATH ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This is particularly useful under Mac OS X and macOS.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let ((path-from-shell (replace-regexp-in-string
</span></span><span style=display:flex><span>                          <span style=color:#e6db74>&#34;[ \t\n]*$&#34;</span> <span style=color:#e6db74>&#34;&#34;</span> (shell-command-to-string
</span></span><span style=display:flex><span>                                          <span style=color:#e6db74>&#34;$SHELL --login -c &#39;echo $PATH&#39;&#34;</span>))))
</span></span><span style=display:flex><span>    (setenv <span style=color:#e6db74>&#34;PATH&#34;</span> path-from-shell)
</span></span><span style=display:flex><span>    (setq exec-path (split-string path-from-shell path-separator))))
</span></span><span style=display:flex><span>(set-exec-path-from-shell-PATH)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;cl-lib</span>)
</span></span><span style=display:flex><span>(defun add-subdirs-to-load-path (search-dir)
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let* ((dir (<span style=color:#a6e22e>file-name-as-directory</span> search-dir)))
</span></span><span style=display:flex><span>    (dolist (subdir
</span></span><span style=display:flex><span>         <span style=color:#75715e>;; è¿‡æ»¤å‡ºä¸å¿…è¦çš„ç›®å½•ï¼Œæå‡Emacså¯åŠ¨é€Ÿåº¦</span>
</span></span><span style=display:flex><span>         (cl-remove-if
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>#&#39;</span>(lambda (subdir)
</span></span><span style=display:flex><span>          (or
</span></span><span style=display:flex><span>           <span style=color:#75715e>;; ä¸æ˜¯ç›®å½•çš„æ–‡ä»¶éƒ½ç§»é™¤</span>
</span></span><span style=display:flex><span>           (not (<span style=color:#a6e22e>file-directory-p</span> (<span style=color:#a6e22e>concat</span> dir subdir)))
</span></span><span style=display:flex><span>           <span style=color:#75715e>;; çˆ¶ç›®å½•ã€ è¯­è¨€ç›¸å…³å’Œç‰ˆæœ¬æ§åˆ¶ç›®å½•éƒ½ç§»é™¤</span>
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>member</span> subdir <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#e6db74>&#34;..&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#34;dist&#34;</span> <span style=color:#e6db74>&#34;node_modules&#34;</span> <span style=color:#e6db74>&#34;__pycache__&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#34;RCS&#34;</span> <span style=color:#e6db74>&#34;CVS&#34;</span> <span style=color:#e6db74>&#34;rcs&#34;</span> <span style=color:#e6db74>&#34;cvs&#34;</span> <span style=color:#e6db74>&#34;.git&#34;</span> <span style=color:#e6db74>&#34;.github&#34;</span>))))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>directory-files</span> dir)))
</span></span><span style=display:flex><span>  (let ((subdir-path (<span style=color:#a6e22e>concat</span> dir (<span style=color:#a6e22e>file-name-as-directory</span> subdir))))
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; ç›®å½•ä¸‹æœ‰ .el .so .dll æ–‡ä»¶çš„è·¯å¾„æ‰æ·»åŠ åˆ° `load-path&#39; ä¸­ï¼Œæå‡Emacså¯åŠ¨é€Ÿåº¦</span>
</span></span><span style=display:flex><span>    (when (cl-some <span style=color:#a6e22e>#&#39;</span>(lambda (subdir-file)
</span></span><span style=display:flex><span>               (and (<span style=color:#a6e22e>file-regular-p</span> (<span style=color:#a6e22e>concat</span> subdir-path subdir-file))
</span></span><span style=display:flex><span>                <span style=color:#75715e>;; .so .dll æ–‡ä»¶æŒ‡éElispè¯­è¨€ç¼–å†™çš„EmacsåŠ¨æ€åº“</span>
</span></span><span style=display:flex><span>                (<span style=color:#a6e22e>member</span> (file-name-extension subdir-file) <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;el&#34;</span> <span style=color:#e6db74>&#34;so&#34;</span> <span style=color:#e6db74>&#34;dll&#34;</span>))))
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>directory-files</span> subdir-path))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; æ³¨æ„ï¼š`add-to-list&#39; å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å¿…é¡»ä¸º t ï¼Œè¡¨ç¤ºåŠ åˆ°åˆ—è¡¨æœ«å°¾</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; è¿™æ ·Emacsä¼šä»çˆ¶ç›®å½•åˆ°å­ç›®å½•çš„é¡ºåºæœç´¢Elispæ’ä»¶ï¼Œé¡ºåºåè¿‡æ¥ä¼šå¯¼è‡´Emacsæ— æ³•æ­£å¸¸å¯åŠ¨</span>
</span></span><span style=display:flex><span>      (add-to-list <span style=color:#e6db74>&#39;load-path</span> subdir-path <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; ç»§ç»­é€’å½’æœç´¢å­ç›®å½•</span>
</span></span><span style=display:flex><span>    (add-subdirs-to-load-path subdir-path)))))
</span></span><span style=display:flex><span>(add-subdirs-to-load-path <span style=color:#e6db74>&#34;~/.emacs.d/packages&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>;; (add-to-list &#39;load-path &#34;~/.emacs.d/packages&#34;)</span>
</span></span></code></pre></div><h3 id=utility-hooks-and-functions>Utility Hooks and Functions</h3><p>è¿™ä¸ª <a href=https://github.com/ajgrf/on.el/tree/master/>ajgrf/on.el: Hooks for faster Emacs startup â€“ GitHub mirror</a> å¢åŠ äº†ä¸€äº›æœ‰ç”¨çš„ hookï¼Œå¯ä»¥æ§åˆ¶åŒ…çš„å¯åŠ¨æ—¶æœºã€‚</p><p>æ›´å¤šå‚è§ï¼š<a href=https://github.com/emacs-magus>emacs-magus</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package on)
</span></span></code></pre></div><h3 id=variables>Variables</h3><p>å®šä¹‰ä¸€äº›å˜é‡ï¼Œæ–¹ä¾¿é…ç½®æ–‡ä»¶ä½ç½®æˆ–é’ˆå¯¹ç‰¹å®šç³»ç»Ÿè¿›è¡Œç›¸å…³è®¾å®šã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defvar my-cloud <span style=color:#e6db74>&#34;~/Nextcloud&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This folder is My cloud.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; L.Personal.Galaxy location may change, but folders in this directory never change.</span>
</span></span><span style=display:flex><span>(defvar my-galaxy (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;L.Personal.Galaxy&#34;</span> my-cloud)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This folder stores all the plain text files of my life.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar website-directory <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/website&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;The source folder of my blog.&#34;</span>)
</span></span></code></pre></div><p><a href=https://github.com/emacscollective/no-littering>https://github.com/emacscollective/no-littering</a>, ä¼šå°†ä¸€äº›åŒ…äº§ç”Ÿçš„æ–‡ä»¶é›†ä¸­æ”¾ç½®åˆ° etc å’Œ var ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œè€Œä¸æ˜¯æ•£è½åœ¨ user-emacs-directory å½“ä¸­ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package no-littering)
</span></span></code></pre></div><h3 id=evil-modal-edit>Evil modal edit</h3><p>åœ¨ç»å†äº†å¤šç§å°è¯•ä¹‹åï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº† Evil æ¨¡å¼ç¼–è¾‘ï¼Œå…¶ä»–çš„æ¨¡å¼ç¼–è¾‘æœ‰ <a href=https://github.com/meow-edit/meow>meow-edit/meow: Yet another modal editing on Emacs / çŒ«æ€ç¼–è¾‘</a>.</p><p>æˆ‘ä¸ä½¿ç”¨ Meow æ˜¯å› ä¸ºå®ƒåªèƒ½åœ¨ Emacs ä¸­ä½¿ç”¨ã€‚</p><p>ä¹Ÿæ›¾ç»é•¿æ—¶é—´ä½¿ç”¨è¿‡ Emacs çš„åŸç”ŸæŒ‰é”®æ–¹å¼ï¼Œè¯¥ä½“éªŒåœ¨ Mac ç³»ç»Ÿä¸Šå…·æœ‰è¾ƒå¥½çš„ä¸€è‡´æ€§ï¼Œä½†æ˜¯åŸç”ŸæŒ‰é”®æ–¹å¼æœ‰ç‚¹è´¹æ‰‹ã€‚</p><h4 id=evil>evil</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package evil
</span></span><span style=display:flex><span>  :bind (:map evil-insert-state-map
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;C-e&#34;</span> <span style=color:#f92672>.</span> move-end-of-line)
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;C-k&#34;</span> <span style=color:#f92672>.</span> kill-line))
</span></span><span style=display:flex><span>  :hook ((after-init <span style=color:#f92672>.</span> evil-mode)
</span></span><span style=display:flex><span>         (after-change-major-mode <span style=color:#f92672>.</span> (lambda ()
</span></span><span style=display:flex><span>                                      (setq-local evil-shift-width tab-width))))
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (setq evil-want-keybinding <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq evil-undo-system <span style=color:#e6db74>&#39;undo-fu</span>)
</span></span><span style=display:flex><span>  (setq evil-respect-visual-line-mode <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq evil-visual-state-cursor <span style=color:#e6db74>&#39;hollow</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq evil-normal-state-tag <span style=color:#e6db74>&#34; ğ &#34;</span>)
</span></span><span style=display:flex><span>  (setq evil-insert-state-tag <span style=color:#e6db74>&#34; ğˆ &#34;</span>)
</span></span><span style=display:flex><span>  (setq evil-motion-state-tag <span style=color:#e6db74>&#34; ğŒ &#34;</span>)
</span></span><span style=display:flex><span>  (setq evil-visual-state-tag <span style=color:#e6db74>&#34; ğ• &#34;</span>)
</span></span><span style=display:flex><span>  (setq evil-replace-state-tag <span style=color:#e6db74>&#34; ğ‘ &#34;</span>)
</span></span><span style=display:flex><span>  (setq evil-operator-state-tag <span style=color:#e6db74>&#34; O &#34;</span>)
</span></span><span style=display:flex><span>  (setq evil-emacs-state-tag <span style=color:#e6db74>&#34; E &#34;</span>))
</span></span></code></pre></div><p>ä¸‹é¢çš„é…ç½®æ¥æºï¼š<a href=https://github.com/redguardtoo/emacs.d/blob/master/lisp/init-evil.el>emacs.d/init-evil.el at master Â· redguardtoo/emacs.d</a></p><h4 id=evil-collection>evil-collection</h4><p><a href=https://github.com/emacs-evil/evil-collection>emacs-evil/evil-collection: A set of keybindings for evil-mode</a> è®¾ç½® Major mode ä¸‹çš„æŒ‰é”®ç»‘å®šï¼Œæ¯”è‡ªå·±ä¸€ä¸€è®¾ç½®è¦æ–¹ä¾¿ã€‚è‹¥æ²¡æœ‰ä½ ä½¿ç”¨çš„ï¼Œå¯ä»¥æ PR.</p><p>æˆ‘ä½¿ç”¨ <code>SPC</code> ä½œä¸º <code>leader key</code>, è¿™ä¸ªé”®åœ¨ evil-collection çš„ major mode ä¸­è¢«é…ç½®æˆäº†å…¶ä»–çš„åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>evil-collection-key-blacklist</code> ç¦ç”¨ <code>SPC</code> é”®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; (with-eval-after-load &#39;evil</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;   (evil-collection-init))</span>
</span></span><span style=display:flex><span>(use-package evil-collection
</span></span><span style=display:flex><span>  :after evil
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq evil-collection-key-blacklist <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;SPC&#34;</span> <span style=color:#e6db74>&#34;,&#34;</span>))
</span></span><span style=display:flex><span>  (setq forge-add-default-bindings <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (evil-collection-init))
</span></span></code></pre></div><h4 id=evil-commentary>evil-commentary</h4><p><a href=https://github.com/linktohack/evil-commentary>linktohack/evil-commentary: Comment stuff out. A port of vim-commentary</a> é€šè¿‡ä½¿ç”¨ <code>gcc</code> æ·»åŠ æ³¨é‡Šï¼Œåœ¨ Mac ä¸Šå¯ä»¥é€šè¿‡ä½¿ç”¨ <code>s-/</code> è¿›è¡Œã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package evil-commentary
</span></span><span style=display:flex><span>  :hook (on-first-file <span style=color:#f92672>.</span> evil-commentary-mode))
</span></span></code></pre></div><h4 id=evil-surround>evil-surround</h4><p><a href=https://github.com/emacs-evil/evil-surround>emacs-evil/evil-surround: you will be surrounded (surround.vim for evil, the extensible vi layer)</a> å¯ä»¥åœ¨æŒ‡å®šçš„åŒºåŸŸæ·»åŠ æˆå¯¹çš„ç¬¦å·ï¼Œå…·ä½“ä½¿ç”¨å‚è§ä»¥ä¸Šé¡µé¢ã€‚</p><p>å…·ä½“çš„ä½¿ç”¨æ˜¯å¯¹äº visual çŠ¶æ€ï¼Œä½¿ç”¨ <code>S =</code> æ¥æ’å…¥æˆå¯¹çš„ç­‰äºå·ï¼Œå…¶ä»–çš„ç¬¦å·åŒç†ã€‚è‹¥è¦ä¿®æ”¹çš„è¯ï¼Œä½¿ç”¨ <code>cs = *</code> æ¥å°†ç­‰äºå·æ”¹ä¸ºæ˜Ÿå·ï¼Œå…¶ä»–çš„ç¬¦å·åŒç†ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package evil-surround
</span></span><span style=display:flex><span>  :hook (on-first-file <span style=color:#f92672>.</span> global-evil-surround-mode))
</span></span></code></pre></div><h4 id=evil-embrace>evil-embrace</h4><p><a href=https://github.com/cute-jumper/evil-embrace.el>cute-jumper/evil-embrace.el: Evil integration of embrace.el</a> å…·æœ‰å’Œ evil-surround ç›¸ä¼¼çš„åŠŸèƒ½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package evil-embrace
</span></span><span style=display:flex><span>  :hook ((org-mode <span style=color:#f92672>.</span> embrace-org-mode-hook))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (evil-embrace-enable-evil-surround-integration))
</span></span></code></pre></div><h4 id=which-key-mode>which-key-mode</h4><p><a href=https://github.com/justbur/emacs-which-key>justbur/emacs-which-key: Emacs package that displays available keybindings in popup</a> å¯ä»¥æç¤ºæŒ‰é”®ï¼Œå¯¹äºä¸å¸¸ä½¿ç”¨çš„æŒ‰é”®åºåˆ—ï¼Œæœ‰æ—¶æƒ³ä¸èµ·æ¥ï¼Œæœ‰æç¤ºè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package which-key
</span></span><span style=display:flex><span>  :hook (on-first-input <span style=color:#f92672>.</span> which-key-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq which-key-show-early-on-C-h <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq which-key-idle-delay <span style=color:#ae81ff>10000</span>)
</span></span><span style=display:flex><span>  (setq which-key-idle-secondary-delay <span style=color:#ae81ff>0.05</span>))
</span></span></code></pre></div><h4 id=general>general</h4><p><a href=https://github.com/noctuid/general.el>noctuid/general.el: More convenient key definitions in emacs</a> ç»“åˆ Evil å¯ä»¥è®¾ç½®ä¸€ç³»åˆ—çš„æŒ‰é”®ç»‘å®šï¼Œç›¸å¯¹äº Emacs åŸç”Ÿçš„æŒ‰é”®æ–¹å¼ï¼Œåºåˆ—åŒ–çš„æŒ‰é”®æ¯”è¾ƒå‹å¥½ã€‚</p><p>å…·ä½“çš„ä½¿ç”¨æ–¹å¼è§ package çš„ README æ–‡ä»¶ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package general
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (general-create-definer my/space-leader-def
</span></span><span style=display:flex><span>              :prefix <span style=color:#e6db74>&#34;SPC&#34;</span>
</span></span><span style=display:flex><span>              :non-normal-prefix <span style=color:#e6db74>&#34;M-SPC&#34;</span>
</span></span><span style=display:flex><span>              :states <span style=color:#f92672>&#39;</span>(normal visual <span style=color:#a6e22e>insert</span> emacs))
</span></span><span style=display:flex><span>  (general-create-definer my/comma-leader-def
</span></span><span style=display:flex><span>              :prefix <span style=color:#e6db74>&#34;,&#34;</span>
</span></span><span style=display:flex><span>              :non-normal-prefix <span style=color:#e6db74>&#34;M-,&#34;</span>
</span></span><span style=display:flex><span>              :states <span style=color:#f92672>&#39;</span>(normal visual <span style=color:#a6e22e>insert</span> emacs)))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/emacs-config ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;My literate Emacs configuration.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;emacs.org&#34;</span> user-emacs-directory)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;f&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Files&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fi&#34;</span> <span style=color:#f92672>&#39;</span>(my/emacs-config :wk <span style=color:#e6db74>&#34;Emacs configuration&#34;</span>))
</span></span></code></pre></div><h3 id=epkg>epkg</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package epkg
</span></span><span style=display:flex><span>  :commands (epkg-describe-package))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Package management&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;pp&#34;</span> <span style=color:#f92672>&#39;</span>(epkg-describe-package :wk <span style=color:#e6db74>&#34;Epkg describe package&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package epkg-marginalia
</span></span><span style=display:flex><span>  :after (epkg marginalia)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (cl-pushnew <span style=color:#e6db74>&#39;epkg-marginalia-annotate-package</span>
</span></span><span style=display:flex><span>              (alist-get <span style=color:#e6db74>&#39;package</span> marginalia-annotator-registry)))
</span></span></code></pre></div><h3 id=auto-save>auto-save</h3><p><a href=https://github.com/manateelazycat/auto-save>auto-save/auto-save.el at master Â· manateelazycat/auto-save</a> æˆ‘ä½¿ç”¨è¿™ä¸ªåŒ…è¿›è¡Œæ–‡ä»¶çš„è‡ªåŠ¨ä¿å­˜ï¼ŒEmacs è‡ªå¸¦ `auto-save-visited-mode&rsquo;, ä½†æ˜¯æ²¡æœ‰ auto-save è¿™ä¸ªåŒ…å¥½ç”¨ã€‚</p><p>ä¸»è¦çš„é—®é¢˜æ˜¯ auto-save-visited-mode åœ¨ org-capture å½“ä¸­ä¸èƒ½å…³é—­è‡ªåŠ¨åˆ é™¤ç©ºæ ¼ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package auto-save
</span></span><span style=display:flex><span>  :hook (on-first-file <span style=color:#f92672>.</span> auto-save-enable)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq auto-save-silent <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq auto-save-delete-trailing-whitespace <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><h3 id=auto-tangle>Auto tangle</h3><p>ä½¿ç”¨ Literate programming é…ç½® Emacs æ–‡ä»¶ï¼Œä½¿ç”¨å®ƒå¯ä»¥ä¸ç”¨æ‰‹åŠ¨ tangleï¼Œæ–‡ä»¶ä¿å­˜åè‡ªåŠ¨æ‰§è¡Œã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-auto-tangle
</span></span><span style=display:flex><span>  :hook (org-mode <span style=color:#f92672>.</span> org-auto-tangle-mode))
</span></span></code></pre></div><h3 id=server>Server</h3><p>å¯ç”¨ Server åå¯ä»¥ä½¿ç”¨ emacsclient æ‰“å¼€æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼Œè€Œä¸æ˜¯æ–°å¼€ä¸€ä¸ª Emacs.</p><p>åœ¨ Mac ä¸Šä½¿ç”¨ emacsclient éœ€è¦é€šè¿‡ automator åˆ›å»ºä¸€ä¸ª application. æ–°å»ºä¸€ä¸ª run shell script å¡«å…¥ä»¥ä¸‹çš„å†…å®¹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>/opt/homebrew/bin/emacsclient -n -a -c <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package server
</span></span><span style=display:flex><span>  :hook (on-first-input <span style=color:#f92672>.</span> server-start)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (defun my/start-server ()
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (if (not (server-running-p))
</span></span><span style=display:flex><span>        (server-start))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Server has started&#34;</span>)))
</span></span></code></pre></div><p><a href=https://github.com/iqbalansari/restart-emacs>iqbalansari/restart-emacs: A simple emacs package to restart emacs from within emacs</a> Emacs 29 ä¸­ restart-emacs å·±æ˜¯ builtin functionã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;q&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Quit/Restart&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;qR&#34;</span> <span style=color:#f92672>&#39;</span>(restart-emacs :wk <span style=color:#e6db74>&#34;Restart emacs&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;qq&#34;</span> <span style=color:#f92672>&#39;</span>(server-force-delete :wk <span style=color:#e6db74>&#34;Server Delete&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;qs&#34;</span> <span style=color:#f92672>&#39;</span>(my/start-server :wk <span style=color:#e6db74>&#34;Server Delete&#34;</span>))
</span></span></code></pre></div><h3 id=magit>Magit</h3><p><a href=https://github.com/magit/magit>magit/magit: It&rsquo;s Magit! A Git Porcelain inside Emacs.</a> æ˜¯ Emacs ä¸Šçš„ä¸€å¤§æ€å™¨åº”ç”¨ï¼Œç›¸å¯¹äºå‘½ä»¤è¡Œçš„æ–¹å¼ä½¿ç”¨ git å‹å¥½çš„å¾ˆå¤šã€‚</p><p>é€šè¿‡ borg å®‰è£… Magit éœ€è¦å¢åŠ ä¸¤è¡Œ load-path çš„é…ç½®ã€‚ä½¿ç”¨æ—¶é€šè¿‡ <code>C-x g</code> å³å¯è°ƒç”¨ Magit.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>submodule <span style=color:#e6db74>&#34;magit&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>    path <span style=color:#f92672>=</span> lib/magit
</span></span><span style=display:flex><span>    url <span style=color:#f92672>=</span> git@github.com:magit/magit.git
</span></span><span style=display:flex><span>    load-path <span style=color:#f92672>=</span> .
</span></span><span style=display:flex><span>    load-path <span style=color:#f92672>=</span> ./lisp
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package magit
</span></span><span style=display:flex><span>  :commands (magit magit-status magit-submodule-add)
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;C-x g&#34;</span> <span style=color:#f92672>.</span> magit)
</span></span><span style=display:flex><span>  :general (:keymaps <span style=color:#e6db74>&#39;with-editor-mode-map</span>
</span></span><span style=display:flex><span>             <span style=color:#e6db74>&#34;RET&#34;</span> <span style=color:#e6db74>&#34;C-c C-c&#34;</span>)
</span></span><span style=display:flex><span>  :hook (magit-status-mode <span style=color:#f92672>.</span> hide-mode-line-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (magit-add-section-hook <span style=color:#e6db74>&#39;magit-status-sections-hook</span>
</span></span><span style=display:flex><span>              <span style=color:#e6db74>&#39;magit-insert-modules</span>
</span></span><span style=display:flex><span>              <span style=color:#e6db74>&#39;magit-insert-unpulled-from-upstream</span>)
</span></span><span style=display:flex><span>  (remove-hook <span style=color:#e6db74>&#39;magit-module-sections-hook</span> <span style=color:#e6db74>&#39;magit-insert-modules-overview</span>)
</span></span><span style=display:flex><span>  (remove-hook <span style=color:#e6db74>&#39;magit-module-sections-hook</span> <span style=color:#e6db74>&#39;magit-insert-modules-unpulled-from-pushremote</span>)
</span></span><span style=display:flex><span>  (remove-hook <span style=color:#e6db74>&#39;magit-module-sections-hook</span> <span style=color:#e6db74>&#39;magit-insert-modules-unpushed-to-upstream</span>)
</span></span><span style=display:flex><span>  (remove-hook <span style=color:#e6db74>&#39;magit-module-sections-hook</span> <span style=color:#e6db74>&#39;magit-insert-modules-unpushed-to-pushremote</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package forge
</span></span><span style=display:flex><span>  :after magit)
</span></span></code></pre></div><h4 id=browse-at-remote>browse-at-remote</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package browse-at-remote
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;C-c f b&#34;</span> <span style=color:#f92672>.</span> browse-at-remote)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (my/space-leader-def
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fb&#34;</span> <span style=color:#f92672>&#39;</span>(browse-at-remote :wk <span style=color:#e6db74>&#34;Browse remote&#34;</span>)))
</span></span></code></pre></div><h3 id=custom>Custom</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq custom-file (locate-user-emacs-file <span style=color:#e6db74>&#34;custom.el&#34;</span>))
</span></span><span style=display:flex><span>(when (<span style=color:#a6e22e>file-exists-p</span> custom-file)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>load</span> custom-file))
</span></span></code></pre></div><h2 id=emacs-user-interface-delicious>Emacs User Interface, Delicious</h2><h3 id=fonts>Fonts</h3><p><code>Insevka Fixed</code> å’Œ <code>Source Han Serif SC</code> è¿™ä¸¤ä¸ªå­—ä½“ç­‰å®½ï¼Œåœ¨ org-mode ä¸­å¯ä»¥å¯¹é½è¡¨æ ¼ã€‚</p><p>å°è¯•è¿‡ <code>variable-pitch-mode</code> å’Œ <code>fixed-pitch-mode</code>, ä¸å¥½ç”¨ã€‚</p><p>ä¸è®¾ç½® charsetï¼Œåœ¨ MacOS ä¸Šé»˜è®¤ä½¿ç”¨ <code>PingFanc SC</code> å­—ä½“ï¼Œçœ‹èµ·æ¥ä¹Ÿå¯ä»¥ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(set-face-attribute <span style=color:#e6db74>&#39;default</span> <span style=color:#66d9ef>nil</span> :font <span style=color:#e6db74>&#34;Iosevka Fixed&#34;</span> :height <span style=color:#ae81ff>160</span>)
</span></span><span style=display:flex><span>(if (display-graphic-p)
</span></span><span style=display:flex><span>    (dolist (charset <span style=color:#f92672>&#39;</span>(kana han cjk-misc bopomofo))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>set-fontset-font</span> (<span style=color:#a6e22e>frame-parameter</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#39;font</span>)
</span></span><span style=display:flex><span>                        charset (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Source Han Serif SC&#34;</span> :height <span style=color:#ae81ff>160</span>)) <span style=color:#66d9ef>t</span> <span style=color:#e6db74>&#39;prepend</span>))
</span></span></code></pre></div><h3 id=themes>Themes</h3><p>å½“å‰å†…ç½®çš„ Modus-themes ä¸»é¢˜çœ‹èµ·æ¥å¾ˆå¥½ï¼ŒI like it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package modus-themes
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq modus-themes-bold-constructs <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq modus-themes-italic-constructs <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq modus-themes-common-palette-overrides
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#39;</span>(<span style=color:#75715e>;; mode-line</span>
</span></span><span style=display:flex><span>      (border-mode-line-active unspecified)
</span></span><span style=display:flex><span>      (border-mode-line-inactive unspecified)
</span></span><span style=display:flex><span>      (bg-mode-line-active bg-main)
</span></span><span style=display:flex><span>      (fg-mode-line-active fg-main)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; line-number</span>
</span></span><span style=display:flex><span>      (fg-line-number-inactive <span style=color:#e6db74>&#34;gray50&#34;</span>)
</span></span><span style=display:flex><span>      (fg-line-number-active red-cooler)
</span></span><span style=display:flex><span>      (bg-line-number-inactive unspecified)
</span></span><span style=display:flex><span>      (bg-line-number-active unspecified)
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; link</span>
</span></span><span style=display:flex><span>      (underline-link border)
</span></span><span style=display:flex><span>      (underline-link-visited border)
</span></span><span style=display:flex><span>      (underline-link-symbolic border)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; org agenda</span>
</span></span><span style=display:flex><span>      (date-common cyan)   <span style=color:#75715e>; default value (for timestamps and more)</span>
</span></span><span style=display:flex><span>      (date-deadline red-warmer)
</span></span><span style=display:flex><span>      (date-event magenta-warmer)
</span></span><span style=display:flex><span>      (date-holiday blue) <span style=color:#75715e>; for M-x calendar</span>
</span></span><span style=display:flex><span>      (date-now yellow-warmer)
</span></span><span style=display:flex><span>      (date-scheduled magenta-cooler)
</span></span><span style=display:flex><span>      (date-weekday cyan-cooler)
</span></span><span style=display:flex><span>      (date-weekend blue-faint)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; org heading</span>
</span></span><span style=display:flex><span>      (fg-heading-1 blue-warmer)
</span></span><span style=display:flex><span>      (fg-heading-2 yellow-cooler)
</span></span><span style=display:flex><span>      (fg-heading-3 cyan-cooler)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq modus-themes-prompts <span style=color:#f92672>&#39;</span>(extrabold italic))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq modus-themes-completions
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#39;</span>((matches <span style=color:#f92672>.</span> (extrabold))
</span></span><span style=display:flex><span>      (selection <span style=color:#f92672>.</span> (semibold italic text-also)))))
</span></span></code></pre></div><h4 id=theme-switch>Theme switch</h4><p>emacs-plus can switch themes by system. é€šè¿‡å¢åŠ çš„è¡¥å®šå®ç°çš„æ­¤åŠŸèƒ½ï¼Œè‹¥æ˜¯ä¸ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œè¿˜æœ‰ <a href=https://github.com/LionyxML/auto-dark-emacs>auto-dark-emacs</a> å¯ä»¥ä½¿ç”¨ã€‚</p><p>ä½¿ç”¨ <a href=https://github.com/mclear-tools/build-emacs-macos/tree/main/>mclear-tools/build-emacs-macos: Build script for emacs and macos</a> è‡ªç¼–è¯‘ Emacs ä¹Ÿæœ‰æ”¹å˜ä¸»é¢˜çš„ patch.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/apply-theme (appearance)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Load theme, taking current system APPEARANCE into consideration.&#34;</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>mapc</span> <span style=color:#a6e22e>#&#39;</span>disable-theme custom-enabled-themes)
</span></span><span style=display:flex><span>  (pcase appearance
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#39;light</span> (load-theme <span style=color:#e6db74>&#39;modus-operandi</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#39;dark</span> (load-theme <span style=color:#e6db74>&#39;modus-vivendi</span> <span style=color:#66d9ef>t</span>))))
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;ns-system-appearance-change-functions</span> <span style=color:#a6e22e>#&#39;</span>my/apply-theme)
</span></span></code></pre></div><h3 id=all-the-icons>all-the-icons</h3><p>è¿™é‡Œä½¿ç”¨äº†<a href=https://github.com/domtronn/all-the-icons.el>domtronn/all-the-icons.el: A utility package to collect various Icon Fonts and propertize them within Emacs.</a></p><p>éœ€è¦è‡ªå·±æ‰§è¡Œ all-the-icons-install-fonts æ¥å®‰è£…å¯¹åº”çš„å­—ä½“ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#e6db74>&#39;unicode</span> (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>) <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#39;prepend</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#e6db74>&#39;unicode</span> (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;file-icons&#34;</span>) <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#39;prepend</span>)
</span></span></code></pre></div><p>è¿™éƒ¨ä»½çš„é…ç½®æ¥æºï¼š<a href=https://github.com/seagle0128/.emacs.d>seagle0128/.emacs.d: Centaur Emacs - A Fancy and Fast Emacs Configuration</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package all-the-icons
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (let ((extension-icon-alist
</span></span><span style=display:flex><span>         <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;bat&#34;</span>  all-the-icons-alltheicon <span style=color:#e6db74>&#34;terminal&#34;</span> :face all-the-icons-lsilver)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;cmd&#34;</span>  all-the-icons-alltheicon <span style=color:#e6db74>&#34;terminal&#34;</span> :face all-the-icons-lsilver)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;conf&#34;</span> all-the-icons-octicon <span style=color:#e6db74>&#34;settings&#34;</span>    :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-yellow)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;eln&#34;</span>  all-the-icons-octicon <span style=color:#e6db74>&#34;file-binary&#34;</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-dsilver)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;epub&#34;</span> all-the-icons-faicon <span style=color:#e6db74>&#34;book&#34;</span>         :height <span style=color:#ae81ff>1.0</span> :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-green)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;exe&#34;</span>  all-the-icons-octicon <span style=color:#e6db74>&#34;file-binary&#34;</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-dsilver)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;make&#34;</span> all-the-icons-fileicon <span style=color:#e6db74>&#34;gnu&#34;</span>        :face all-the-icons-dorange)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;rss&#34;</span>  all-the-icons-octicon <span style=color:#e6db74>&#34;rss&#34;</span>         :height <span style=color:#ae81ff>1.1</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-lorange)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;toml&#34;</span> all-the-icons-octicon <span style=color:#e6db74>&#34;settings&#34;</span>    :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-yellow)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;tsx&#34;</span>  all-the-icons-fileicon <span style=color:#e6db74>&#34;tsx&#34;</span>        :height <span style=color:#ae81ff>1.0</span> :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-cyan-alt)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;xpm&#34;</span>  all-the-icons-octicon <span style=color:#e6db74>&#34;file-media&#34;</span>  :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-dgreen))))
</span></span><span style=display:flex><span>    (dolist (icon extension-icon-alist)
</span></span><span style=display:flex><span>      (add-to-list <span style=color:#e6db74>&#39;all-the-icons-extension-icon-alist</span> icon)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (let ((regexp-icon-alist
</span></span><span style=display:flex><span>         <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;\\.[bB][iI][nN]$&#34;</span>               all-the-icons-octicon <span style=color:#e6db74>&#34;file-binary&#34;</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-yellow)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;^config$&#34;</span>                       all-the-icons-octicon <span style=color:#e6db74>&#34;settings&#34;</span>    :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-dorange)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;\\.\\(ba\\|z\\)shrc$&#34;</span>           all-the-icons-alltheicon <span style=color:#e6db74>&#34;script&#34;</span>   :height <span style=color:#ae81ff>0.9</span> :face all-the-icons-dpink)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;\\.\\(bash\\|zsh\\)*_?profile$&#34;</span> all-the-icons-alltheicon <span style=color:#e6db74>&#34;script&#34;</span>   :height <span style=color:#ae81ff>0.9</span> :face all-the-icons-dred)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;\\.\\(ba\\|z\\)sh_history$&#34;</span>     all-the-icons-alltheicon <span style=color:#e6db74>&#34;script&#34;</span>   :height <span style=color:#ae81ff>0.9</span> :face all-the-icons-dsilver)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;\\.zshenv$&#34;</span>                     all-the-icons-alltheicon <span style=color:#e6db74>&#34;script&#34;</span>   :height <span style=color:#ae81ff>0.9</span> :face all-the-icons-dred)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;Cask\\&#39;&#34;</span>                        all-the-icons-fileicon <span style=color:#e6db74>&#34;elisp&#34;</span>      :height <span style=color:#ae81ff>1.0</span> :v-adjust <span style=color:#ae81ff>-0.2</span> :face all-the-icons-blue)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;NEWS$&#34;</span>                          all-the-icons-faicon <span style=color:#e6db74>&#34;newspaper-o&#34;</span>  :height <span style=color:#ae81ff>0.9</span> :v-adjust <span style=color:#ae81ff>-0.2</span>)
</span></span><span style=display:flex><span>           (<span style=color:#e6db74>&#34;^Rakefile$&#34;</span>                     all-the-icons-alltheicon <span style=color:#e6db74>&#34;ruby-alt&#34;</span> :face all-the-icons-red))))
</span></span><span style=display:flex><span>    (dolist (icon regexp-icon-alist)
</span></span><span style=display:flex><span>      (add-to-list <span style=color:#e6db74>&#39;all-the-icons-regexp-icon-alist</span> icon)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (let ((mode-icon-alist
</span></span><span style=display:flex><span>         <span style=color:#f92672>&#39;</span>((xwidget-webkit-mode           all-the-icons-faicon <span style=color:#e6db74>&#34;chrome&#34;</span>          :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-blue)
</span></span><span style=display:flex><span>           (bongo-playlist-mode           all-the-icons-material <span style=color:#e6db74>&#34;queue_music&#34;</span>   :height <span style=color:#ae81ff>1.3</span> :face all-the-icons-green)
</span></span><span style=display:flex><span>           (bongo-library-mode            all-the-icons-material <span style=color:#e6db74>&#34;library_music&#34;</span> :height <span style=color:#ae81ff>1.1</span> :face all-the-icons-green)
</span></span><span style=display:flex><span>           (simple-mpc-mode               all-the-icons-faicon <span style=color:#e6db74>&#34;music&#34;</span>           :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-green)
</span></span><span style=display:flex><span>           (mingus-playlist-mode          all-the-icons-faicon <span style=color:#e6db74>&#34;music&#34;</span>           :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-green)
</span></span><span style=display:flex><span>           (mingus-help-mode              all-the-icons-material <span style=color:#e6db74>&#34;music_note&#34;</span>    :height <span style=color:#ae81ff>1.2</span> :face all-the-icons-green)
</span></span><span style=display:flex><span>           (mingus-browse-mode            all-the-icons-material <span style=color:#e6db74>&#34;library_music&#34;</span> :height <span style=color:#ae81ff>1.1</span> :face all-the-icons-green)
</span></span><span style=display:flex><span>           (mingus-burn-mode              all-the-icons-material <span style=color:#e6db74>&#34;queue_music&#34;</span>   :height <span style=color:#ae81ff>1.3</span> :face all-the-icons-green)
</span></span><span style=display:flex><span>           (gnus-group-mode               all-the-icons-fileicon <span style=color:#e6db74>&#34;gnu&#34;</span>           :face all-the-icons-silver)
</span></span><span style=display:flex><span>           (gnus-summary-mode             all-the-icons-octicon <span style=color:#e6db74>&#34;inbox&#34;</span>          :height <span style=color:#ae81ff>1.0</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-orange)
</span></span><span style=display:flex><span>           (gnus-article-mode             all-the-icons-octicon <span style=color:#e6db74>&#34;mail&#34;</span>           :height <span style=color:#ae81ff>1.1</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-lblue)
</span></span><span style=display:flex><span>           (message-mode                  all-the-icons-octicon <span style=color:#e6db74>&#34;mail&#34;</span>           :height <span style=color:#ae81ff>1.1</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-lblue)
</span></span><span style=display:flex><span>           (diff-mode                     all-the-icons-octicon <span style=color:#e6db74>&#34;git-compare&#34;</span>    :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-lred)
</span></span><span style=display:flex><span>           (flycheck-error-list-mode      all-the-icons-octicon <span style=color:#e6db74>&#34;checklist&#34;</span>      :height <span style=color:#ae81ff>1.1</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-lred)
</span></span><span style=display:flex><span>           (newsticker-mode               all-the-icons-faicon <span style=color:#e6db74>&#34;rss-square&#34;</span>      :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-orange)
</span></span><span style=display:flex><span>           (newsticker-treeview-mode      all-the-icons-faicon <span style=color:#e6db74>&#34;rss-square&#34;</span>      :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-orange)
</span></span><span style=display:flex><span>           (newsticker-treeview-list-mode all-the-icons-octicon <span style=color:#e6db74>&#34;rss&#34;</span>            :height <span style=color:#ae81ff>1.1</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-orange)
</span></span><span style=display:flex><span>           (newsticker-treeview-item-mode all-the-icons-octicon <span style=color:#e6db74>&#34;rss&#34;</span>            :height <span style=color:#ae81ff>1.1</span> :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-lorange)
</span></span><span style=display:flex><span>           (conf-mode                     all-the-icons-octicon <span style=color:#e6db74>&#34;settings&#34;</span>       :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-yellow)
</span></span><span style=display:flex><span>           (conf-space-mode               all-the-icons-octicon <span style=color:#e6db74>&#34;settings&#34;</span>       :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-yellow)
</span></span><span style=display:flex><span>           (gitconfig-mode                all-the-icons-octicon <span style=color:#e6db74>&#34;settings&#34;</span>       :v-adjust <span style=color:#ae81ff>0.0</span> :face all-the-icons-dorange)
</span></span><span style=display:flex><span>           (forge-topic-mode              all-the-icons-alltheicon <span style=color:#e6db74>&#34;git&#34;</span>         :face all-the-icons-blue)
</span></span><span style=display:flex><span>           (help-mode                     all-the-icons-faicon <span style=color:#e6db74>&#34;info-circle&#34;</span>     :height <span style=color:#ae81ff>1.1</span> :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-purple)
</span></span><span style=display:flex><span>           (helpful-mode                  all-the-icons-faicon <span style=color:#e6db74>&#34;info-circle&#34;</span>     :height <span style=color:#ae81ff>1.1</span> :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-purple)
</span></span><span style=display:flex><span>           (Info-mode                     all-the-icons-faicon <span style=color:#e6db74>&#34;info-circle&#34;</span>     :height <span style=color:#ae81ff>1.1</span> :v-adjust <span style=color:#ae81ff>-0.1</span>)
</span></span><span style=display:flex><span>           (cask-mode                     all-the-icons-fileicon <span style=color:#e6db74>&#34;elisp&#34;</span>         :height <span style=color:#ae81ff>1.0</span> :v-adjust <span style=color:#ae81ff>-0.2</span> :face all-the-icons-blue)
</span></span><span style=display:flex><span>           (ein:notebooklist-mode         all-the-icons-faicon <span style=color:#e6db74>&#34;book&#34;</span>            :face all-the-icons-lorange)
</span></span><span style=display:flex><span>           (ein:notebook-mode             all-the-icons-fileicon <span style=color:#e6db74>&#34;jupyter&#34;</span>       :height <span style=color:#ae81ff>1.2</span> :face all-the-icons-orange)
</span></span><span style=display:flex><span>           (ein:notebook-multilang-mode   all-the-icons-fileicon <span style=color:#e6db74>&#34;jupyter&#34;</span>       :height <span style=color:#ae81ff>1.2</span> :face all-the-icons-dorange)
</span></span><span style=display:flex><span>           (nov-mode                      all-the-icons-faicon <span style=color:#e6db74>&#34;book&#34;</span>            :height <span style=color:#ae81ff>1.0</span> :v-adjust <span style=color:#ae81ff>-0.1</span> :face all-the-icons-green)
</span></span><span style=display:flex><span>           (gfm-mode                      all-the-icons-octicon <span style=color:#e6db74>&#34;markdown&#34;</span>       :face all-the-icons-lblue)
</span></span><span style=display:flex><span>           (osx-dictionary-mode           all-the-icons-material <span style=color:#e6db74>&#34;library_books&#34;</span> :face all-the-icons-lblue)
</span></span><span style=display:flex><span>           (youdao-dictionary-mode        all-the-icons-material <span style=color:#e6db74>&#34;library_books&#34;</span> :face all-the-icons-lblue)
</span></span><span style=display:flex><span>           (fanyi-mode                    all-the-icons-material <span style=color:#e6db74>&#34;library_books&#34;</span> :face all-the-icons-lblue))))
</span></span><span style=display:flex><span>    (dolist (icon mode-icon-alist)
</span></span><span style=display:flex><span>      (add-to-list <span style=color:#e6db74>&#39;all-the-icons-mode-icon-alist</span> icon))))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package all-the-icons-completion
</span></span><span style=display:flex><span>  :hook ((minibuffer-setup <span style=color:#f92672>.</span> all-the-icons-completion-mode)
</span></span><span style=display:flex><span>         (marginalia-mode <span style=color:#f92672>.</span> all-the-icons-completion-marginalia-setup)))
</span></span></code></pre></div><h3 id=fringe-mode>fringe-mode</h3><p>å› ä¸ºæˆ‘è¦ä½¿ç”¨ <a href=#org-transclusion>org-transclusion</a>, æ‰€ä»¥ä¸èƒ½é»˜è®¤ä¸æ˜¾ç¤º fringe. å°†å…¶è®¾ç½®ä¸ºæœ€å°æ¨¡å¼ã€‚</p><p>fringe-mode éœ€è¦è·Ÿä¸€ä¸ª cons cell, ç›´æ¥ä½¿ç”¨ minimal ä¼šæŠ¥é”™ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:#a6e22e>define-fringe-bitmap</span> <span style=color:#e6db74>&#39;right-curly-arrow</span>  [])
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-fringe-bitmap</span> <span style=color:#e6db74>&#39;left-curly-arrow</span>  [])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(fringe-mode <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>1</span>))
</span></span></code></pre></div><h3 id=hl-line-mode>hl-line-mode</h3><p>é«˜äº®å½“å‰è¡Œï¼Œå…¨å±€å¼€å¯ä½¿ç”¨ <code>global-hl-line-mode</code>.</p><p>ä¸ä½¿ç”¨ <code>global-hl-line-mode</code> å› ä¸ºä¸æƒ³åœ¨ dashboard ä¸­å¼€å¯è¡Œé«˜äº®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;hl-line-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;hl-line-mode</span>)
</span></span></code></pre></div><h3 id=line-numbers>line numbers</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default display-line-numbers-widen <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;display-line-numbers-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;display-line-numbers-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;LaTeX-mode-hook</span> <span style=color:#e6db74>&#39;display-line-numbers-mode</span>)
</span></span></code></pre></div><h3 id=scroll-bar-mode>scroll-bar-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(scroll-bar-mode <span style=color:#ae81ff>0</span>)
</span></span></code></pre></div><h3 id=fill-column-indicator>fill column indicator</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default fill-column <span style=color:#ae81ff>90</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(face-spec-set <span style=color:#e6db74>&#39;fill-column-indicator</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>&#39;</span>((default :height <span style=color:#ae81ff>0.1</span>))
</span></span><span style=display:flex><span>               <span style=color:#e6db74>&#39;face-override-spec</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; only show fill indicator in prog mode.</span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;display-fill-column-indicator-mode</span>)
</span></span></code></pre></div><h3 id=paren>Paren</h3><p>æ˜¾ç¤ºå¯¹åº”çš„æ‹¬å·ï¼Œè¿™ä¸ªåœ¨ elisp ä¸­æŒºå‹å¥½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq show-paren-style <span style=color:#e6db74>&#39;parenthesis</span>)
</span></span><span style=display:flex><span>(setq show-paren-context-when-offscreen <span style=color:#e6db74>&#39;overlay</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;text-mode-hook</span> <span style=color:#e6db74>&#39;show-paren-mode</span>)
</span></span></code></pre></div><h3 id=cursor-and-color>Cursor and color</h3><p>é»˜è®¤å…³é—­å…‰æ ‡é—ªçƒã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(blink-cursor-mode <span style=color:#ae81ff>-1</span>)
</span></span></code></pre></div><p>ä½¿ç”¨ Evilï¼Œé€šè¿‡å…‰æ ‡çš„é¢œè‰²æ¥æç¤ºå½“å‰çš„è¾“å…¥æ³•çŠ¶æ€ï¼Œç»“åˆä½¿ç”¨<a href=http://zzzm.ysepan.com/>ä¸‰ç éƒ‘ç  / è‡³è‡³éƒ‘ç  ï¼ˆè‡³ç®€Â·è‡³çˆ±ï¼‰zhengma.plus</a> è¾“å…¥æ³•ï¼Œå…·æœ‰å¾ˆå¥½çš„ä½¿ç”¨ä½“éªŒï¼Œç›¸å½“çš„æ˜ç¡®æ„Ÿã€‚</p><p>å…³äºå…‰æ ‡è‡ªåŠ¨æ›´æ¢é¢œè‰²ï¼Œè¿™é‡Œæœ‰ä¸ªåŒ…å¯ä»¥ä½¿ç”¨ï¼š<a href=https://github.com/Eason0210/im-cursor-chg>Eason0210/im-cursor-chg</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun im--chinese-p ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Check if the current input state is Chinese.&#34;</span>
</span></span><span style=display:flex><span>  (if (featurep <span style=color:#e6db74>&#39;rime</span>)
</span></span><span style=display:flex><span>      (and (rime--should-enable-p)
</span></span><span style=display:flex><span>           (not (rime--should-inline-ascii-p))
</span></span><span style=display:flex><span>           current-input-method)
</span></span><span style=display:flex><span>    current-input-method))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun im-change-cursor-color ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Set cursor color depending on input method.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (set-cursor-color (if (im--chinese-p)
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#34;red&#34;</span>
</span></span><span style=display:flex><span>                      (foreground-color-at-point))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;post-command-hook</span> <span style=color:#e6db74>&#39;im-change-cursor-color</span>)
</span></span></code></pre></div><p><a href=https://emacs-china.org/t/topic/17717/42>åˆ‡æ¢è¾“å…¥æ³•æ—¶è‡ªåŠ¨æ›´æ¢å…‰æ ‡é¢œè‰² - Emacs-general - Emacs China</a> æåˆ°äº† <code>post-command-hook</code> çš„å¼€é”€æ¯”è¾ƒå¤§ï¼Œè°ƒç”¨é¢‘ç¹ã€‚</p><p>ä½¿ç”¨ evil å†…ç½®çš„ hook ä¹Ÿå¯ä»¥è¾¾åˆ°åˆ‡æ¢å…‰æ ‡é¢œè‰²çš„åŠŸèƒ½ï¼ŒåŒæ—¶é¿å… <code>post-command-hook</code> çš„å·¨å¤§å¼€é”€ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun im--chinese-p ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Check if the current input state is Chinese.&#34;</span>
</span></span><span style=display:flex><span>  (if (featurep <span style=color:#e6db74>&#39;rime</span>)
</span></span><span style=display:flex><span>      (and (rime--should-enable-p)
</span></span><span style=display:flex><span>           (not (rime--should-inline-ascii-p))
</span></span><span style=display:flex><span>           current-input-method)
</span></span><span style=display:flex><span>    current-input-method))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;evil-insert-state-entry-hook</span>
</span></span><span style=display:flex><span>          (lambda ()
</span></span><span style=display:flex><span>            (when (im--chinese-p)
</span></span><span style=display:flex><span>              (set-cursor-color <span style=color:#e6db74>&#34;red&#34;</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;evil-insert-state-exit-hook</span>
</span></span><span style=display:flex><span>          (lambda ()
</span></span><span style=display:flex><span>            (set-cursor-color (foreground-color-at-point))))
</span></span></code></pre></div><h3 id=frame>Frame</h3><p>çª—å£é€æ˜ï¼Œæ›´å¤šè§ï¼š<a href=https://emacs-china.org/t/emacs/2405/11>Emacs é€æ˜çª—å£ - Emacs-general - Emacs China</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(set-frame-parameter <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#39;alpha</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>100</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>100</span>))
</span></span></code></pre></div><p>åœ¨ MacOS ä¸Šæ–°å»ºçš„ frame æ€»æ˜¯ä½äºå±å¹•çš„å·¦ä¸Šè§’ã€‚è§£å†³æ–¹æ¡ˆï¼š<a href=https://christiantietze.de/posts/2021/06/emacs-center-window/>Automatically Center New Emacs Windows (Aka Frames) on Screen â€¢ Christian Tietze</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun ct/frame-center (<span style=color:#66d9ef>&amp;optional</span> frame)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Center a frame on the screen.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let* ((frame (or (and (<span style=color:#a6e22e>boundp</span> <span style=color:#e6db74>&#39;frame</span>) frame) (<span style=color:#a6e22e>selected-frame</span>)))
</span></span><span style=display:flex><span>         (center (ct/frame-get-center frame)))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>apply</span> <span style=color:#e6db74>&#39;set-frame-position</span> (flatten-list (<span style=color:#a6e22e>list</span> frame center)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun ct/screen-usable-height (<span style=color:#66d9ef>&amp;optional</span> display)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return the usable height of the display.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Some window-systems have portions of the screen which Emacs
</span></span></span><span style=display:flex><span><span style=color:#e6db74>cannot address. This function should return the height of the
</span></span></span><span style=display:flex><span><span style=color:#e6db74>screen, minus anything which is not usable.&#34;</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>-</span> (display-pixel-height display)
</span></span><span style=display:flex><span>     (cond ((<span style=color:#a6e22e>eq</span> <span style=color:#a6e22e>window-system</span> <span style=color:#e6db74>&#39;ns</span>) <span style=color:#ae81ff>22</span>) <span style=color:#75715e>;; macOS Menu Bar offset</span>
</span></span><span style=display:flex><span>           (<span style=color:#66d9ef>t</span> <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun ct/screen-usable-width (<span style=color:#66d9ef>&amp;optional</span> display)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return the usable width of the display.&#34;</span>
</span></span><span style=display:flex><span>  (display-pixel-width display))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun ct/center-box (w h cw ch)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Center a box inside another box.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Returns a list of `(TOP LEFT)&#39; representing the centered position
</span></span></span><span style=display:flex><span><span style=color:#e6db74>of the box `(w h)&#39; inside the box `(cw ch)&#39;.&#34;</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>list</span> (<span style=color:#a6e22e>/</span> (<span style=color:#a6e22e>-</span> cw w) <span style=color:#ae81ff>2</span>) (<span style=color:#a6e22e>/</span> (<span style=color:#a6e22e>-</span> ch h) <span style=color:#ae81ff>2</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun ct/frame-get-center (frame)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return the center position of FRAME on it&#39;s display.&#34;</span>
</span></span><span style=display:flex><span>  (let ((disp (<span style=color:#a6e22e>frame-parameter</span> frame <span style=color:#e6db74>&#39;display</span>)))
</span></span><span style=display:flex><span>    (ct/center-box (<span style=color:#a6e22e>frame-pixel-width</span> frame) (<span style=color:#a6e22e>frame-pixel-height</span> frame)
</span></span><span style=display:flex><span>                   (ct/screen-usable-width disp) (ct/screen-usable-height disp))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun ct/frame-center (<span style=color:#66d9ef>&amp;optional</span> frame)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Center a frame on the screen.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>apply</span> <span style=color:#e6db74>&#39;set-frame-position</span>
</span></span><span style=display:flex><span>         (let* ((frame (or (and (<span style=color:#a6e22e>boundp</span> <span style=color:#e6db74>&#39;frame</span>) frame) (<span style=color:#a6e22e>selected-frame</span>)))
</span></span><span style=display:flex><span>                (center (ct/frame-get-center frame)))
</span></span><span style=display:flex><span>           <span style=color:#75715e>;; Flatten the X/Y list in `center` into a single list with `frame`</span>
</span></span><span style=display:flex><span>           <span style=color:#75715e>;; so this list can be applied as parameters to `set-frame-position`:</span>
</span></span><span style=display:flex><span>           <span style=color:#f92672>`</span>(<span style=color:#f92672>,</span>frame <span style=color:#f92672>,@</span>center))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;after-make-frame-functions</span> <span style=color:#a6e22e>#&#39;</span>ct/frame-center <span style=color:#ae81ff>0</span>)
</span></span></code></pre></div><p>é»˜è®¤çš„ make-frame çš„æŒ‰é”®æ˜¯ <code>s-n</code>, ä½¿ç”¨ä¿®æ”¹çš„å‡½æ•°å®ç°äº†åŒä¸€ä¸ªæŒ‰é”®ï¼Œä¸¤ç§å½¢ä¸ºã€‚æˆ‘é»˜è®¤çš„ frame æ˜¯å…¨å±ä½¿ç”¨ï¼Œåªåœ¨å°‘æ•°æ—¶å€™ä½¿ç”¨ make-frame çš„åŠŸèƒ½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/make-or-delete-frame ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (if (<span style=color:#a6e22e>=</span> (frame-width) <span style=color:#ae81ff>80</span>) <span style=color:#75715e>;; 80 is the default frame width.</span>
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>delete-frame</span>)
</span></span><span style=display:flex><span>    (make-frame)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;s-n&#34;</span>) <span style=color:#e6db74>&#39;my/make-or-delete-frame</span>)
</span></span></code></pre></div><h3 id=modeline>modeline</h3><h4 id=mode-line-format>mode-line-format</h4><p>2023-01-30 å‘ç° doom-modeline æ€»æ˜¯åœ¨ä¸åœçš„ <code>redisplay_internal</code> ï¼Œéœ€è¦æ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€‚æ‰€ä»¥æš‚æ—¶ç¦ç”¨æ­¤åŒ…ï¼Œé€šè¿‡è‡ªå®šä¹‰ mode-line-format æ¥é…ç½® modelineã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>210  56% + command-execute
</span></span><span style=display:flex><span> 94  25% + ...
</span></span><span style=display:flex><span> 62  16% - redisplay_internal (C function)
</span></span><span style=display:flex><span> 61  16%  - eval
</span></span><span style=display:flex><span> 51  13%   + doom-modeline-segment--buffer-info
</span></span><span style=display:flex><span>  9   2%   + doom-modeline-format--main
</span></span><span style=display:flex><span>  1   0%   + doom-modeline-segment--modals
</span></span></code></pre></div><p><a href=https://emacs.stackexchange.com/questions/5529/how-to-right-align-some-items-in-the-modeline>mode line - How to right align some items in the modeline? - Emacs Stack Exchange</a>
ä»¥ä¸‹çš„å‡½æ•°æ¥è‡ªä¸Šé¢çš„é“¾æ¥ä¸­çš„å›ç­”ï¼Œä½¿ç”¨ <code>string-width</code> æ›¿ä»£äº† <code>length</code> ï¼Œå¦åˆ™åœ¨å¯¹å«æœ‰ä¸­æ–‡çš„ heading è¿›è¡Œ org-clock çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´è¶…å‡º mode-line åªæ˜¾ç¤ºéƒ¨ä»½çš„ headingã€‚</p><p>2023-02-01 Emacs 29 ä¸Šä½¿ç”¨ <code>string-pixel-width</code> æ›¿ä»£ <code>string-width</code> ï¼Œå¯ä»¥è·å¾—è±¡ç´ çº§å¯¹é½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/mode-line-padding ()
</span></span><span style=display:flex><span>  (let* ((r-length (<span style=color:#a6e22e>string-width</span> (<span style=color:#a6e22e>format-mode-line</span> global-mode-string))))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>propertize</span> <span style=color:#e6db74>&#34; &#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;display</span> <span style=color:#f92672>`</span>(space :align-to (<span style=color:#a6e22e>-</span> right <span style=color:#f92672>,</span>(<span style=color:#a6e22e>+</span> r-length <span style=color:#ae81ff>1</span>))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;global-mode-string</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>&#39;</span>(:eval (<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>                      (<span style=color:#a6e22e>concat</span>
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;ğš»ğš¨ğš© &#34;</span>
</span></span><span style=display:flex><span>                       (<span style=color:#a6e22e>number-to-string</span> (tab-bar--current-tab-index))
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;: &#34;</span>
</span></span><span style=display:flex><span>                       (alist-get <span style=color:#e6db74>&#39;group</span> (tab-bar--current-tab))) <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;font-lock-constant-face</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq mode-line-end-spaces
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>        global-mode-string))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq mode-line-position-column-line-format <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34; %l,%c&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq mode-line-percent-position <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>-4</span> <span style=color:#e6db74>&#34;%p&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq-default mode-line-format
</span></span><span style=display:flex><span>              <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;%e&#34;</span>
</span></span><span style=display:flex><span>                mode-line-front-space
</span></span><span style=display:flex><span>                (:propertize (<span style=color:#e6db74>&#34;&#34;</span> mode-line-mule-info mode-line-client mode-line-modified mode-line-remote))
</span></span><span style=display:flex><span>                mode-line-frame-identification
</span></span><span style=display:flex><span>                mode-line-buffer-identification
</span></span><span style=display:flex><span>                mode-line-position
</span></span><span style=display:flex><span>                <span style=color:#75715e>;; (:eval (propertize &#34; %I &#34; &#39;face &#39;font-lock-constant-face))</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;  &#34;</span>
</span></span><span style=display:flex><span>                (vc-mode vc-mode)
</span></span><span style=display:flex><span>                (:eval (when buffer-read-only
</span></span><span style=display:flex><span>                         (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;  &#34;</span>  (<span style=color:#a6e22e>propertize</span> <span style=color:#e6db74>&#34;RO&#34;</span>
</span></span><span style=display:flex><span>                                                   <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;font-lock-type-face</span>
</span></span><span style=display:flex><span>                                                   <span style=color:#e6db74>&#39;help-echo</span> <span style=color:#e6db74>&#34;Buffer is read-only&#34;</span>))))
</span></span><span style=display:flex><span>                (:eval (my/mode-line-padding))
</span></span><span style=display:flex><span>                mode-line-end-spaces))
</span></span></code></pre></div><p>ä¸Šå¼ä¸­çš„ <code>%e</code> ç­‰è¯´æ˜å¦‚ä¸‹ï¼š<a href=http://emacs-fu.blogspot.com/2011/08/customizing-mode-line.html>emacs-fu: customizing the mode-line</a>.</p><blockquote><p>%b &ndash; print buffer name. %f &ndash; print visited file name.
%F &ndash; print frame name.
%* &ndash; print %, * or hyphen. %+ &ndash; print <strong>, % or hyphen.
%& is like %</strong>, but ignore read-only-ness.
% means buffer is read-only and * means it is modified.
For a modified read-only buffer, %* gives % and %+ gives *.
%s &ndash; print process status. %l &ndash; print the current line number.
%c &ndash; print the current column number (this makes editing slower).
To make the column number update correctly in all cases,
`column-number-mode&rsquo; must be non-nil.
%i &ndash; print the size of the buffer.
%I &ndash; like %i, but use k, M, G, etc., to abbreviate.
%p &ndash; print percent of buffer above top of window, or Top, Bot or All.
%P &ndash; print percent of buffer above bottom of window, perhaps plus Top,
or print Bottom or All.
%n &ndash; print Narrow if appropriate.
%t &ndash; visited file is text or binary (if OS supports this distinction).
%z &ndash; print mnemonics of keyboard, terminal, and buffer coding systems.
%Z &ndash; like %z, but including the end-of-line format.
%e &ndash; print error message about full memory.
%@ &ndash; print @ or hyphen. @ means that default-directory is on a
remote machine.
%[ &ndash; print one [ for each recursive editing level. %] similar.
%% &ndash; print %. %- &ndash; print infinitely many dashes.
Decimal digits after the % specify field width to which to pad.</p></blockquote><h4 id=hide-mode-line>hide-mode-line</h4><p><a href=https://github.com/hlissner/emacs-hide-mode-line>hlissner/emacs-hide-mode-line: An Emacs plugin that hides (or masks) the current buffer&rsquo;s mode-line</a> åœ¨æœ‰äº›æƒ…å†µä¸‹éœ€è¦éšè—å¯¹åº” buffer çš„ modeline.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package hide-mode-line
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>      <span style=color:#75715e>;;:hook (dashboard-mode . hide-mode-line-mode)</span>
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;dashboard-mode-hook</span> <span style=color:#e6db74>&#39;hide-mode-line-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (if (string= (<span style=color:#a6e22e>buffer-name</span>) <span style=color:#e6db74>&#34;*scratch*&#34;</span>)
</span></span><span style=display:flex><span>      (hide-mode-line-mode)))
</span></span></code></pre></div><h4 id=mode-line-bell>mode-line-bell</h4><p><a href=https://github.com/purcell/mode-line-bell>purcell/mode-line-bell: Flash the Emacs mode line instead of ringing the bell</a> å¦‚é¢˜ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package mode-line-bell
</span></span><span style=display:flex><span>  :hook (on-first-buffer <span style=color:#f92672>.</span> mode-line-bell-mode))
</span></span></code></pre></div><h3 id=rainbow-mode>rainbow-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package rainbow-mode
</span></span><span style=display:flex><span>  :hook (prog-mode <span style=color:#f92672>.</span> rainbow-mode))
</span></span></code></pre></div><h3 id=rainbow-delimiters>rainbow-delimiters</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package rainbow-delimiters
</span></span><span style=display:flex><span>  :hook (prog-mode <span style=color:#f92672>.</span> rainbow-delimiters-mode))
</span></span></code></pre></div><h3 id=pulse>pulse</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun pulse-line (<span style=color:#66d9ef>&amp;rest</span> _)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Pulse the current line.&#34;</span>
</span></span><span style=display:flex><span>  (pulse-momentary-highlight-one-line (<span style=color:#a6e22e>point</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(dolist (command <span style=color:#f92672>&#39;</span>(evil-paste-after
</span></span><span style=display:flex><span>                   evil-paste-pop
</span></span><span style=display:flex><span>                   evil-paste-before
</span></span><span style=display:flex><span>                   evil-delete
</span></span><span style=display:flex><span>                   evil-delete-line))
</span></span><span style=display:flex><span>  (advice-add command :after <span style=color:#a6e22e>#&#39;</span>pulse-line))
</span></span></code></pre></div><h3 id=dashboard>dashboard</h3><p>Dashboard å¯ä»¥è®©å¯åŠ¨ç•Œé¢çœ‹èµ·æ¥æ¯” scratch ç•Œé¢æ›´ fancy, ä½†æ˜¯ä¼šæ¯”è¾ƒæ˜æ˜¾çš„å¢åŠ å¯åŠ¨æ—¶é—´ï¼Œæœ‰æ˜æ˜¾çš„è¿Ÿé¡¿æ„Ÿã€‚</p><p>Dashboard ç•Œé¢çš„ banner ä½¿ç”¨çš„æ˜¯ <code>ascii art</code>, å¯ä»¥é€šè¿‡ <a href=https://ascii.co.uk/>ASCII.co.uk - The home of all things ASCII</a> ç”Ÿæˆã€‚</p><p>æˆ–è€…ä¸ä½¿ç”¨ dashboard, å°†å¯åŠ¨ç•Œé¢è®¾ç½®æˆå›¾ç‰‡ç­‰ï¼Œå‚è§ <a href=https://emacs-china.org/t/topic/264/33>å¦‚ä½•è‡ªå®šä¹‰ Banner çš„å›¾æ¡ˆï¼Ÿ - Spacemacs - Emacs China</a>.</p><p>ä¹Ÿå¯ä»¥ç»“åˆ <a href=https://www.emacswiki.org/emacs/TipOfTheDay>EmacsWiki: Tip Of The Day</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package dashboard
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq dashboard-center-content <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq dashboard-set-init-info <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq dashboard-set-footer <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq dashboard-banner-logo-title <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq dashboard-heading-icons <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (dashboard-setup-startup-hook)
</span></span><span style=display:flex><span>  (setq dashboard-items <span style=color:#f92672>&#39;</span>((recents  <span style=color:#f92672>.</span> <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>                          (bookmarks <span style=color:#f92672>.</span> <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>                          (agenda <span style=color:#f92672>.</span> <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>                          (registers <span style=color:#f92672>.</span> <span style=color:#ae81ff>5</span>)))
</span></span><span style=display:flex><span>  (require <span style=color:#e6db74>&#39;cal-china</span>)
</span></span><span style=display:flex><span>  (let* ((ny (calendar-gregorian-from-absolute
</span></span><span style=display:flex><span>              (cadr (<span style=color:#a6e22e>assoc</span> <span style=color:#ae81ff>1</span> (calendar-chinese-year
</span></span><span style=display:flex><span>                              (<span style=color:#a6e22e>string-to-number</span>
</span></span><span style=display:flex><span>                               (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y&#34;</span> (<span style=color:#a6e22e>current-time</span>))))))))
</span></span><span style=display:flex><span>         (m (<span style=color:#a6e22e>string-to-number</span> (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%m&#34;</span> (<span style=color:#a6e22e>current-time</span>))))
</span></span><span style=display:flex><span>         (d (<span style=color:#a6e22e>string-to-number</span> (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%d&#34;</span> (<span style=color:#a6e22e>current-time</span>)))))
</span></span><span style=display:flex><span>    (if (and (<span style=color:#a6e22e>=</span> d (cadr ny))
</span></span><span style=display:flex><span>             (<span style=color:#a6e22e>=</span> m (<span style=color:#a6e22e>car</span> ny)))
</span></span><span style=display:flex><span>        (setq dashboard-startup-banner (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;src/banner2.txt&#34;</span> user-emacs-directory))
</span></span><span style=display:flex><span>      (setq dashboard-startup-banner (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;src/banner.txt&#34;</span> user-emacs-directory)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil</span>
</span></span><span style=display:flex><span>  (evil-define-key <span style=color:#e6db74>&#39;motion</span> <span style=color:#e6db74>&#39;dashboard-mode-map</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gf&#34;</span> <span style=color:#e6db74>&#39;find-file</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gb&#34;</span> <span style=color:#e6db74>&#39;consult-buffer</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(run-with-idle-timer <span style=color:#ae81ff>300</span> <span style=color:#66d9ef>t</span> <span style=color:#a6e22e>#&#39;</span>dashboard-open)
</span></span></code></pre></div><h3 id=color-identifiers-mode>color-identifiers-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package color-identifiers-mode
</span></span><span style=display:flex><span>  :hook (on-first-file <span style=color:#f92672>.</span> global-color-identifiers-mode))
</span></span></code></pre></div><h2 id=powerful-emacs-equipped-with-builtin-packages>Powerful Emacs Equipped with Builtin Packages</h2><p>Emacs å†…ç½®äº†å¾ˆå¤šæœ‰ç”¨çš„ mode, è¯¦ç»†å†…å®¹è¯·å‚è€ƒä»“åº“ï¼š<a href=https://github.com/condy0919/emacs-newbie>condy0919/emacs-newbie: Introduction to Emacs</a>. åˆå­¦è€…å¯ä»¥çœ‹çœ‹ã€‚</p><h3 id=better-default>Better default</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq frame-inhibit-implied-resize <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq use-file-dialog <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>(setq use-dialog-box <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default ring-bell-function <span style=color:#e6db74>&#39;ignore</span>
</span></span><span style=display:flex><span>              use-short-answers <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              read-process-output-max <span style=color:#ae81ff>#x10000</span>
</span></span><span style=display:flex><span>              message-kill-buffer-on-exit <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              message-kill-buffer-query <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              indent-tabs-mode <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              tab-width <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>              make-backup-files <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              create-lockfiles <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              confirm-kill-processes <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              confirm-kill-emacs <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              recenter-redisplay <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              load-prefer-newer <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              mark-ring-max <span style=color:#ae81ff>128</span>
</span></span><span style=display:flex><span>              next-screen-context-lines <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>              inhibit-default-init <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              inhibit-startup-message <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              inhibit-splash-screen <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              inhibit-compacting-font-caches <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              <span style=color:#75715e>;; inhibit-quit nil</span>
</span></span><span style=display:flex><span>              fast-but-imprecise-scrolling <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              scroll-preserve-screen-position <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              auto-save-default <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              auto-save-list-file-name <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              kill-do-not-save-duplicates <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              kill-ring-max (<span style=color:#a6e22e>*</span> kill-ring-max <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>              history-delete-duplicates <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              view-read-only <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              kill-read-only-ok <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>              async-shell-command-display-buffer <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>              <span style=color:#75715e>;; Improve the performance of rendering long lines.</span>
</span></span><span style=display:flex><span>              bidi-display-reordering <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq ffap-machine-p-known <span style=color:#e6db74>&#39;reject</span>)
</span></span></code></pre></div><h3 id=system-coding>system coding</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(prefer-coding-system <span style=color:#e6db74>&#39;utf-8</span>)
</span></span><span style=display:flex><span>(set-default-coding-systems <span style=color:#e6db74>&#39;utf-8</span>)
</span></span><span style=display:flex><span>(set-terminal-coding-system <span style=color:#e6db74>&#39;utf-8</span>)
</span></span><span style=display:flex><span>(set-keyboard-coding-system <span style=color:#e6db74>&#39;utf-8</span>)
</span></span></code></pre></div><h3 id=profiler>profiler</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;profiler-report-mode-hook</span> <span style=color:#a6e22e>#&#39;</span>hl-line-mode)
</span></span></code></pre></div><h3 id=buffer>buffer</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq switch-to-buffer-in-dedicated-window <span style=color:#e6db74>&#39;pop</span>)
</span></span><span style=display:flex><span>(setq switch-to-buffer-obey-display-actions <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;b&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Buffer/Bibtex&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;be&#34;</span> <span style=color:#f92672>&#39;</span>(<span style=color:#a6e22e>eval-buffer</span> :wk <span style=color:#e6db74>&#34;Eval buffer&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;bk&#34;</span> <span style=color:#f92672>&#39;</span>(kill-this-buffer :wk <span style=color:#e6db74>&#34;Kill This Buffer&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil</span>
</span></span><span style=display:flex><span>  (evil-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;global</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gB&#34;</span> <span style=color:#e6db74>&#39;switch-to-prev-buffer</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gb&#34;</span> <span style=color:#e6db74>&#39;switch-to-buffer</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;zx&#34;</span> <span style=color:#e6db74>&#39;kill-current-buffer</span>))
</span></span></code></pre></div><h3 id=calculator>calculator</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package calc
</span></span><span style=display:flex><span>  :commands calc
</span></span><span style=display:flex><span>  :hook ((clac-mode <span style=color:#f92672>.</span> hide-mode-line-mode)
</span></span><span style=display:flex><span>         (clac-trail-mode <span style=color:#f92672>.</span> hide-mode-line-mode)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;C&#34;</span> <span style=color:#f92672>&#39;</span>(calc :wk <span style=color:#e6db74>&#34;calc&#34;</span>))
</span></span></code></pre></div><h3 id=column-number-mode>column-number-mode</h3><p>ä½œç”¨æ˜¯åœ¨ modeline ä¸­æ˜¾ç¤ºå½“å‰å…‰æ ‡ç«–å‘å¤„çš„ä½ç½®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;column-number-mode</span>)
</span></span></code></pre></div><h3 id=size-indication-mode>size-indication-mode</h3><p>ä½œç”¨æ˜¯åœ¨ modeline ä¸­æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;find-file-hook</span> <span style=color:#e6db74>&#39;size-indication-mode</span>)
</span></span></code></pre></div><h3 id=delete-selection-mode>delete-selection-mode</h3><p>ä½œç”¨æ˜¯å½“é€‰ä¸­åŒºåŸŸåè¾“å…¥å­—ç¬¦ä¼šåˆ é™¤é€‰ä¸­çš„åŒºåŸŸï¼Œå¤§éƒ¨ä»½è½¯ä»¶éƒ½æ˜¯è¿™ç§è¡Œä¸ºã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;on-first-input-hook</span> <span style=color:#e6db74>&#39;delete-selection-mode</span>)
</span></span></code></pre></div><h3 id=winner-mode>winner-mode</h3><p>è¿›è¡Œçª—å£ç®¡ç†ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default winner-dont-bind-my-keys <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;on-first-buffer-hook</span> <span style=color:#e6db74>&#39;winner-mode</span>)
</span></span><span style=display:flex><span>(setq winner-boring-buffers <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;*Completions*&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;*Compile-Log*&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;*inferior-lisp*&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;*Fuzzy Completions*&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;*Apropos*&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;*Help*&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;*cvs*&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;*Buffer List*&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;*Ibuffer*&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;*esh command on file*&#34;</span>))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;w&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Window&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;wu&#34;</span> <span style=color:#f92672>&#39;</span>(winner-undo :wk <span style=color:#e6db74>&#34;Undo winner&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;wr&#34;</span> <span style=color:#f92672>&#39;</span>(winner-redo :wk <span style=color:#e6db74>&#34;Redo winner&#34;</span>))
</span></span></code></pre></div><h3 id=auto-revert-mode>auto-revert-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;on-first-file-hook</span> <span style=color:#e6db74>&#39;global-auto-revert-mode</span>)
</span></span></code></pre></div><h3 id=tab-bar-mode>tab-bar-mode</h3><p>å¯ä»¥å°† mode-line ä¸Šçš„ä¸€äº›ä¿¡æ¯æ˜¾ç¤ºåœ¨ tab-bar ä¹‹ä¸Šã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>(setq tab-bar-format &#39;(tab-bar-format-history
</span></span><span style=display:flex><span>                       tab-bar-format-tabs
</span></span><span style=display:flex><span>                       tab-bar-format-align-right
</span></span><span style=display:flex><span>                       tab-bar-format-global))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package tab-bar
</span></span><span style=display:flex><span>  :hook (on-first-file <span style=color:#f92672>.</span> tab-bar-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq tab-bar-new-tab-choice <span style=color:#e6db74>&#34;*scratch*&#34;</span>)
</span></span><span style=display:flex><span>  (setq tab-bar-close-button-show <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq tab-bar-tab-hints <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq tab-bar-show <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package tabspaces
</span></span><span style=display:flex><span>  :after tab-bar
</span></span><span style=display:flex><span>  :hook (tab-bar-mode <span style=color:#f92672>.</span> tabspaces-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq tabspaces-session-file
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;tabsession.el&#34;</span> no-littering-var-directory))
</span></span><span style=display:flex><span>  (setq tabspaces-use-filtered-buffers-as-default <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;t&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Tabs&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;tn&#34;</span> <span style=color:#f92672>&#39;</span>(tab-new :wk <span style=color:#e6db74>&#34;New&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;tg&#34;</span> <span style=color:#f92672>&#39;</span>(tab-group :wk <span style=color:#e6db74>&#34;Group&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;tr&#34;</span> <span style=color:#f92672>&#39;</span>(tab-bar-switch-to-recent-tab :wk <span style=color:#e6db74>&#34;Recent&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;tc&#34;</span> <span style=color:#f92672>&#39;</span>(tab-close :wk <span style=color:#e6db74>&#34;Close&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;tC&#34;</span> <span style=color:#f92672>&#39;</span>(tab-close-group :wk <span style=color:#e6db74>&#34;Close group&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;tO&#34;</span> <span style=color:#f92672>&#39;</span>(tab-close-other :wk <span style=color:#e6db74>&#34;Close other&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil</span>
</span></span><span style=display:flex><span>  (evil-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;global</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gs&#34;</span> <span style=color:#e6db74>&#39;tab-switch</span>))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>&#39;</span>((or (derived-mode <span style=color:#f92672>.</span> org-mode))
</span></span><span style=display:flex><span>               (display-buffer-in-tab)
</span></span><span style=display:flex><span>               (tab-name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Org&#34;</span>)
</span></span><span style=display:flex><span>               (tab-group <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Org&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>&#39;</span>((or (derived-mode <span style=color:#f92672>.</span> latex-mode)
</span></span><span style=display:flex><span>                   (derived-mode <span style=color:#f92672>.</span> LaTeX-mode))
</span></span><span style=display:flex><span>               (display-buffer-in-tab)
</span></span><span style=display:flex><span>               (tab-name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;TEX&#34;</span>)
</span></span><span style=display:flex><span>               (tab-group <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;TEX&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>&#39;</span>((or (derived-mode <span style=color:#f92672>.</span> dired-mode)
</span></span><span style=display:flex><span>                   (derived-mode <span style=color:#f92672>.</span> dirvish-mode))
</span></span><span style=display:flex><span>               (display-buffer-in-tab)
</span></span><span style=display:flex><span>               (tab-name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Dired&#34;</span>)
</span></span><span style=display:flex><span>               (tab-group <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Dired&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>&#39;</span>((derived-mode <span style=color:#f92672>.</span> image-mode)
</span></span><span style=display:flex><span>               (display-buffer-in-tab)
</span></span><span style=display:flex><span>               (tab-name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Pic&#34;</span>)
</span></span><span style=display:flex><span>               (tab-group <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Pic&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>&#39;</span>((derived-mode <span style=color:#f92672>.</span> emacs-lisp-mode)
</span></span><span style=display:flex><span>               (display-buffer-in-tab)
</span></span><span style=display:flex><span>               (tab-name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Prog&#34;</span>)
</span></span><span style=display:flex><span>               (tab-group <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Prog&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>`</span>(<span style=color:#f92672>,</span>(rx (| <span style=color:#e6db74>&#34;*scratch*&#34;</span>
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;*dashboard*&#34;</span>
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;*elfeed-search*&#34;</span>
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;*mu4e-main&#34;</span>
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;*mu4e-headers&#34;</span>
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;*elfeed-summary*&#34;</span>
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;*elfeed-entry-&#34;</span>
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;*Messages*&#34;</span>))
</span></span><span style=display:flex><span>               (display-buffer-in-tab)
</span></span><span style=display:flex><span>               (tab-name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Home&#34;</span>)
</span></span><span style=display:flex><span>               (tab-group <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Home&#34;</span>)))
</span></span></code></pre></div><h3 id=savehist-mode>savehist-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq history-length <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>      savehist-save-minibuffer-history <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      savehist-additional-variables <span style=color:#f92672>&#39;</span>(kill-ring
</span></span><span style=display:flex><span>                                      search-ring
</span></span><span style=display:flex><span>                                      regexp-search-ring)
</span></span><span style=display:flex><span>      history-delete-duplicates <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;on-first-file-hook</span> <span style=color:#e6db74>&#39;savehist-mode</span>)
</span></span></code></pre></div><h3 id=save-place-mode>save-place-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;on-first-buffer-hook</span> <span style=color:#e6db74>&#39;save-place-mode</span>)
</span></span></code></pre></div><h3 id=midnight-mode>midnight-mode</h3><p>ä½œç”¨æ˜¯åŠå¤œçš„æ—¶å€™è‡ªåŠ¨æ¸…ç† bufferã€‚æ€€ç–‘è¿™ä¸ªå¯¼è‡´ mu4e å‡ºç° error code 1 çš„é”™è¯¯ï¼Œå…ˆå…³é—­è¯•è¯•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;on-first-buffer-hook</span> <span style=color:#e6db74>&#39;midnight-mode</span>)
</span></span></code></pre></div><h3 id=so-long-mode>so-long-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;text-mode-hook</span> <span style=color:#e6db74>&#39;global-so-long-mode</span>)
</span></span><span style=display:flex><span>(setq-default large-file-warning-threshold <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>(when (<span style=color:#a6e22e>fboundp</span> <span style=color:#e6db74>&#39;so-long-enable</span>)
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;on-first-file-hook</span> <span style=color:#e6db74>&#39;so-long-enable</span>))
</span></span></code></pre></div><h3 id=electric-pair-mode>electric-pair-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;electric-pair-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;electric-pair-mode</span>)
</span></span></code></pre></div><h3 id=prettify-symbols-mode>prettify-symbols-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq prettify-symbols-alist <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;lambda&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>?Î»</span>)
</span></span><span style=display:flex><span>                               (<span style=color:#e6db74>&#34;function&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>?ğ‘“</span>)))
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;prettify-symbols-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;LaTeX-mode-hook</span> <span style=color:#e6db74>&#39;prettify-symbols-mode</span>)
</span></span></code></pre></div><h3 id=hippie-expand>hippie-expand</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq hippie-expand-try-functions-list <span style=color:#f92672>&#39;</span>(try-complete-file-name-partially
</span></span><span style=display:flex><span>                                         try-complete-file-name
</span></span><span style=display:flex><span>                                         try-expand-all-abbrevs
</span></span><span style=display:flex><span>                                         try-expand-dabbrev
</span></span><span style=display:flex><span>                                         try-expand-dabbrev-all-buffers
</span></span><span style=display:flex><span>                                         try-expand-dabbrev-from-kill
</span></span><span style=display:flex><span>                                         try-complete-lisp-symbol-partially
</span></span><span style=display:flex><span>                                         try-complete-lisp-symbol))
</span></span><span style=display:flex><span>(global-set-key [remap dabbrev-expand] <span style=color:#e6db74>&#39;hippie-expand</span>)
</span></span></code></pre></div><h3 id=outline-minor-mode>outline-minor-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;outline-minor-mode</span>)
</span></span></code></pre></div><h3 id=pixel-scroll-precision-mode>pixel-scroll-precision-mode</h3><p>è¿™ä¸ª mode ä¸å¥½ç”¨ï¼Œä½¿ç”¨è§¦æ‘¸æ¿å¤§å¹…åº¦æ»šåŠ¨å±å¹•åï¼Œä¼šè‡ªåŠ¨å›åˆ°åŸå…ˆçš„ä½ç½®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package loaddefs
</span></span><span style=display:flex><span>  :hook (on-first-file <span style=color:#f92672>.</span> pixel-scroll-precision-mode))
</span></span></code></pre></div><h3 id=recentf-mode>recentf-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;on-first-input-hook</span> <span style=color:#e6db74>&#39;recentf-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;recentf</span>
</span></span><span style=display:flex><span>  (setq recentf-auto-cleanup <span style=color:#ae81ff>300</span>)
</span></span><span style=display:flex><span>  (setq recentf-max-saved-items <span style=color:#ae81ff>1000</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;recentf-exclude</span> <span style=color:#e6db74>&#34;\\.pdf\\&#39;&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fr&#34;</span> <span style=color:#f92672>&#39;</span>(recentf-open-files :wk <span style=color:#e6db74>&#34;Recent files&#34;</span>))
</span></span></code></pre></div><h3 id=visual-line-mode>visual-line-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;turn-on-visual-line-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-roam-mode-hook</span> <span style=color:#e6db74>&#39;turn-on-visual-line-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;LaTeX-mode-hook</span> <span style=color:#a6e22e>#&#39;</span>turn-on-visual-line-mode)
</span></span></code></pre></div><h3 id=word-wrap-whitespace-mode>word-wrap-whitespace-mode</h3><p>è¿™ä¸ªæ˜¯ Emacs 29 ä¸­çš„åŠŸèƒ½ï¼Œå…·ä½“è§ï¼š<a href=https://github.com/emacs-mirror/emacs/commit/c789430331948e76b38091aa95bb9a9602a08289>Add new minor mode word-wrap-whitespace-mode Â· emacs-mirror/emacs@c789430</a></p><p>å¦‚æœä½ ä½¿ç”¨ emacs 29 ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œå°†è¿™ä¸ªæ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°å¯ä»¥ä½¿ç”¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;word-wrap-whitespace-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-roam-mode-hook</span> <span style=color:#e6db74>&#39;word-wrap-whitespace-mode</span>)
</span></span></code></pre></div><h3 id=dired>dired</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package dired
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;C-x d&#34;</span> <span style=color:#f92672>.</span> dired)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq insert-directory-program <span style=color:#e6db74>&#34;/opt/homebrew/bin/gls&#34;</span>)
</span></span><span style=display:flex><span>  (setq dired-use-ls-dired <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq dired-dwim-target <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq dired-auto-revert-buffer <span style=color:#a6e22e>#&#39;</span>dired-buffer-stale-p)
</span></span><span style=display:flex><span>  (setq dired-recursive-copies <span style=color:#e6db74>&#39;always</span>)
</span></span><span style=display:flex><span>  (setq dired-recursive-deletes <span style=color:#e6db74>&#39;top</span>)
</span></span><span style=display:flex><span>  (setq dired-listing-switches
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;-l --almost-all --human-readable --group-directories-first --no-group&#34;</span>)
</span></span><span style=display:flex><span>  (setq dired-auto-revert-buffer <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><h4 id=dired-hide-dotfiles>dired-hide-dotfiles</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package dired-hide-dotfiles
</span></span><span style=display:flex><span>  :bind (:map dired-mode-map
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;s-.&#34;</span> <span style=color:#f92672>.</span> dired-hide-dotfiles-mode)))
</span></span></code></pre></div><h4 id=dirvish>dirvish</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package dirvish
</span></span><span style=display:flex><span>  :bind ([remap dired] <span style=color:#f92672>.</span> dirvish)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq dirvish-use-header-line <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq dirvish-use-mode-line <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq dirvish-hide-cursor <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (with-eval-after-load <span style=color:#e6db74>&#39;doom-modeline</span>
</span></span><span style=display:flex><span>    (setq dirvish-mode-line-height doom-modeline-height))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq dirvish-default-layout <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0.4</span> <span style=color:#ae81ff>0.6</span>))
</span></span><span style=display:flex><span>  (setq dirvish-header-line-format
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(:left (path) :right (free-space)))
</span></span><span style=display:flex><span>  (setq dirvish-mode-line-format
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(:left (<span style=color:#a6e22e>sort</span> file-time <span style=color:#e6db74>&#34; &#34;</span> file-size symlink) :right (omit yank index)))
</span></span><span style=display:flex><span>  :hook ((dirvish-find-entry <span style=color:#f92672>.</span> (lambda (<span style=color:#66d9ef>&amp;rest</span> _) (setq-local truncate-lines <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>         (on-switch-buffer <span style=color:#f92672>.</span> dirvish-override-dired-mode)))
</span></span></code></pre></div><p><code>e</code> ç»‘å®šçš„å‡½æ•°è§ï¼š<a href=#open-file-with-system-file-manager>Open file with system file manager</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil-collection</span>
</span></span><span style=display:flex><span>  (evil-collection-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;dirvish-mode-map</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;q&#34;</span> <span style=color:#e6db74>&#39;dirvish-quit</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;e&#34;</span> <span style=color:#e6db74>&#39;xah-show-in-desktop</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; dired has default keybinding, C-x d, remap it to dirvish.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil</span>
</span></span><span style=display:flex><span>  (evil-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;global</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;zd&#34;</span> <span style=color:#e6db74>&#39;dirvish-quick-access</span>))
</span></span></code></pre></div><h4 id=consult-dir>consult-dir</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package consult-dir
</span></span><span style=display:flex><span>  :bind ((<span style=color:#e6db74>&#34;C-x C-d&#34;</span> <span style=color:#f92672>.</span> consult-dir)
</span></span><span style=display:flex><span>         (:map minibuffer-mode-map
</span></span><span style=display:flex><span>               (<span style=color:#e6db74>&#34;C-x C-d&#34;</span> <span style=color:#f92672>.</span> consult-dir)
</span></span><span style=display:flex><span>               (<span style=color:#e6db74>&#34;C-x C-j&#34;</span> <span style=color:#f92672>.</span> consult-dir-jump-file))))
</span></span></code></pre></div><h3 id=scratch>scratch</h3><p>ä»¥ä¸‹é…ç½®æ¥æºï¼š<a href=https://gitee.com/cxiaoc/emacs.d/blob/master/site-lisp/config/init-scratch.el>site-lisp/config/init-scratch.el Â· xiaoc/emacs.d - Gitee.com</a>.
ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ï¼š<a href=https://github.com/Fanael/persistent-scratch/blob/master/persistent-scratch.el>persistent-scratch/persistent-scratch.el at master Â· Fanael/persistent-scratch</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my-scratch-save ()
</span></span><span style=display:flex><span>  (ignore-errors
</span></span><span style=display:flex><span>    (with-current-buffer <span style=color:#e6db74>&#34;*scratch*&#34;</span>
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>write-region</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34;~/.emacs.d/var/scratch&#34;</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my-scratch-restore ()
</span></span><span style=display:flex><span>  (let ((f <span style=color:#e6db74>&#34;~/.emacs.d/var/scratch&#34;</span>))
</span></span><span style=display:flex><span>    (when (<span style=color:#a6e22e>file-exists-p</span> f)
</span></span><span style=display:flex><span>      (with-current-buffer <span style=color:#e6db74>&#34;*scratch*&#34;</span>
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>erase-buffer</span>)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>insert-file-contents</span> f)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>point-max</span>))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;kill-emacs-hook</span> <span style=color:#a6e22e>#&#39;</span>my-scratch-save)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#a6e22e>#&#39;</span>my-scratch-restore)
</span></span></code></pre></div><h3 id=window-divider-mode>window-divider-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package frame
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (face-spec-set <span style=color:#e6db74>&#39;window-divider</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>                    :foreground <span style=color:#e6db74>&#34;#000000&#34;</span>)
</span></span><span style=display:flex><span>                   (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>                    :foreground <span style=color:#e6db74>&#34;#FFFFFF&#34;</span>))
</span></span><span style=display:flex><span>                 <span style=color:#e6db74>&#39;face-override-spec</span>)
</span></span><span style=display:flex><span>  (setq window-divider-default-bottom-width <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>  (setq window-divider-default-places <span style=color:#e6db74>&#39;bottom-only</span>)
</span></span><span style=display:flex><span>  :hook (after-init <span style=color:#f92672>.</span> window-divider-mode))
</span></span></code></pre></div><h3 id=doc-view>doc-view</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq doc-view-mupdf-use-svg <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq doc-view-imenu-flatten <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq doc-view-continuous <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h3 id=abbrev-mode>abbrev-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default abbrev-mode <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h3 id=bookmark>bookmark</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fm&#34;</span> <span style=color:#e6db74>&#39;bookmark-jump</span>)
</span></span></code></pre></div><h3 id=clipboard>clipboard</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq select-enable-primary <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h3 id=files>files</h3><p><a href=https://emacsredux.com/blog/2022/06/12/auto-create-missing-directories/>Auto-create Missing Directories | Emacs Redux</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/auto-create-missing-dirs ()
</span></span><span style=display:flex><span>  (let ((target-dir (<span style=color:#a6e22e>file-name-directory</span> <span style=color:#a6e22e>buffer-file-name</span>)))
</span></span><span style=display:flex><span>    (unless (<span style=color:#a6e22e>file-exists-p</span> target-dir)
</span></span><span style=display:flex><span>      (make-directory target-dir <span style=color:#66d9ef>t</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;find-file-not-found-functions</span> <span style=color:#a6e22e>#&#39;</span>my/auto-create-missing-dirs)
</span></span></code></pre></div><h2 id=awesome-emacs-equipped-with-third-party-packages>Awesome Emacs Equipped with Third-Party Packages</h2><h3 id=undo>undo</h3><p>Emacs è‡ªå¸¦ undo å’Œ undo-redo åŠŸèƒ½ã€‚è¿™é‡Œä½¿ç”¨äº† <code>undo-fu</code> å’Œ <code>undo-fu-session</code> ä»¥åŠ <code>vundo</code> è¿™ä¸‰ä¸ªåŒ…ã€‚</p><p>Evil æ¨¡å¼ç¼–è¾‘éœ€è¦è®¾ç½® undo system.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package undo-fu)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package undo-fu-session
</span></span><span style=display:flex><span>  :after undo-fu
</span></span><span style=display:flex><span>  :hook (on-first-file <span style=color:#f92672>.</span> undo-fu-session-global-mode))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package vundo
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq vundo-glyph-alist vundo-unicode-symbols)
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;C-x u&#34;</span> <span style=color:#f92672>.</span> vundo))
</span></span></code></pre></div><h3 id=delete>delete</h3><p>å…³äº Emacs ä¸­çš„åˆ é™¤ï¼Œä¸€ä¸ªæ˜¯ <code>delete-selection-mode</code>, <code>hungry-delelte</code> ä»¥åŠæ˜¯å¦ä½¿ç”¨ç³»ç»Ÿåƒåœ¾æ¡¶ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq delete-by-moving-to-trash <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq trash-directory <span style=color:#e6db74>&#34;~/.Trash&#34;</span>)
</span></span></code></pre></div><p><a href=https://github.com/nflath/hungry-delete>nflath/hungry-delete: Enables hungry deletion in all modes.</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package hungry-delete
</span></span><span style=display:flex><span>  :custom
</span></span><span style=display:flex><span>  (hungry-delete-chars-to-skip <span style=color:#e6db74>&#34; \t\n\r\f\v&#34;</span>)
</span></span><span style=display:flex><span>  :hook ((text-mode <span style=color:#f92672>.</span> hungry-delete-mode)
</span></span><span style=display:flex><span>         (prog-mode <span style=color:#f92672>.</span> hungry-delete-mode)
</span></span><span style=display:flex><span>         (org-mode <span style=color:#f92672>.</span> hungry-delete-mode)))
</span></span></code></pre></div><h3 id=gc-buffers>gc-buffers</h3><p>ä½œç”¨æ˜¯è‡ªåŠ¨åˆ é™¤ buffers.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package gc-buffers
</span></span><span style=display:flex><span>  :hook (on-first-buffer <span style=color:#f92672>.</span> gc-buffers-mode))
</span></span></code></pre></div><h3 id=rime>rime</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package rime
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (setq rime-title <span style=color:#e6db74>&#34;ğ‘ &#34;</span>)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq default-input-method <span style=color:#e6db74>&#34;rime&#34;</span>)
</span></span><span style=display:flex><span>  (setq rime-user-data-dir <span style=color:#e6db74>&#34;~/Library/Rime/&#34;</span>)
</span></span><span style=display:flex><span>  (setq rime-emacs-module-header-root <span style=color:#e6db74>&#34;/Applications/Emacs.app/Contents/Resources/include/&#34;</span>)
</span></span><span style=display:flex><span>  (setq rime-librime-root (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;librime/dist&#34;</span> user-emacs-directory))
</span></span><span style=display:flex><span>  (setq rime-show-candidate <span style=color:#e6db74>&#39;minibuffer</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; (setq rime-posframe-properties &#39;(:internal-border-width 0))</span>
</span></span><span style=display:flex><span>  (setq rime-disable-predicates <span style=color:#f92672>&#39;</span>(rime-predicate-prog-in-code-p
</span></span><span style=display:flex><span>                                  rime-predicate-org-in-src-block-p
</span></span><span style=display:flex><span>                                  rime-predicate-org-latex-mode-p
</span></span><span style=display:flex><span>                                  rime-predicate-tex-math-or-command-p))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq rime-inline-predicates <span style=color:#f92672>&#39;</span>(rime-predicate-space-after-cc-p
</span></span><span style=display:flex><span>                                 rime-predicate-after-alphabet-char-p))
</span></span><span style=display:flex><span>  :bind (:map rime-mode-map
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;M-j&#34;</span> <span style=color:#f92672>.</span> rime-force-enable))
</span></span><span style=display:flex><span>  :hook ((evil-insert-state-entry <span style=color:#f92672>.</span> (lambda ()
</span></span><span style=display:flex><span>                                      (if (and (not (rime--should-inline-ascii-p))
</span></span><span style=display:flex><span>                                               (<span style=color:#a6e22e>eq</span> major-mode <span style=color:#e6db74>&#39;org-mode</span>)
</span></span><span style=display:flex><span>                                               (not (org-at-clock-log-p))
</span></span><span style=display:flex><span>                                               (not (org-at-table-p))
</span></span><span style=display:flex><span>                                               (not (org-at-timestamp-p))
</span></span><span style=display:flex><span>                                               (not (and (<span style=color:#a6e22e>bolp</span>) (org-on-heading-p))))
</span></span><span style=display:flex><span>                                          (activate-input-method <span style=color:#e6db74>&#34;rime&#34;</span>))))
</span></span><span style=display:flex><span>         (evil-insert-state-exit <span style=color:#f92672>.</span>  <span style=color:#a6e22e>#&#39;</span>evil-deactivate-input-method)))
</span></span></code></pre></div><p>è¿›è¡Œ Evil çš„ insert çŠ¶æ€æ—¶è‡ªåŠ¨çš„åˆ‡æ¢ä¸­è‹±æ–‡è¾“å…¥æ³•çš„çŠ¶æ€ï¼Œç»“åˆ rime çš„ predicates ä½¿ç”¨ã€‚</p><p><a href=https://github.com/colawithsauce/rime-regexp.el/tree/main/>rime-regexp-mode</a>, é€šè¿‡æ­¤åŒ…å¯ä»¥ä½¿ç”¨è¾“å…¥æ³•è¿›è¡Œæ–‡ä»¶çš„æ£€ç´¢ï¼Œè‹¥ä½¿ç”¨æ‹¼éŸ³è¾“å…¥æ³•åˆ™å¯ä»¥é€šè¿‡æ‹¼éŸ³è¿›è¡Œæ–‡ä»¶åçš„æ£€ç´¢ã€‚æˆ‘ä½¿ç”¨ä¸‰éƒ‘è¾“å…¥æ³•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å½¢ç è¿›è¡Œæ£€ç´¢ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package rime-regexp
</span></span><span style=display:flex><span>  :hook (on-first-input <span style=color:#f92672>.</span> rime-regexp-mode))
</span></span></code></pre></div><h3 id=helpful>helpful</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package helpful
</span></span><span style=display:flex><span>  :commands helpful-update
</span></span><span style=display:flex><span>  :bind (([remap describe-function] <span style=color:#f92672>.</span> helpful-callable)
</span></span><span style=display:flex><span>         ([remap describe-variable] <span style=color:#f92672>.</span> helpful-variable)
</span></span><span style=display:flex><span>         ([remap describe-key] <span style=color:#f92672>.</span> helpful-key))
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (setq help-window-select <span style=color:#e6db74>&#39;always</span>)
</span></span><span style=display:flex><span>  (setq help-window-keep-selected <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>&#39;</span>((or (derived-mode <span style=color:#f92672>.</span> help-mode)
</span></span><span style=display:flex><span>                     (derived-mode <span style=color:#f92672>.</span> helpful-mode))
</span></span><span style=display:flex><span>                 (display-buffer-reuse-mode-window display-buffer-in-side-window)
</span></span><span style=display:flex><span>                 (window-width <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.5</span>)
</span></span><span style=display:flex><span>                 (side <span style=color:#f92672>.</span> right)
</span></span><span style=display:flex><span>                 (slot <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>))))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:#a6e22e>autoload</span> <span style=color:#a6e22e>#&#39;</span>elisp-demos-advice-helpful-update <span style=color:#e6db74>&#34;elisp-demos&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(advice-add <span style=color:#e6db74>&#39;helpful-update</span> :after <span style=color:#a6e22e>#&#39;</span>elisp-demos-advice-helpful-update)
</span></span></code></pre></div><h3 id=expand-region>expand-region</h3><p>è¿™ä¸ªç”¨äºæ‰©å±•é€‰åŒºï¼Œæœ‰æ—¶å€™æ¯” Evil çš„ Visual å¥½ç”¨ã€‚æœ€æ–°çš„é…ç½®ä¸­å·±ç»ä½¿ç”¨ <code>v</code> æ›¿ä»£äº† <code>C-=</code> è¿™ä¸ªå¿«æ·é”®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package expand-region
</span></span><span style=display:flex><span>  :after evil
</span></span><span style=display:flex><span>  :bind ((<span style=color:#e6db74>&#34;C-=&#34;</span> <span style=color:#f92672>.</span> er/expand-region)
</span></span><span style=display:flex><span>         (:map evil-visual-state-map
</span></span><span style=display:flex><span>               (<span style=color:#e6db74>&#34;v&#34;</span> <span style=color:#f92672>.</span> er/expand-region))))
</span></span></code></pre></div><h3 id=ctrlf>ctrlf</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ctrlf
</span></span><span style=display:flex><span>  :after evil
</span></span><span style=display:flex><span>  :hook (on-first-buffer <span style=color:#f92672>.</span> ctrlf-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (evil-global-set-key <span style=color:#e6db74>&#39;normal</span> (kbd <span style=color:#e6db74>&#34;/&#34;</span>) <span style=color:#e6db74>&#39;ctrlf-forward-default</span>))
</span></span></code></pre></div><h3 id=avy>avy</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;g&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Goto&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;gc&#34;</span> <span style=color:#f92672>&#39;</span>(avy-goto-char :wk <span style=color:#e6db74>&#34;Goto Char&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;gC&#34;</span> <span style=color:#f92672>&#39;</span>(avy-goto-char-2 :wk <span style=color:#e6db74>&#34;Goto Char 2&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;gl&#34;</span> <span style=color:#f92672>&#39;</span>(avy-goto-line :wk <span style=color:#e6db74>&#34;Goto Line&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;gw&#34;</span> <span style=color:#f92672>&#39;</span>(avy-goto-word-0 :wk <span style=color:#e6db74>&#34;Goto Line&#34;</span>))
</span></span></code></pre></div><h3 id=whitespace-cleanup-mode>whitespace-cleanup-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package whitespace-cleanup-mode
</span></span><span style=display:flex><span>  :hook (on-first-file <span style=color:#f92672>.</span> whitespace-cleanup-mode))
</span></span></code></pre></div><h3 id=elisp-demos>elisp-demos</h3><p><a href=https://github.com/xuchunyang/elisp-demos>xuchunyang/elisp-demos: Demonstrate Emacs Lisp APIs</a> ç”¨äºæŸ¥æŸ¥å‡½æ•°çš„ç”¨æ³•å¾ˆæ–¹ä¾¿ã€‚</p><h3 id=tempel>tempel</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package tempel
</span></span><span style=display:flex><span>  :bind ((<span style=color:#e6db74>&#34;M-+&#34;</span> <span style=color:#f92672>.</span> tempel-complete)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;M-*&#34;</span> <span style=color:#f92672>.</span> tempel-insert))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq tempel-path <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;~/.emacs.d/template/tempel&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;template/tempel&#34;</span> my-galaxy))))
</span></span></code></pre></div><h3 id=yasnippet>yasnippet</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package yasnippet
</span></span><span style=display:flex><span>  :hook (on-first-file <span style=color:#f92672>.</span> yas-global-mode))
</span></span><span style=display:flex><span>(use-package yasnippet-snippets
</span></span><span style=display:flex><span>  :after yasnippet)
</span></span></code></pre></div><h3 id=rg>rg</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package rg
</span></span><span style=display:flex><span>  :hook (on-first-input <span style=color:#f92672>.</span> rg-enable-default-bindings)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq rg-group-result <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq rg-show-columns <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><h3 id=minibuffer-and-completion>Minibuffer and completion</h3><h4 id=minibuffer>minibuffer</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq read-buffer-completion-ignore-case <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq completion-ignore-case <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq minibuffer-prompt-properties
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>(read-only <span style=color:#66d9ef>t</span> cursor-intangible <span style=color:#66d9ef>t</span> face <span style=color:#a6e22e>minibuffer-prompt</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package simple
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq-default read-extended-command-predicate <span style=color:#a6e22e>#&#39;</span>command-completion-default-include-p))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package minibuffer
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq completion-category-overrides <span style=color:#f92672>&#39;</span>((file (styles basic partial-completion))))
</span></span><span style=display:flex><span>  (setq read-file-name-completion-ignore-case <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq-local completion-in-region-function
</span></span><span style=display:flex><span>              (lambda (<span style=color:#66d9ef>&amp;rest</span> args)
</span></span><span style=display:flex><span>                (<span style=color:#a6e22e>apply</span> (if vertico-mode
</span></span><span style=display:flex><span>                           <span style=color:#a6e22e>#&#39;</span>consult-completion-in-region
</span></span><span style=display:flex><span>                         <span style=color:#a6e22e>#&#39;</span>completion--in-region)
</span></span><span style=display:flex><span>                       args))))
</span></span></code></pre></div><h4 id=orderless>orderless</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq tab-always-indent <span style=color:#e6db74>&#39;complete</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package orderless
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq completion-styles <span style=color:#f92672>&#39;</span>(orderless partial-completion)))
</span></span></code></pre></div><h4 id=vertico>vertico</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package vertico
</span></span><span style=display:flex><span>  :load-path <span style=color:#e6db74>&#34;~/.emacs.d/packages/vertico&#34;</span>
</span></span><span style=display:flex><span>  :hook (after-init <span style=color:#f92672>.</span> vertico-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq vertico-cycle <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  :bind (:map vertico-map
</span></span><span style=display:flex><span>      (<span style=color:#e6db74>&#34;C-j&#34;</span> <span style=color:#f92672>.</span> vertico-next)
</span></span><span style=display:flex><span>      (<span style=color:#e6db74>&#34;C-k&#34;</span> <span style=color:#f92672>.</span> vertico-previous)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package vertico-directory
</span></span><span style=display:flex><span>  :after vertico
</span></span><span style=display:flex><span>  :bind (:map vertico-map
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;C-u&#34;</span> <span style=color:#f92672>.</span> vertico-directory-up)))
</span></span></code></pre></div><h4 id=marginalia>marginalia</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package marginalia
</span></span><span style=display:flex><span>  :hook ((minibuffer-setup <span style=color:#f92672>.</span> marginalia-mode)))
</span></span></code></pre></div><h4 id=embark>embark</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package embark
</span></span><span style=display:flex><span>  :bind ((<span style=color:#e6db74>&#34;C-.&#34;</span> <span style=color:#f92672>.</span> embark-act)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;M-.&#34;</span> <span style=color:#f92672>.</span> embark-dwim)
</span></span><span style=display:flex><span>         (:map vertico-map
</span></span><span style=display:flex><span>               (<span style=color:#e6db74>&#34;C-c C-o&#34;</span> <span style=color:#f92672>.</span> embark-export)
</span></span><span style=display:flex><span>               (<span style=color:#e6db74>&#34;C-c C-c&#34;</span> <span style=color:#f92672>.</span> embark-act)))
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (setq prefix-help-command <span style=color:#a6e22e>#&#39;</span>embark-prefix-help-command)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\`\\*Embark Collect \\(Live\\|Completions\\)\\*&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>                 (<span style=color:#a6e22e>window-parameters</span> (mode-line-format <span style=color:#f92672>.</span> none)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fe&#34;</span> <span style=color:#f92672>&#39;</span>(embark-open-externally :wk <span style=color:#e6db74>&#34;Open externally&#34;</span>))
</span></span></code></pre></div><h4 id=consult>consult</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package consult
</span></span><span style=display:flex><span>  :commands consult-outline
</span></span><span style=display:flex><span>  :hook (completion-list-mode <span style=color:#f92672>.</span> consult-preview-at-point-mode)
</span></span><span style=display:flex><span>  :bind (([remap apropos] <span style=color:#f92672>.</span> consult-apropos)
</span></span><span style=display:flex><span>         ([remap bookmark-jump] <span style=color:#f92672>.</span> consult-bookmark)
</span></span><span style=display:flex><span>         ([remap goto-line] <span style=color:#f92672>.</span> consult-goto-line)
</span></span><span style=display:flex><span>         ([remap imenu] <span style=color:#f92672>.</span> consult-imenu)
</span></span><span style=display:flex><span>         ([remap locate] <span style=color:#f92672>.</span> consult-locate)
</span></span><span style=display:flex><span>         ([remap load-theme] <span style=color:#f92672>.</span> consult-theme)
</span></span><span style=display:flex><span>         ([remap man] <span style=color:#f92672>.</span> consult-man)
</span></span><span style=display:flex><span>         ([remap recentf-open-files] <span style=color:#f92672>.</span> consult-recent-file)
</span></span><span style=display:flex><span>         ([remap switch-to-buffer] <span style=color:#f92672>.</span> consult-buffer)
</span></span><span style=display:flex><span>         ([remap switch-to-buffer-other-window] <span style=color:#f92672>.</span> consult-buffer-other-window)
</span></span><span style=display:flex><span>         ([remap switch-to-buffer-other-frame] <span style=color:#f92672>.</span> consult-buffer-other-frame)
</span></span><span style=display:flex><span>         ([remap yank-pop] <span style=color:#f92672>.</span> consult-yank-pop)
</span></span><span style=display:flex><span>         :map minibuffer-mode-map
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-r&#34;</span> <span style=color:#f92672>.</span> consult-history)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil</span>
</span></span><span style=display:flex><span>  (evil-declare-key <span style=color:#e6db74>&#39;normal</span> org-mode-map
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gh&#34;</span> <span style=color:#e6db74>&#39;consult-outline</span>)
</span></span><span style=display:flex><span>  (evil-declare-key <span style=color:#e6db74>&#39;normal</span> LaTeX-mode-map
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gh&#34;</span> <span style=color:#e6db74>&#39;consult-outline</span>))
</span></span></code></pre></div><h4 id=corfu>corfu</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package corfu
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq corfu-cycle <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq corfu-auto <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq corfu-auto-prefix <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>  (setq corfu-auto-delay <span style=color:#ae81ff>0.0</span>)
</span></span><span style=display:flex><span>  (setq corfu-preselect <span style=color:#e6db74>&#39;valid</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq-default corfu-quit-no-match <span style=color:#e6db74>&#39;separator</span>)
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (defun corfu-enable-always-in-minibuffer ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Enable Corfu in the minibuffer if Vertico/Mct are not active.&#34;</span>
</span></span><span style=display:flex><span>  (unless (or (bound-and-true-p mct--active)
</span></span><span style=display:flex><span>              (bound-and-true-p vertico--input)
</span></span><span style=display:flex><span>              (<span style=color:#a6e22e>eq</span> (<span style=color:#a6e22e>current-local-map</span>) read-passwd-map))
</span></span><span style=display:flex><span>    (setq-local corfu-auto <span style=color:#66d9ef>nil</span>) <span style=color:#75715e>;; Enable/disable auto completion</span>
</span></span><span style=display:flex><span>    (setq-local corfu-echo-delay <span style=color:#66d9ef>nil</span> <span style=color:#75715e>;; Disable automatic echo and popup</span>
</span></span><span style=display:flex><span>                corfu-popupinfo-delay <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>    (corfu-mode <span style=color:#ae81ff>1</span>)))
</span></span><span style=display:flex><span>  :hook ((on-first-buffer <span style=color:#f92672>.</span> global-corfu-mode)
</span></span><span style=display:flex><span>         (eshell-mode-hook <span style=color:#f92672>.</span> (lambda ()
</span></span><span style=display:flex><span>                               (setq-local corfu-quit-at-boundary <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>                                           corfu-quit-no-match <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>                                           corfu-auto <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>                               (corfu-mode)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package corfu-echo
</span></span><span style=display:flex><span>  :hook (corfu-mode <span style=color:#f92672>.</span> corfu-echo-mode))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package corfu-popupinfo
</span></span><span style=display:flex><span>  :hook (corfu-mode <span style=color:#f92672>.</span> corfu-popupinfo-mode))
</span></span></code></pre></div><h4 id=kind-icon>kind-icon</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package kind-icon
</span></span><span style=display:flex><span>  :after corfu
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq kind-icon-use-icons <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq kind-icon-default-face <span style=color:#e6db74>&#39;corfu-default</span>)
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;corfu-margin-formatters</span> <span style=color:#a6e22e>#&#39;</span>kind-icon-margin-formatter))
</span></span></code></pre></div><h4 id=cape>cape</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package cape
</span></span><span style=display:flex><span>  :bind ((<span style=color:#e6db74>&#34;C-c p p&#34;</span> <span style=color:#f92672>.</span> completion-at-point) <span style=color:#75715e>;; capf</span>
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p t&#34;</span> <span style=color:#f92672>.</span> complete-tag)        <span style=color:#75715e>;; etags</span>
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p d&#34;</span> <span style=color:#f92672>.</span> cape-dabbrev)        <span style=color:#75715e>;; or dabbrev-completion</span>
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p h&#34;</span> <span style=color:#f92672>.</span> cape-history)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p f&#34;</span> <span style=color:#f92672>.</span> cape-file)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p k&#34;</span> <span style=color:#f92672>.</span> cape-keyword)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p s&#34;</span> <span style=color:#f92672>.</span> cape-symbol)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p a&#34;</span> <span style=color:#f92672>.</span> cape-abbrev)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p i&#34;</span> <span style=color:#f92672>.</span> cape-ispell)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p l&#34;</span> <span style=color:#f92672>.</span> cape-line)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p w&#34;</span> <span style=color:#f92672>.</span> cape-dict)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p \\&#34;</span> <span style=color:#f92672>.</span> cape-tex)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p _&#34;</span> <span style=color:#f92672>.</span> cape-tex)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p ^&#34;</span> <span style=color:#f92672>.</span> cape-tex)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p &amp;&#34;</span> <span style=color:#f92672>.</span> cape-sgml)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c p r&#34;</span> <span style=color:#f92672>.</span> cape-rfc1345))
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;completion-at-point-functions</span> <span style=color:#a6e22e>#&#39;</span>cape-dabbrev)
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;completion-at-point-functions</span> <span style=color:#a6e22e>#&#39;</span>cape-file)
</span></span><span style=display:flex><span>  <span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-history)</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-keyword)</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-tex)</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-sgml)</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-rfc1345)</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-abbrev)</span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;completion-at-point-functions</span> <span style=color:#a6e22e>#&#39;</span>cape-ispell)
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;completion-at-point-functions</span> <span style=color:#a6e22e>#&#39;</span>cape-dict)
</span></span><span style=display:flex><span>  <span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-symbol)</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-line)</span>
</span></span><span style=display:flex><span>  )
</span></span></code></pre></div><p><a href=https://github.com/SystemCrafters/crafted-emacs/blob/master/modules/crafted-completion.el>crafted-emacs/crafted-completion.el at master Â· SystemCrafters/crafted-emacs</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; Ensure that pcomplete does not write to the buffer</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; and behaves as a pure `completion-at-point-function&#39;.</span>
</span></span><span style=display:flex><span>(advice-add <span style=color:#e6db74>&#39;pcomplete-completions-at-point</span> :around <span style=color:#a6e22e>#&#39;</span>cape-wrap-purify)
</span></span></code></pre></div><h4 id=prescient>prescient</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:#a6e22e>autoload</span> <span style=color:#e6db74>&#39;prescient-persist-mode</span> <span style=color:#e6db74>&#34;prescient&#34;</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#e6db74>&#39;prescient-persist-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package vertico-prescient
</span></span><span style=display:flex><span>  :hook (vertico-mode <span style=color:#f92672>.</span> vertico-prescient-mode))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package corfu-prescient
</span></span><span style=display:flex><span>  :hook (corfu-mode <span style=color:#f92672>.</span> corfu-prescient-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq vertico-prescient-completion-styles <span style=color:#f92672>&#39;</span>(orderless prescient partial-completion)))
</span></span></code></pre></div><h2 id=misc>Misc</h2><h3 id=gcmh>gcmh</h3><p>Emacs çš„æ‹‰åœ¾å›æ”¶å¤ªå½±å“æ€§èƒ½ï¼Œæ­¤åŒ…çš„ä½œç”¨æ˜¯å½“ Emacs å¤„äº idle çŠ¶æ€æ—¶è¿›è¡Œæ‹‰åœ¾å›æ”¶ï¼Œæ­£å¸¸ä½¿ç”¨çš„æ—¶å€™è®¾ç½®ä¸€ä¸ªè¾ƒé«˜çš„é˜ˆå€¼ï¼Œé™ä½åƒåœ¾å›æ”¶ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package gcmh
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq gcmh-idle-delay <span style=color:#e6db74>&#39;auto</span>)
</span></span><span style=display:flex><span>  (setq gcmh-auto-idle-delay-factor <span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>  (setq gcmh-high-cons-threshold <span style=color:#ae81ff>#x1000000</span>)
</span></span><span style=display:flex><span>  :hook (after-init <span style=color:#f92672>.</span> gcmh-mode))
</span></span></code></pre></div><h3 id=file-info>file-info</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package file-info
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;C-c f i&#34;</span> <span style=color:#f92672>.</span> file-info-show)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq hydra-hint-display-type <span style=color:#e6db74>&#39;posframe</span>)
</span></span><span style=display:flex><span>  (setq hydra-posframe-show-params <span style=color:#f92672>`</span>(:poshandler posframe-poshandler-frame-center
</span></span><span style=display:flex><span>                                                 :internal-border-width <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>                                                 :internal-border-color <span style=color:#e6db74>&#34;#61AFEF&#34;</span>
</span></span><span style=display:flex><span>                                                 :left-fringe <span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>                                                 :right-fringe <span style=color:#ae81ff>16</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (my/space-leader-def
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fs&#34;</span> <span style=color:#f92672>&#39;</span>(file-info-show :wk <span style=color:#e6db74>&#34;File info&#34;</span>)))
</span></span></code></pre></div><h3 id=disk-usage>disk-usage</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package disk-usage
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;C-c d u&#34;</span> <span style=color:#f92672>.</span> disk-usage))
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Disk&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;du&#34;</span> <span style=color:#f92672>&#39;</span>(disk-usage :wk <span style=color:#e6db74>&#34;usage&#34;</span>))
</span></span></code></pre></div><h3 id=youtube-dl>youtube-dl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package youtube-dl
</span></span><span style=display:flex><span>  :commands youtube-dl
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq youtube-dl-directory <span style=color:#e6db74>&#34;~/Downloads/&#34;</span>)
</span></span><span style=display:flex><span>  (setq youtube-dl-program <span style=color:#e6db74>&#34;/opt/homebrew/bin/youtube-dl&#34;</span>)
</span></span><span style=display:flex><span>  (setq youtube-dl-arguments
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;--no-mtime&#34;</span> <span style=color:#e6db74>&#34;--restrict-filenames&#34;</span> <span style=color:#e6db74>&#34;--format&#34;</span> <span style=color:#e6db74>&#34;best&#34;</span> <span style=color:#e6db74>&#34;--mark-watched&#34;</span>)))
</span></span></code></pre></div><h3 id=ocr>OCR</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/ocr ()
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;OCR with Macos system.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (shell-command <span style=color:#e6db74>&#34;shortcuts run \&#34;OCR Selected Area\&#34;&#34;</span>)
</span></span><span style=display:flex><span>  (do-applescript <span style=color:#e6db74>&#34;tell application id \&#34;org.gnu.Emacs\&#34; to activate&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;o&#34;</span> <span style=color:#f92672>&#39;</span>(my/ocr :wk <span style=color:#e6db74>&#34;OCR&#34;</span>))
</span></span></code></pre></div><h3 id=proxy>proxy</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun toggle-proxy ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Toggle proxy for the url.el library.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (if url-proxy-services
</span></span><span style=display:flex><span>      (proxy-disable)
</span></span><span style=display:flex><span>    (proxy-enable)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun proxy-enable ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Enable proxy.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (setq url-proxy-services
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;http&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;127.0.0.1:8118&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;https&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;127.0.0.1:8118&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;socks&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;127.0.0.1:8118&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;no_proxy&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;0.0.0.0&#34;</span>)))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Proxy enabled! %s&#34;</span> (<span style=color:#a6e22e>car</span> url-proxy-services)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun proxy-disable ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Disable proxy.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (if url-proxy-services
</span></span><span style=display:flex><span>      (setq url-proxy-services <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Proxy disabled!&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(run-with-idle-timer <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>nil</span> (lambda ()
</span></span><span style=display:flex><span>                             (proxy-enable)))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#f92672>&#39;</span>(toggle-proxy :wk <span style=color:#e6db74>&#34;Proxy&#34;</span>))
</span></span></code></pre></div><h2 id=emacs-works-with-multiple-language-piece-of-cake>Emacs Works with Multiple Language, Piece of Cake</h2><p>Emacs åœ¨è‹±æ–‡çš„å­¦ä¹ ã€ä½¿ç”¨æ–¹é¢å…·æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚</p><p>ä½¿ç”¨ Emacs å†™æ–‡æ¡£å¯ä»¥è‡ªåŠ¨æ£€æŸ¥æ‹¼å†™ï¼Œéœ€è¦ç”¨åˆ°çš„æœ‰ <code>ispell</code>, <code>flyspell</code> æˆ–è€… <code>wucuo-mode</code>. å¯¹äºå…·æœ‰é”™è¯¯çš„å•è¯ä¼šæœ‰ä¸‹åˆ’çº¿æç¤ºï¼Œä½¿ç”¨ <code>flyspell-correct</code> è¿›è¡Œä¿®æ­£ã€‚</p><p>å¯¹äºä¸è®¤è¯†çš„å•è¯å¯ä»¥ä½¿ç”¨ <code>sdcv</code> æˆ–è€… <code>osx-dictionary</code> æŸ¥è¯¢ï¼Œå¯¹äºè¯»ä¸æ‡‚çš„å•è¯å¯ä»¥ä½¿ç”¨ <code>go-translate</code> æˆ–è€… <code>lingva</code> æˆ–è€… <code>google-translate</code> è¿›è¡Œä¸­è‹±æ–‡çš„äº’è¯‘ã€‚å½“ç„¶å…¶ä»–çš„è¯­è¨€ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>æ­¤å¤–è¿˜å¯ä»¥ä½¿ç”¨ dictionary-overlay ç›´æ¥æ¸²æŸ“æ•´ä¸ª buffer, ä¸è®¤è¯†çš„å•è¯ä¼šç›´æ¥æ˜¾ç¤ºä¸­æ–‡æ„æ€ã€‚è¿™ä¸ªåŠŸèƒ½ç»“åˆ <code>eww</code> æˆ–è€… <code>elfeed</code> é˜…è¯»ç½‘é¡µçš„æ—¶å€™ä½¿ç”¨ã€‚</p><p>å½“ä¸çŸ¥é“è‹±æ–‡å•è¯æ€ä¹ˆå†™æ—¶å¯ä»¥ä½¿ç”¨ <code>lsp-bridge-toggle-sdcv-helper</code>, é€šè¿‡è¾“å…¥æ‹¼éŸ³æ¥è¾“å…¥è‹±è¯­å•è¯ã€‚å¯¹äºæƒ³è¦æŸ¥è¯¢è¿‘æ„è¯ç­‰æ—¶å¯ä»¥ä½¿ç”¨ <code>powerthesaurus-lookup-dwim</code> æ¥æŸ¥æ‰¾ã€‚</p><p>å­¦ä¹ è‹±è¯­å•è¯è¿˜å¯ä»¥ç»“åˆ <a href=https://gitlab.com/phillord/org-drill>org-drll</a> æˆ–è€… <a href=https://github.com/eyeinsky/org-anki>org-anki</a> è¿›è¡Œï¼Œè¿™é‡Œä½¿ç”¨åˆ°çš„æ¦‚å¿µæ˜¯ <a href=https://en.wikipedia.org/wiki/Forgetting_curve>Forgetting curve</a>.</p><h3 id=ispell>Ispell</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ispell
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq ispell-program-name <span style=color:#e6db74>&#34;/opt/homebrew/bin/aspell&#34;</span>)
</span></span><span style=display:flex><span>  (setq ispell-extra-args <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;--sug-mode=ultra&#34;</span> <span style=color:#e6db74>&#34;--lang=en_US&#34;</span> <span style=color:#e6db74>&#34;--run-together&#34;</span>))
</span></span><span style=display:flex><span>  (setq ispell-aspell-dict-dir
</span></span><span style=display:flex><span>        (ispell-get-aspell-config-value <span style=color:#e6db74>&#34;dict-dir&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq ispell-aspell-data-dir
</span></span><span style=display:flex><span>        (ispell-get-aspell-config-value <span style=color:#e6db74>&#34;data-dir&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq ispell-personal-dictionary (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;config/ispell/.aspell.en.pws&#34;</span> my-galaxy))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq-default ispell-following-word <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>                ispell-quietly <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><p>è¿™é‡Œä½¿ç”¨äº†<a href=https://github.com/cask/shut-up>cask/shut-up: Emacs, shut up would you!</a> æ¥å…³é—­ä¸€äº›é”™è¯¯æç¤ºã€‚è™½ç„¶å…¶åªæ˜¯æ˜¾ç¤ºåœ¨ Message buffer å½“ä¸­ï¼Œä½†æ˜¯çœ‹èµ·æ¥è¿˜æ˜¯å¾ˆä¸çˆ½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; Suppress start looking process.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; https://github.com/company-mode/company-mode/issues/912</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; shut-up</span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;ispell</span>
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;ispell-lookup-words</span> :around
</span></span><span style=display:flex><span>              (lambda (orig <span style=color:#66d9ef>&amp;rest</span> args)
</span></span><span style=display:flex><span>                (shut-up (<span style=color:#a6e22e>apply</span> orig args)))))
</span></span></code></pre></div><h3 id=flyspell>flyspell</h3><p>Wucuo åœ¨æŸä¸ªç‰ˆæœ¬æœ‰æç¤º warning, ä¸çŸ¥é“äº§ç”Ÿçš„åŸå› æ˜¯ä»€ä¹ˆã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package flyspell
</span></span><span style=display:flex><span>  :hook (org-mode <span style=color:#f92672>.</span> flyspell-mode))
</span></span></code></pre></div><h3 id=flyspell-correct>flyspell-correct</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package flyspell-correct
</span></span><span style=display:flex><span>  :commands flyspell-correct-wrapper
</span></span><span style=display:flex><span>  :bind ([remap flyspell-auto-correct-previous-word] <span style=color:#f92672>.</span> flyspell-correct-wrapper))
</span></span></code></pre></div><h3 id=langtool>langtool</h3><p>MacOS ä¸Šä½¿ç”¨éœ€è¦å®‰è£… languagetool.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package langtool
</span></span><span style=display:flex><span>  :commands langtool-check-buffer
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq langtool-http-server-host <span style=color:#e6db74>&#34;localhost&#34;</span>)
</span></span><span style=display:flex><span>  (setq langtool-http-server-port <span style=color:#ae81ff>8081</span>)
</span></span><span style=display:flex><span>  (setq langtool-autoshow-message-function <span style=color:#a6e22e>#&#39;</span>langtool-popup-autoshow))
</span></span></code></pre></div><h3 id=dictionary>dictionary</h3><p>Emacs å†…ç½®äº† dictionaryï¼Œé»˜è®¤æ˜¯æŸ¥è¯¢çš„ dict.orgã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;^\\*Dictionary\\*&#34;</span>
</span></span><span style=display:flex><span>               (display-buffer-in-side-window)
</span></span><span style=display:flex><span>               (side <span style=color:#f92672>.</span> right)
</span></span><span style=display:flex><span>               (window-width <span style=color:#f92672>.</span> <span style=color:#ae81ff>70</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-#&#34;</span>) <span style=color:#e6db74>&#39;dictionary-lookup-definition</span>)
</span></span></code></pre></div><h3 id=go-translate>go-translate</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package go-translate
</span></span><span style=display:flex><span>  :commands gts-do-translate
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq gts-buffer-follow-p <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq gts-translate-list <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;en&#34;</span> <span style=color:#e6db74>&#34;zh&#34;</span>)))
</span></span><span style=display:flex><span>  (setq gts-default-translator (gts-translator
</span></span><span style=display:flex><span>                                :picker (gts-noprompt-picker)
</span></span><span style=display:flex><span>                                :engines (<span style=color:#a6e22e>list</span>
</span></span><span style=display:flex><span>                                          (gts-google-engine :parser (gts-google-summary-parser)))
</span></span><span style=display:flex><span>                                :render (gts-buffer-render))))
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;l&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Language&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;ll&#34;</span> <span style=color:#f92672>&#39;</span>(gts-do-translate :wk <span style=color:#e6db74>&#34;Translate&#34;</span>))
</span></span></code></pre></div><h3 id=lingva>lingva</h3><p>go-translate çš„å¤‡ç”¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package lingva
</span></span><span style=display:flex><span>  :commands lingva-translate
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq lingva-target <span style=color:#e6db74>&#34;zh&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;lL&#34;</span> <span style=color:#f92672>&#39;</span>(lingva-translate :wk <span style=color:#e6db74>&#34;Lingva&#34;</span>))
</span></span></code></pre></div><h3 id=sdcv>sdcv</h3><p>æ­¤ sdcv æ¥è‡ª <a href=https://github.com/manateelazycat/sdcv/tree/master/>manateelazycat/sdcv: Emacs interface for sdcv (Stardict console version)</a> è€Œä¸æ˜¯ Melpa ä¸Šçš„ã€‚</p><p>å…³äº sdcv çš„è¯å…¸å¯ä»¥å»è¿™ä¸‹è½½ï¼š<a href=http://download.huzheng.org/dict.org/>dictd-www.dict.org Dictionaries</a></p><p>é»˜è®¤çš„é¢œè‰²ä¸å–œæ¬¢å¯ä»¥é€šè¿‡ <code>face-spec-set</code> å‡½æ•°è¿›è¡Œè®¾ç½®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package sdcv
</span></span><span style=display:flex><span>  :commands sdcv-search-pointer sdcv-search-input+
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (face-spec-set <span style=color:#e6db74>&#39;sdcv-tooltip-face</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>                    :foreground <span style=color:#e6db74>&#34;#000000&#34;</span> :background <span style=color:#e6db74>&#34;#ffffff&#34;</span>)
</span></span><span style=display:flex><span>                   (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>                    :foreground <span style=color:#e6db74>&#34;#ffffff&#34;</span> :background <span style=color:#e6db74>&#34;#000000&#34;</span>))
</span></span><span style=display:flex><span>                 <span style=color:#e6db74>&#39;face-override-spec</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq sdcv-tooltip-border-width <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>  (setq sdcv-dictionary-data-dir (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;sdcv-dict&#34;</span> user-emacs-directory))
</span></span><span style=display:flex><span>  (setq sdcv-program <span style=color:#e6db74>&#34;/opt/homebrew/bin/sdcv&#34;</span>)
</span></span><span style=display:flex><span>  (setq sdcv-dictionary-simple-list    <span style=color:#75715e>;æ˜Ÿé™…è¯‘ç‹å±å¹•å–è¯è¯å…¸, ç®€å•, å¿«é€Ÿ</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;æ‡’è™«ç®€æ˜è‹±æ±‰è¯å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;æ‡’è™«ç®€æ˜æ±‰è‹±è¯å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;KDic11ä¸‡è‹±æ±‰è¯å…¸&#34;</span>))
</span></span><span style=display:flex><span>  (setq sdcv-dictionary-complete-list     <span style=color:#75715e>;æ˜Ÿé™…è¯‘ç‹çš„è¯å…¸, å®Œå…¨, è¯¦ç»†</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;ç‰›æ´¥è‹±æ±‰åŒè§£ç¾åŒ–ç‰ˆ&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;æ‡’è™«ç®€æ˜è‹±æ±‰è¯å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;è‹±æ±‰æ±‰è‹±ä¸“ä¸šè¯å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;XDICTè‹±æ±‰è¾å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;stardict1.3è‹±æ±‰è¾å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;WordNet&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;XDICTæ±‰è‹±è¾å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;Jargon&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;æ‡’è™«ç®€æ˜æ±‰è‹±è¯å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;FOLDOC&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;æ–°ä¸–çºªè‹±æ±‰ç§‘æŠ€å¤§è¯å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;KDic11ä¸‡è‹±æ±‰è¯å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;æœ—é“æ±‰è‹±å­—å…¸5.0&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;CDICT5è‹±æ±‰è¾å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;æ–°ä¸–çºªæ±‰è‹±ç§‘æŠ€å¤§è¯å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;21ä¸–çºªåŒè¯­ç§‘æŠ€è¯å…¸&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;quick_eng-zh_CN&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;lp&#34;</span> <span style=color:#f92672>&#39;</span>(sdcv-search-pointer :wk <span style=color:#e6db74>&#34;SDCV Point&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;li&#34;</span> <span style=color:#f92672>&#39;</span>(sdcv-search-input+ :wk <span style=color:#e6db74>&#34;SDCV Input&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil-collection</span>
</span></span><span style=display:flex><span>  (evil-collection-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;sdcv-mode-map</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;q&#34;</span> <span style=color:#e6db74>&#39;quit-window</span>))
</span></span></code></pre></div><h3 id=osx-dictionary>osx-dictionary</h3><p><a href=https://github.com/xuchunyang/osx-dictionary.el>xuchunyang/osx-dictionary.el: Mac OS X Dictionary.app interface for Emacs</a></p><p>è¿™ä¸ªæ˜¯ä½¿ç”¨ MacOS ä¸Šè‡ªå¸¦çš„ dictionary è¿›è¡Œå•è¯çš„æŸ¥è¯¢ï¼Œéœ€è¦è®© dictionary åå°è¿è¡Œï¼Œå¦åˆ™æ— ç»“æœæ˜¾ç¤ºã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package osx-dictionary
</span></span><span style=display:flex><span>  :commands osx-dictionary-search-pointer)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ld&#34;</span> <span style=color:#f92672>&#39;</span>(osx-dictionary-search-pointer :wk <span style=color:#e6db74>&#34;OSX dictionary&#34;</span>))
</span></span></code></pre></div><h3 id=powerthesaurus>powerthesaurus</h3><p>è¿™ä¸ªçš„å¥½å¤„æ˜¯å¯ä»¥ç”¨äºæŸ¥è¯¢åŒä¹‰è¯ã€åä¹‰è¯ç­‰ç­‰ï¼Œç”¨äºæ›¿æ¢å•è¯æ¯”è¾ƒæ–¹ä¾¿ã€‚</p><p>éœ€è¦å®æ—¶åœ¨çº¿æŸ¥è¯¢ï¼Œæœ‰æ—¶å€™ç»“æœè¿”å›çš„è¾ƒæ…¢ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package powerthesaurus
</span></span><span style=display:flex><span>  :commands (powerthesaurus-lookup-dwim
</span></span><span style=display:flex><span>             powerthesaurus-lookup-related-dwim
</span></span><span style=display:flex><span>             powerthesaurus-lookup-synonyms-dwim
</span></span><span style=display:flex><span>             powerthesaurus-lookup-antonyms-dwim
</span></span><span style=display:flex><span>             powerthesaurus-lookup-definitions-dwim
</span></span><span style=display:flex><span>             powerthesaurus-lookup-sentences-dwim))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ls&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;synosaurus&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;lsl&#34;</span> <span style=color:#f92672>&#39;</span>(powerthesaurus-lookup-dwim :wk <span style=color:#e6db74>&#34;Dwim&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;lsr&#34;</span> <span style=color:#f92672>&#39;</span>(powerthesaurus-lookup-related-dwim :wk <span style=color:#e6db74>&#34;Related&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;lss&#34;</span> <span style=color:#f92672>&#39;</span>(powerthesaurus-lookup-synonyms-dwim :wk <span style=color:#e6db74>&#34;Synonyms&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;lsa&#34;</span> <span style=color:#f92672>&#39;</span>(powerthesaurus-lookup-antonyms-dwim :wk <span style=color:#e6db74>&#34;Antonyms&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;lsd&#34;</span> <span style=color:#f92672>&#39;</span>(powerthesaurus-lookup-definitions-dwim :wk <span style=color:#e6db74>&#34;Definitions&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;lsj&#34;</span> <span style=color:#f92672>&#39;</span>(powerthesaurus-lookup-sentences-dwim :wk <span style=color:#e6db74>&#34;Sentences&#34;</span>))
</span></span></code></pre></div><h3 id=flycheck>flycheck</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package flycheck
</span></span><span style=display:flex><span>  :hook (prog-mode <span style=color:#f92672>.</span> flycheck-mode))
</span></span></code></pre></div><h3 id=flycheck-grammarly>flycheck-grammarly</h3><p>langtool ä¹Ÿå¯ä»¥æ£€æŸ¥è¯­æ³•ï¼Œç›¸æ¯”è¾ƒ grammarlyï¼Œä¸éœ€è¦è¿ç½‘ï¼Œæ‰€ä»¥é€Ÿåº¦è¾ƒå¿«ã€‚
è‡ªåŠ¨å¼€å¯æ­¤åŠŸèƒ½å¯¼è‡´åœ¨æ–‡æ¡£è¾ƒå¤§æ—¶æœ‰æ˜æ˜¾çš„å¡é¡¿æ„Ÿï¼Œæ‰‹åŠ¨å¼€å¯è¯­æ³•æ£€æŸ¥è¾ƒå¥½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package flycheck-grammarly
</span></span><span style=display:flex><span>  :after flycheck
</span></span><span style=display:flex><span>  :commands flycheck-grammarly-setup)
</span></span></code></pre></div><h3 id=shortcut>shortcut</h3><p>åœ¨ MacOS å¯ä»¥è°ƒç”¨ shortcut ä½¿ç”¨ç³»ç»Ÿç¿»è¯‘åŠŸèƒ½ã€‚</p><p>æ­¤å¤„ä»…åšè®°å½•ï¼Œæˆ‘ä¸æ€ä¹ˆä½¿ç”¨ã€‚å…·ä½“çš„è§ <a href=https://emacs-china.org/t/emacs-macos/23268>Emacs+macOS æœ€ç®€å•ä¹Ÿæœ€å¼ºå¤§çš„ä¸­è‹±äº’è¯‘è®¾ç½®ï¼Œä¸åªè‹±è¯­ - Emacs-general - Emacs China</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>             (<span style=color:#a6e22e>cons</span>
</span></span><span style=display:flex><span>              <span style=color:#e6db74>&#34;\\*Async Shell Command\\*.*&#34;</span>
</span></span><span style=display:flex><span>              (<span style=color:#a6e22e>cons</span> <span style=color:#a6e22e>#&#39;</span>display-buffer-no-window <span style=color:#66d9ef>nil</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/siri-translate ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let ((tempfile (make-temp-file <span style=color:#e6db74>&#34;siri-translate-&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34;.txt&#34;</span>)))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>write-region</span>
</span></span><span style=display:flex><span>     (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;%s&#34;</span> (thing-at-point <span style=color:#e6db74>&#39;paragraph</span>)) <span style=color:#66d9ef>nil</span> tempfile)
</span></span><span style=display:flex><span>    (end-of-paragraph-text)
</span></span><span style=display:flex><span>    (shell-command (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;shortcuts run \&#34;Translate File\&#34; -i %s &amp;&#34;</span> tempfile)))
</span></span><span style=display:flex><span>  (shell-command <span style=color:#e6db74>&#34;open -b org.gnu.Emacs&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/siri-translate2english ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let ((tempfile (make-temp-file <span style=color:#e6db74>&#34;siri-translate-&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34;.txt&#34;</span>)))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>write-region</span>
</span></span><span style=display:flex><span>     (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;%s&#34;</span> (thing-at-point <span style=color:#e6db74>&#39;paragraph</span>)) <span style=color:#66d9ef>nil</span> tempfile)
</span></span><span style=display:flex><span>    (end-of-paragraph-text)
</span></span><span style=display:flex><span>    (shell-command (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;shortcuts run \&#34;Translate File 2 English\&#34; -i %s &amp;&#34;</span> tempfile)))
</span></span><span style=display:flex><span>  (shell-command <span style=color:#e6db74>&#34;open -b org.gnu.Emacs&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun language-to-zh-or-zh-to-english ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let ((<span style=color:#a6e22e>string</span> (thing-at-point <span style=color:#e6db74>&#39;paragraph</span>)))
</span></span><span style=display:flex><span>    (if (<span style=color:#a6e22e>eq</span> (<span style=color:#a6e22e>string-match</span> <span style=color:#e6db74>&#34;\\cC&#34;</span> <span style=color:#a6e22e>string</span>) <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>        (my/siri-translate)
</span></span><span style=display:flex><span>      (my/siri-translate2english))))
</span></span></code></pre></div><h3 id=lsp>LSP</h3><h4 id=eglot>eglot</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;yasnippet</span>
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;LaTeX-mode-hook</span> <span style=color:#e6db74>&#39;eglot-ensure</span>))
</span></span></code></pre></div><h3 id=markdown>markdown</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package markdown-mode
</span></span><span style=display:flex><span>  :mode ((<span style=color:#e6db74>&#34;\\.\\(?:md\\|markdown\\|mkd\\|mdown\\|mkdn\\|mdwn\\)\\&#39;&#34;</span> <span style=color:#f92672>.</span> markdown-mode)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;README\\.md\\&#39;&#34;</span> <span style=color:#f92672>.</span> gfm-mode))
</span></span><span style=display:flex><span>  :init (setq markdown-command <span style=color:#e6db74>&#34;multimarkdown&#34;</span>)
</span></span><span style=display:flex><span>  :bind (:map markdown-mode-map
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c C-e&#34;</span> <span style=color:#f92672>.</span> markdown-do)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (with-eval-after-load &#39;whitespace-cleanup-mode</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;   (add-to-list &#39;whitespace-cleanup-mode-ignore-modes &#39;markdown-mode))</span>
</span></span></code></pre></div><h2 id=organize-life-with-plain-text-high-effective-system>Organize Life with Plain Text, High Effective System</h2><h3 id=org-mode>org-mode</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-ellipsis <span style=color:#e6db74>&#34; â‡²&#34;</span>)
</span></span><span style=display:flex><span>  (setq org-modules <span style=color:#f92672>&#39;</span>()
</span></span><span style=display:flex><span>        org-imenu-depth <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>        org-return-follows-link <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>        org-image-actual-width <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>        org-display-remote-inline-images <span style=color:#e6db74>&#39;download</span>
</span></span><span style=display:flex><span>        org-log-into-drawer <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>        org-fast-tag-selection-single-key <span style=color:#e6db74>&#39;expert</span>
</span></span><span style=display:flex><span>        org-adapt-indentation <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>        org-fontify-quote-and-verse-blocks <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>        org-support-shift-select <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>        org-treat-S-cursor-todo-selection-as-state-change <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>        org-hide-leading-stars <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>        org-startup-with-inline-images <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>        org-image-actual-width <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>500</span>)
</span></span><span style=display:flex><span>        org-use-speed-commands <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-enforce-todo-dependencies <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-enforce-todo-checkbox-dependencies <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-todo-repeat-to-state <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-todo-keywords
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((sequence <span style=color:#e6db74>&#34;TODO(t)&#34;</span> <span style=color:#e6db74>&#34;NEXT(n)&#34;</span> <span style=color:#e6db74>&#34;INPROGRESS(i)&#34;</span> <span style=color:#e6db74>&#34;|&#34;</span> <span style=color:#e6db74>&#34;WAIT(w@)&#34;</span> <span style=color:#e6db74>&#34;SOMEDAY(s@)&#34;</span> <span style=color:#e6db74>&#34;CNCL(c@/!)&#34;</span> <span style=color:#e6db74>&#34;DONE(d)&#34;</span>)))
</span></span><span style=display:flex><span>  (setq org-todo-state-tags-triggers
</span></span><span style=display:flex><span>        (quote ((<span style=color:#e6db74>&#34;CNCL&#34;</span> (<span style=color:#e6db74>&#34;CNCL&#34;</span> <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>                (<span style=color:#e6db74>&#34;WAIT&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span> <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>                (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span> <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>                (done (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span>))
</span></span><span style=display:flex><span>                (<span style=color:#e6db74>&#34;TODO&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;CNCL&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span>))
</span></span><span style=display:flex><span>                (<span style=color:#e6db74>&#34;NEXT&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;CNCL&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span>))
</span></span><span style=display:flex><span>                (<span style=color:#e6db74>&#34;DONE&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;CNCL&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span>)))))
</span></span><span style=display:flex><span>  :bind (:map org-mode-map
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;C-c l&#34;</span> <span style=color:#f92672>.</span> org-store-link)))
</span></span><span style=display:flex><span>              <span style=color:#75715e>;; (&#34;&lt;return&gt;&#34; . org-return)))</span>
</span></span></code></pre></div><h4 id=babel>Babel</h4><p>ä»¥ä¸‹é…ç½®æ¥æºï¼š<a href=https://emacs-china.org/t/org-babel/18699>https://emacs-china.org/t/org-babel/18699</a></p><p>ç¦ç”¨ org babel åŠ è½½çš„è¯­è¨€å¯ä»¥æœ‰æ•ˆçš„æé«˜ Emacs çš„å¯åŠ¨é€Ÿåº¦ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>(org-babel-do-load-languages
</span></span><span style=display:flex><span> &#39;org-babel-load-languages
</span></span><span style=display:flex><span> &#39;((emacs-lisp . t)))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ob-core
</span></span><span style=display:flex><span>  :after org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (defun my/org-babel-execute-src-block (<span style=color:#66d9ef>&amp;optional</span> _arg info _params)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Load language if needed&#34;</span>
</span></span><span style=display:flex><span>    (let* ((lang (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>0</span> info))
</span></span><span style=display:flex><span>           (sym (if (<span style=color:#a6e22e>member</span> (<span style=color:#a6e22e>downcase</span> lang) <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#e6db74>&#34;cpp&#34;</span> <span style=color:#e6db74>&#34;c++&#34;</span>)) <span style=color:#e6db74>&#39;C</span> (<span style=color:#a6e22e>intern</span> lang)))
</span></span><span style=display:flex><span>           (backup-languages org-babel-load-languages))
</span></span><span style=display:flex><span>      (unless (<span style=color:#a6e22e>assoc</span> sym backup-languages)
</span></span><span style=display:flex><span>        (condition-case err
</span></span><span style=display:flex><span>            (progn
</span></span><span style=display:flex><span>              (org-babel-do-load-languages <span style=color:#e6db74>&#39;org-babel-load-languages</span> (<span style=color:#a6e22e>list</span> (<span style=color:#a6e22e>cons</span> sym <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>              (setq-default org-babel-load-languages (<span style=color:#a6e22e>append</span> (<span style=color:#a6e22e>list</span> (<span style=color:#a6e22e>cons</span> sym <span style=color:#66d9ef>t</span>)) backup-languages)))
</span></span><span style=display:flex><span>          (file-missing
</span></span><span style=display:flex><span>           (setq-default org-babel-load-languages backup-languages)
</span></span><span style=display:flex><span>           err)))))
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;org-babel-execute-src-block</span> :before <span style=color:#e6db74>&#39;my/org-babel-execute-src-block</span>)
</span></span><span style=display:flex><span>  (setq org-confirm-babel-evaluate <span style=color:#66d9ef>nil</span>))
</span></span></code></pre></div><h4 id=org-capture>org-capture</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-capture
</span></span><span style=display:flex><span>  :after org
</span></span><span style=display:flex><span>  :bind (:map org-capture-mode-map
</span></span><span style=display:flex><span>              ([remap evil-save-and-close] <span style=color:#f92672>.</span> org-capture-finalize)
</span></span><span style=display:flex><span>              ([remap evil-save-modified-and-close] <span style=color:#f92672>.</span> org-capture-finalize)
</span></span><span style=display:flex><span>              ([remap evil-quit] <span style=color:#f92672>.</span> org-capture-kill)
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;RET&#34;</span> <span style=color:#f92672>.</span> org-capture-finalize))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-capture-templates
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#e6db74>&#34;Inbox&#34;</span>
</span></span><span style=display:flex><span>           plain (file+olp+datetree (lambda () (<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/inbox/inbox.org&#34;</span>)))
</span></span><span style=display:flex><span>           <span style=color:#e6db74>&#34;**** %?\n%U\n&#34;</span> :time-prompt <span style=color:#66d9ef>t</span> :tree-type week)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#e6db74>&#34;Daily Plan&#34;</span>
</span></span><span style=display:flex><span>           plain (file+olp+datetree (lambda () (<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/inbox/plan.org&#34;</span>)))
</span></span><span style=display:flex><span>           <span style=color:#e6db74>&#34;- [ ] %?\n%U\n&#34;</span> :time-prompt <span style=color:#66d9ef>t</span> :tree-type week)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#e6db74>&#34;Reflection&#34;</span>
</span></span><span style=display:flex><span>           plain
</span></span><span style=display:flex><span>           (file+olp+datetree (lambda () (<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/roam/main/reflection.org&#34;</span>)))
</span></span><span style=display:flex><span>           (file <span style=color:#e6db74>&#34;~/.emacs.d/template/tpl-daily-reflection&#34;</span>)
</span></span><span style=display:flex><span>           :time-prompt <span style=color:#66d9ef>t</span> :tree-type week)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#e6db74>&#34;Anki Deck&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;ae&#34;</span> <span style=color:#e6db74>&#34;Deck: English&#34;</span>
</span></span><span style=display:flex><span>           entry (file (lambda ()
</span></span><span style=display:flex><span>                         (<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/anki/anki_english.org&#34;</span>)))
</span></span><span style=display:flex><span>           <span style=color:#e6db74>&#34;* %?\n&#34;</span> :jump-to-captured <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;ac&#34;</span> <span style=color:#e6db74>&#34;Deck: Civil Engineering&#34;</span>
</span></span><span style=display:flex><span>           entry (file (lambda ()
</span></span><span style=display:flex><span>                         (<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/anki/anki_engineering.org&#34;</span>)))
</span></span><span style=display:flex><span>           <span style=color:#e6db74>&#34;* %?\n&#34;</span> :jump-to-captured <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#e6db74>&#34;Code snippets&#34;</span>
</span></span><span style=display:flex><span>           entry (file (lambda ()
</span></span><span style=display:flex><span>                         (<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/scripts/snippets.org&#34;</span>)))
</span></span><span style=display:flex><span>           <span style=color:#e6db74>&#34;* %?\t%^g\n#+BEGIN_SRC %^{language}\n\n#+END_SRC&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; (&#34;l&#34; &#34;Lists&#34;)</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;m&#34;</span> <span style=color:#e6db74>&#34;Movie&#34;</span>
</span></span><span style=display:flex><span>           entry (file+headline (lambda () (<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/roam/main/watchlist.org&#34;</span>)) <span style=color:#e6db74>&#34;Watching Lists&#34;</span>)
</span></span><span style=display:flex><span>           <span style=color:#e6db74>&#34;* %?
</span></span></span><span style=display:flex><span><span style=color:#e6db74>:PROPERTIES:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>:GENRE: %^{Film genre|Action|Adventure|Comedy|Drama|Fantasy|Horror|Musicals|Mystery|Romance|Science fiction|Sports|Thriller}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>:COUNTRY:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>:SCORE:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>:PLOT: %^{PLOT}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>:END:&#34;</span>))))
</span></span></code></pre></div><p>ç”±äºä½¿ç”¨äº† org-roam çš„è‡ªåŠ¨å¼¹å‡ºåŠŸèƒ½ï¼Œå¯¼è‡´ org-capture çš„æ—¶å€™å…‰æ ‡æœªèƒ½æ­£å¸¸çš„è·³è½¬åˆ° org-capture çš„çª—å£å½“ä¸­ï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥è§„é¿è¿™ä¸ªé—®é¢˜ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/org-capture ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Make a new frame to do org-capture staff.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (make-frame)
</span></span><span style=display:flex><span>  (org-capture))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-capture-after-finalize-hook</span> <span style=color:#e6db74>&#39;delete-frame</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;&lt;f10&gt;&#34;</span>) <span style=color:#e6db74>&#39;my/org-capture</span>)
</span></span></code></pre></div><h4 id=org-archive>org-archive</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-archive
</span></span><span style=display:flex><span>  :after org
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (setq org-archive-location (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;todos/gtd_archive.org::datetree/&#34;</span> my-galaxy))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun my/gtd-archive ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Archive tasks to specific file.&#34;</span>
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;todos/gtd_archive.org&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>  (my/space-leader-def
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;foa&#34;</span> <span style=color:#f92672>&#39;</span>(my/gtd-archive :wk <span style=color:#e6db74>&#34;Archive File&#34;</span>)))
</span></span></code></pre></div><h4 id=org-attach>org-attach</h4><p>POSTï¼š<a href=https://fuco1.github.io/2023-02-08-Visit-the-org-headline-from-the-attach-dired-buffer.html>Visit the org headline from the attach dired buffer</a>
é€šå¸¸ä¸éœ€è¦ç®¡ç†é™„ä»¶åœ¨æ–‡ä»¶å¤¹ä¸­æ˜¯æ€ä¹ˆå­˜æ”¾çš„ï¼Œæ‰¾åˆ° heading å°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„é™„ä»¶ã€‚
æˆ–è€…å½“åœ¨ <code>dired</code> ä¸­æŸ¥çœ‹ <code>attach</code> æ–‡ä»¶å¤¹ä¸­çš„é™„ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>my/org-attach-visit-heading-from-dired</code> å‡½æ•°è·³è½¬åˆ°å¯¹åº”çš„ heading ä½ç½®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-attach
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-attach-id-dir (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;attach&#34;</span> my-galaxy))
</span></span><span style=display:flex><span>  (defun my/org-attach-visit-headline-from-dired ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Go to the headline corresponding to this org-attach directory.&#34;</span>
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (let* ((id-parts (last (split-string default-directory <span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#66d9ef>t</span>) <span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>           (id (<span style=color:#a6e22e>apply</span> <span style=color:#a6e22e>#&#39;concat</span> id-parts)))
</span></span><span style=display:flex><span>      (let ((m (org-id-find id <span style=color:#e6db74>&#39;marker</span>)))
</span></span><span style=display:flex><span>        (unless m (<span style=color:#a6e22e>user-error</span> <span style=color:#e6db74>&#34;Cannot find entry with ID \&#34;%s\&#34;&#34;</span> id))
</span></span><span style=display:flex><span>        (pop-to-buffer (<span style=color:#a6e22e>marker-buffer</span> m))
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>goto-char</span> m)
</span></span><span style=display:flex><span>        (move-marker m <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>        (org-fold-show-context))))
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\*Org Attach\\*&#34;</span>
</span></span><span style=display:flex><span>                 (display-buffer-pop-up-frame)
</span></span><span style=display:flex><span>                 (side <span style=color:#f92672>.</span> right)
</span></span><span style=display:flex><span>                 (slot <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>                 (window-width <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.5</span>)
</span></span><span style=display:flex><span>                 (<span style=color:#a6e22e>window-parameters</span> <span style=color:#f92672>.</span> ((no-other-window <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>                                       (no-delete-other-windows <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)))))
</span></span><span style=display:flex><span>  :bind (:map dired-mode-map
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;C-&#39;&#34;</span> <span style=color:#f92672>.</span> my/org-attach-visit-headline-from-dired)))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/copy-or-move-file-to-buffer-dir
</span></span><span style=display:flex><span>    (file-name <span style=color:#66d9ef>&amp;optional</span> arg)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Copy or move the FILE-NAME to the directory of the buffer&#39;s file.\n
</span></span></span><span style=display:flex><span><span style=color:#e6db74>With prefix argument ARG, copy the file instead of moving it.&#34;</span>
</span></span><span style=display:flex><span>  (interactive <span style=color:#e6db74>&#34;FFile to move: \nP&#34;</span>)
</span></span><span style=display:flex><span>  (let ((new-file-name (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>file-name-directory</span> (<span style=color:#a6e22e>buffer-file-name</span>))
</span></span><span style=display:flex><span>                               (<span style=color:#a6e22e>file-name-nondirectory</span> file-name))))
</span></span><span style=display:flex><span>    (if (not (<span style=color:#a6e22e>file-exists-p</span> file-name))
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>error</span> <span style=color:#e6db74>&#34;File does not exist: %s&#34;</span> file-name)
</span></span><span style=display:flex><span>      (if (<span style=color:#a6e22e>file-exists-p</span> new-file-name)
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>error</span> <span style=color:#e6db74>&#34;File already exists: %s&#34;</span> new-file-name)
</span></span><span style=display:flex><span>        (progn
</span></span><span style=display:flex><span>          (let ((command (if arg <span style=color:#e6db74>&#39;copy-file</span> <span style=color:#e6db74>&#39;rename-file</span> )))
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>funcall</span> command file-name new-file-name <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>          (if arg
</span></span><span style=display:flex><span>              (find-file-noselect new-file-name)
</span></span><span style=display:flex><span>            (progn
</span></span><span style=display:flex><span>                (<span style=color:#a6e22e>kill-buffer</span> (<span style=color:#a6e22e>current-buffer</span>))
</span></span><span style=display:flex><span>                (<span style=color:#a6e22e>delete-file</span> file-name)))
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;File %s to %s&#34;</span>
</span></span><span style=display:flex><span>                   (if arg <span style=color:#e6db74>&#34;moved&#34;</span> <span style=color:#e6db74>&#34;copied&#34;</span>)
</span></span><span style=display:flex><span>                   new-file-name))))))
</span></span></code></pre></div><h4 id=org-habit>org-habit</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-habit
</span></span><span style=display:flex><span>  :after org-agenda
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;org-modules</span> <span style=color:#e6db74>&#39;org-habit</span> <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><h4 id=org-id>org-id</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-id
</span></span><span style=display:flex><span>  :after org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-id-method <span style=color:#e6db74>&#39;ts</span>)
</span></span><span style=display:flex><span>  (setq org-id-link-to-org-use-id <span style=color:#e6db74>&#39;create-if-interactive</span>)
</span></span><span style=display:flex><span>  (defun my/copy-idlink ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Copy idlink to clipboard.&#34;</span>
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (when (<span style=color:#a6e22e>eq</span> major-mode <span style=color:#e6db74>&#39;org-agenda-mode</span>) <span style=color:#75715e>;switch to orgmode</span>
</span></span><span style=display:flex><span>      (org-agenda-show)
</span></span><span style=display:flex><span>      (org-agenda-goto))
</span></span><span style=display:flex><span>    (when (<span style=color:#a6e22e>eq</span> major-mode <span style=color:#e6db74>&#39;org-mode</span>) <span style=color:#75715e>; do this only in org-mode buffers</span>
</span></span><span style=display:flex><span>      (let* ((mytmphead (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>4</span> (org-heading-components)))
</span></span><span style=display:flex><span>             (mytmpid (<span style=color:#a6e22e>funcall</span> <span style=color:#e6db74>&#39;org-id-get-create</span>))
</span></span><span style=display:flex><span>             (mytmplink (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;- [ ] [[id:%s][%s]]&#34;</span> mytmpid mytmphead)))
</span></span><span style=display:flex><span>        (kill-new mytmplink)
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Copied %s to killring (clipboard)&#34;</span> mytmplink))))
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;&lt;f7&gt;&#34;</span> <span style=color:#f92672>.</span> my/copy-idlink))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;oi&#34;</span> <span style=color:#f92672>&#39;</span>(org-id-get-create :wk <span style=color:#e6db74>&#34;Create ID&#34;</span>))
</span></span></code></pre></div><h4 id=org-src>org-src</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-src
</span></span><span style=display:flex><span>  :after org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-src-window-setup <span style=color:#e6db74>&#39;current-window</span>)
</span></span><span style=display:flex><span>  (setq org-src-ask-before-returning-to-edit-buffer <span style=color:#66d9ef>nil</span>))
</span></span></code></pre></div><h4 id=org-refile>org-refile</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-refile
</span></span><span style=display:flex><span>  :after org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-refile-targets <span style=color:#f92672>&#39;</span>((<span style=color:#66d9ef>nil</span> :maxlevel <span style=color:#f92672>.</span> <span style=color:#ae81ff>9</span>)
</span></span><span style=display:flex><span>                             (org-agenda-files :maxlevel <span style=color:#f92672>.</span> <span style=color:#ae81ff>9</span>)))
</span></span><span style=display:flex><span>  (setq org-refile-use-outline-path <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-outline-path-complete-in-steps <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq org-refile-allow-creating-parent-nodes <span style=color:#e6db74>&#39;confirm</span>)
</span></span><span style=display:flex><span>  (setq org-refile-use-outline-path <span style=color:#e6db74>&#39;file</span>)
</span></span><span style=display:flex><span>  (setq org-refile-active-region-within-subtree <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><h4 id=org-emphasis-alist>org-emphasis-alist</h4><p>æ­¤å¤„çš„è®¾ç½®æ¥æºï¼š<a href=https://protesilaos.com/emacs/modus-themes>https://protesilaos.com/emacs/modus-themes</a></p><p>è‹¥å‡çº§ modus-themes åˆ° 4.0 çš„ç‰ˆæœ¬ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (defface my-org-emphasis-bold
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#39;</span>((default :inherit bold)
</span></span><span style=display:flex><span>      (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>       :foreground <span style=color:#e6db74>&#34;#a60000&#34;</span>)
</span></span><span style=display:flex><span>      (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>       :foreground <span style=color:#e6db74>&#34;#ff8059&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;My bold emphasis for Org.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defface my-org-emphasis-italic
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#39;</span>((default :inherit italic)
</span></span><span style=display:flex><span>      (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>       :foreground <span style=color:#e6db74>&#34;#005e00&#34;</span>)
</span></span><span style=display:flex><span>      (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>       :foreground <span style=color:#e6db74>&#34;#44bc44&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;My italic emphasis for Org.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defface my-org-emphasis-underline
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#39;</span>((default :inherit underline)
</span></span><span style=display:flex><span>      (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>       :foreground <span style=color:#e6db74>&#34;#813e00&#34;</span>)
</span></span><span style=display:flex><span>      (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>       :foreground <span style=color:#e6db74>&#34;#d0bc00&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;My underline emphasis for Org.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defface my-org-emphasis-strike-through
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#39;</span>((default :strike-through <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>      (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>       :foreground <span style=color:#e6db74>&#34;#505050&#34;</span>)
</span></span><span style=display:flex><span>      (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>       :foreground <span style=color:#e6db74>&#34;#a8a8a8&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;My strike-through emphasis for Org.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defface my-org-emphasis-strike-through
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#39;</span>((((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>       :strike-through <span style=color:#e6db74>&#34;#972500&#34;</span> :foreground <span style=color:#e6db74>&#34;#505050&#34;</span>)
</span></span><span style=display:flex><span>      (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>       :strike-through <span style=color:#e6db74>&#34;#ef8b50&#34;</span> :foreground <span style=color:#e6db74>&#34;#a8a8a8&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;My strike-through emphasis for Org.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-emphasis-alist
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;*&#34;</span> my-org-emphasis-bold)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;/&#34;</span> my-org-emphasis-italic)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;_&#34;</span> my-org-emphasis-underline)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;=&#34;</span> org-verbatim verbatim)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;~&#34;</span> org-code verbatim)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;+&#34;</span> my-org-emphasis-strike-through))))
</span></span></code></pre></div><h4 id=org-clock>org-clock</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-clock
</span></span><span style=display:flex><span>  :after org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (org-clock-persistence-insinuate)
</span></span><span style=display:flex><span>  (setq org-clock-history-length <span style=color:#ae81ff>23</span>)
</span></span><span style=display:flex><span>  (setq org-clock-in-resume <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-clock-into-drawer <span style=color:#e6db74>&#34;LOGCLOCK&#34;</span>)
</span></span><span style=display:flex><span>  (setq org-clock-out-remove-zero-time-clocks <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-clock-out-when-done <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-clock-persist <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-clock-clocktable-default-properties <span style=color:#f92672>&#39;</span>(:maxlevel <span style=color:#ae81ff>5</span> :link <span style=color:#66d9ef>t</span> :tags <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>  (setq org-clock-persist-query-resume <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq org-clock-report-include-clocking-task <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;oc&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Clock&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ocj&#34;</span> <span style=color:#f92672>&#39;</span>(org-clock-goto :wk <span style=color:#e6db74>&#34;Clock goto&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;oci&#34;</span> <span style=color:#f92672>&#39;</span>(org-clock-in :wk <span style=color:#e6db74>&#34;Clock In&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;oco&#34;</span> <span style=color:#f92672>&#39;</span>(org-clock-out :wk <span style=color:#e6db74>&#34;Clock Out&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ocl&#34;</span> <span style=color:#f92672>&#39;</span>(org-clock-in-last :wk <span style=color:#e6db74>&#34;Clock In Last&#34;</span>))
</span></span></code></pre></div><p>è¿™ä¸ªç”¨äº clocktable è¿›è¡Œä»»åŠ¡æ—¶é—´çš„æ±‡æ€»æ¯”è¾ƒï¼Œç›®å‰æˆ‘ç”¨å®ƒæ¥ç»Ÿè®¡ä¸€å¹´çš„è¯»ä¹¦æ—¶é•¿è®¡å½•ï¼ŒåŠä¸€å¹´è¯»äº†å“ªäº›ä¹¦ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; https://200ok.ch/posts/2022-12-07_streamline_your_org_mode_workflow_with_automatic_clock_table_recalculation.html</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Need add #+AUTOCALC_CLOCK_TABLES to org file.</span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;org</span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;org-options-keywords</span> <span style=color:#e6db74>&#34;AUTOCALC_CLOCK_TABLES:&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun autocalc-clocktable ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Auto update clock table.&#34;</span>
</span></span><span style=display:flex><span>  (when (derived-mode-p <span style=color:#e6db74>&#39;org-mode</span>)
</span></span><span style=display:flex><span>    (save-excursion
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>goto-char</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>      (if (<span style=color:#a6e22e>string-equal</span> (<span style=color:#a6e22e>car</span>
</span></span><span style=display:flex><span>                         (<span style=color:#a6e22e>cdr</span>
</span></span><span style=display:flex><span>                          (<span style=color:#a6e22e>car</span>
</span></span><span style=display:flex><span>                           (org-collect-keywords <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;AUTOCALC_CLOCK_TABLES&#34;</span>)))))
</span></span><span style=display:flex><span>                        <span style=color:#e6db74>&#34;t&#34;</span>)
</span></span><span style=display:flex><span>          (progn
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>search-forward</span> <span style=color:#e6db74>&#34;clocktable&#34;</span>))
</span></span><span style=display:flex><span>            (org-ctrl-c-ctrl-c))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;before-save-hook</span> <span style=color:#e6db74>&#39;autocalc-clocktable</span>)
</span></span></code></pre></div><p>Punch in or out.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq bh/keep-clock-running <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun bh/is-task-p ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Any task with a todo keyword and no subtask.&#34;</span>
</span></span><span style=display:flex><span>  (save-restriction
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>widen</span>)
</span></span><span style=display:flex><span>    (let ((has-subtask)
</span></span><span style=display:flex><span>          (subtree-end (save-excursion (org-end-of-subtree <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>          (is-a-task (<span style=color:#a6e22e>member</span> (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>2</span> (org-heading-components)) org-todo-keywords-1)))
</span></span><span style=display:flex><span>      (save-excursion
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>forward-line</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        (while (and (not has-subtask)
</span></span><span style=display:flex><span>                    (<span style=color:#a6e22e>&lt;</span> (<span style=color:#a6e22e>point</span>) subtree-end)
</span></span><span style=display:flex><span>                    (<span style=color:#a6e22e>re-search-forward</span> <span style=color:#e6db74>&#34;^\*+ &#34;</span> subtree-end <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>          (when (<span style=color:#a6e22e>member</span> (org-get-todo-state) org-todo-keywords-1)
</span></span><span style=display:flex><span>            (setq has-subtask <span style=color:#66d9ef>t</span>))))
</span></span><span style=display:flex><span>      (and is-a-task (not has-subtask)))))
</span></span><span style=display:flex><span>(defun bh/is-project-p ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Any task with a todo keyword subtask.&#34;</span>
</span></span><span style=display:flex><span>  (save-restriction
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>widen</span>)
</span></span><span style=display:flex><span>    (let ((has-subtask)
</span></span><span style=display:flex><span>          (subtree-end (save-excursion (org-end-of-subtree <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>          (is-a-task (<span style=color:#a6e22e>member</span> (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>2</span> (org-heading-components)) org-todo-keywords-1)))
</span></span><span style=display:flex><span>      (save-excursion
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>forward-line</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        (while (and (not has-subtask)
</span></span><span style=display:flex><span>                    (<span style=color:#a6e22e>&lt;</span> (<span style=color:#a6e22e>point</span>) subtree-end)
</span></span><span style=display:flex><span>                    (<span style=color:#a6e22e>re-search-forward</span> <span style=color:#e6db74>&#34;^\*+ &#34;</span> subtree-end <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>          (when (<span style=color:#a6e22e>member</span> (org-get-todo-state) org-todo-keywords-1)
</span></span><span style=display:flex><span>            (setq has-subtask <span style=color:#66d9ef>t</span>))))
</span></span><span style=display:flex><span>      (and is-a-task has-subtask))))
</span></span><span style=display:flex><span>(defun bh/find-project-task ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Move point to the parent (project) task if any.&#34;</span>
</span></span><span style=display:flex><span>  (save-restriction
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>widen</span>)
</span></span><span style=display:flex><span>    (let ((parent-task (save-excursion (org-back-to-heading <span style=color:#e6db74>&#39;invisible-ok</span>) (<span style=color:#a6e22e>point</span>))))
</span></span><span style=display:flex><span>      (while (org-up-heading-safe)
</span></span><span style=display:flex><span>        (when (<span style=color:#a6e22e>member</span> (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>2</span> (org-heading-components)) org-todo-keywords-1)
</span></span><span style=display:flex><span>          (setq parent-task (<span style=color:#a6e22e>point</span>))))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>goto-char</span> parent-task)
</span></span><span style=display:flex><span>      parent-task)))
</span></span><span style=display:flex><span>(defun bh/is-project-subtree-p ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Any task with a todo keyword that is in a project subtree.
</span></span></span><span style=display:flex><span><span style=color:#e6db74> Callers of this function already widen the buffer view.&#34;</span>
</span></span><span style=display:flex><span>  (let ((task (save-excursion (org-back-to-heading <span style=color:#e6db74>&#39;invisible-ok</span>)
</span></span><span style=display:flex><span>                              (<span style=color:#a6e22e>point</span>))))
</span></span><span style=display:flex><span>    (save-excursion
</span></span><span style=display:flex><span>      (bh/find-project-task)
</span></span><span style=display:flex><span>      (if (<span style=color:#a6e22e>equal</span> (<span style=color:#a6e22e>point</span>) task)
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>t</span>))))
</span></span><span style=display:flex><span>(defun bh/clock-in-to-next (kw) <span style=color:#75715e>;; kw should not been deleted.</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Switch a task from TODO to NEXT when clocking in.
</span></span></span><span style=display:flex><span><span style=color:#e6db74> Skips capture tasks, projects, and subprojects.
</span></span></span><span style=display:flex><span><span style=color:#e6db74> Switch projects and subprojects from NEXT back to TODO&#34;</span>
</span></span><span style=display:flex><span>  (when (not (and (<span style=color:#a6e22e>boundp</span> <span style=color:#e6db74>&#39;org-capture-mode</span>) org-capture-mode))
</span></span><span style=display:flex><span>    (cond
</span></span><span style=display:flex><span>     ((and (<span style=color:#a6e22e>member</span> (org-get-todo-state) (<span style=color:#a6e22e>list</span> <span style=color:#e6db74>&#34;TODO&#34;</span>))
</span></span><span style=display:flex><span>           (bh/is-task-p))
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;NEXT&#34;</span>)
</span></span><span style=display:flex><span>     ((and (<span style=color:#a6e22e>member</span> (org-get-todo-state) (<span style=color:#a6e22e>list</span> <span style=color:#e6db74>&#34;NEXT&#34;</span>))
</span></span><span style=display:flex><span>           (bh/is-project-p))
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;TODO&#34;</span>))))
</span></span><span style=display:flex><span>(defun bh/punch-in (arg)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Start continuous clocking and set the default task to the selected task.
</span></span></span><span style=display:flex><span><span style=color:#e6db74> If </span><span style=color:#e6db74>`ARG&#39;</span><span style=color:#e6db74> is nil, set the Organization task
</span></span></span><span style=display:flex><span><span style=color:#e6db74> as the default task.&#34;</span>
</span></span><span style=display:flex><span>  (interactive <span style=color:#e6db74>&#34;p&#34;</span>)
</span></span><span style=display:flex><span>  (setq bh/keep-clock-running <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (if (<span style=color:#a6e22e>equal</span> major-mode <span style=color:#e6db74>&#39;org-agenda-mode</span>)
</span></span><span style=display:flex><span>      <span style=color:#75715e>;;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; We&#39;re in the agenda</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;;</span>
</span></span><span style=display:flex><span>      (let* ((marker (org-get-at-bol <span style=color:#e6db74>&#39;org-hd-marker</span>))
</span></span><span style=display:flex><span>             (tags (org-with-point-at marker (org-get-tags))))
</span></span><span style=display:flex><span>        (if (and (<span style=color:#a6e22e>eq</span> arg <span style=color:#ae81ff>4</span>) tags)
</span></span><span style=display:flex><span>            (org-agenda-clock-in <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>16</span>))
</span></span><span style=display:flex><span>          (bh/clock-in-default-task-as-default)))
</span></span><span style=display:flex><span>    <span style=color:#75715e>;;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; We are not in the agenda</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;;</span>
</span></span><span style=display:flex><span>    (save-restriction
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>widen</span>)
</span></span><span style=display:flex><span>                                        <span style=color:#75715e>; Find the tags on the current task</span>
</span></span><span style=display:flex><span>      (if (and (<span style=color:#a6e22e>equal</span> major-mode <span style=color:#e6db74>&#39;org-mode</span>) (not (org-before-first-heading-p)) (<span style=color:#a6e22e>eq</span> arg <span style=color:#ae81ff>4</span>))
</span></span><span style=display:flex><span>          (org-clock-in <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>16</span>))
</span></span><span style=display:flex><span>        (bh/clock-in-default-task-as-default)))))
</span></span><span style=display:flex><span>(defun bh/punch-out ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Punch out.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (setq bh/keep-clock-running <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (when (org-clock-is-active)
</span></span><span style=display:flex><span>    (org-clock-out))
</span></span><span style=display:flex><span>  (org-agenda-remove-restriction-lock))
</span></span><span style=display:flex><span>(defun bh/clock-in-default-task ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Clock In default task with specific ID.&#34;</span>
</span></span><span style=display:flex><span>  (save-excursion
</span></span><span style=display:flex><span>    (org-with-point-at org-clock-default-task
</span></span><span style=display:flex><span>      (org-clock-in))))
</span></span><span style=display:flex><span>(defun bh/clock-in-parent-task ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Move point to the parent (project) task if any and clock in.&#34;</span>
</span></span><span style=display:flex><span>  (let ((parent-task))
</span></span><span style=display:flex><span>    (save-excursion
</span></span><span style=display:flex><span>      (save-restriction
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>widen</span>)
</span></span><span style=display:flex><span>        (while (and (not parent-task) (org-up-heading-safe))
</span></span><span style=display:flex><span>          (when (<span style=color:#a6e22e>member</span> (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>2</span> (org-heading-components)) org-todo-keywords-1)
</span></span><span style=display:flex><span>            (setq parent-task (<span style=color:#a6e22e>point</span>))))
</span></span><span style=display:flex><span>        (if parent-task
</span></span><span style=display:flex><span>            (org-with-point-at parent-task
</span></span><span style=display:flex><span>              (org-clock-in))
</span></span><span style=display:flex><span>          (when bh/keep-clock-running
</span></span><span style=display:flex><span>            (bh/clock-in-default-task)))))))
</span></span><span style=display:flex><span>(defvar bh/default-task-id <span style=color:#e6db74>&#34;20220524T114723.420565&#34;</span>)
</span></span><span style=display:flex><span>(defun bh/clock-in-default-task-as-default ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Clock in default task.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (org-with-point-at (org-id-find bh/default-task-id <span style=color:#e6db74>&#39;marker</span>)
</span></span><span style=display:flex><span>    (org-clock-in <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>16</span>))))
</span></span><span style=display:flex><span>(defun bh/clock-out-maybe ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Clock out.&#34;</span>
</span></span><span style=display:flex><span>  (when (and bh/keep-clock-running
</span></span><span style=display:flex><span>             (not org-clock-clocking-in)
</span></span><span style=display:flex><span>             (<span style=color:#a6e22e>marker-buffer</span> org-clock-default-task)
</span></span><span style=display:flex><span>             (not org-clock-resolving-clocks-due-to-idleness))
</span></span><span style=display:flex><span>    (bh/clock-in-parent-task)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-clock-out-hook</span> <span style=color:#e6db74>&#39;bh/clock-out-maybe</span> <span style=color:#e6db74>&#39;append</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun bh/clock-in-last-task (arg)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Clock in the interrupted task if there is one.
</span></span></span><span style=display:flex><span><span style=color:#e6db74> Skip the default task and get the next one.
</span></span></span><span style=display:flex><span><span style=color:#e6db74> A prefix </span><span style=color:#e6db74>`ARG&#39;</span><span style=color:#e6db74> forces clock in of the default task.&#34;</span>
</span></span><span style=display:flex><span>  (interactive <span style=color:#e6db74>&#34;p&#34;</span>)
</span></span><span style=display:flex><span>  (let ((clock-in-to-task
</span></span><span style=display:flex><span>         (cond
</span></span><span style=display:flex><span>          ((<span style=color:#a6e22e>eq</span> arg <span style=color:#ae81ff>4</span>) org-clock-default-task)
</span></span><span style=display:flex><span>          ((and (org-clock-is-active)
</span></span><span style=display:flex><span>                (<span style=color:#a6e22e>equal</span> org-clock-default-task (cadr org-clock-history)))
</span></span><span style=display:flex><span>           (caddr org-clock-history))
</span></span><span style=display:flex><span>          ((org-clock-is-active) (cadr org-clock-history))
</span></span><span style=display:flex><span>          ((<span style=color:#a6e22e>equal</span> org-clock-default-task (<span style=color:#a6e22e>car</span> org-clock-history)) (cadr org-clock-history))
</span></span><span style=display:flex><span>          (<span style=color:#66d9ef>t</span> (<span style=color:#a6e22e>car</span> org-clock-history)))))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>widen</span>)
</span></span><span style=display:flex><span>    (org-with-point-at clock-in-to-task
</span></span><span style=display:flex><span>      (org-clock-in <span style=color:#66d9ef>nil</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/toggle-punch-in-or-out ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Start clock or stop it when there is a clocking.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (if (org-clocking-p)
</span></span><span style=display:flex><span>      (progn
</span></span><span style=display:flex><span>        (bh/punch-out)
</span></span><span style=display:flex><span>        (alert <span style=color:#e6db74>&#34;Wish you have a good day!&#34;</span> :title <span style=color:#e6db74>&#34;Punch Out&#34;</span>))
</span></span><span style=display:flex><span>    (progn
</span></span><span style=display:flex><span>      (bh/punch-in <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>      (alert <span style=color:#e6db74>&#34;Start Working: Fighting&#34;</span> :title <span style=color:#e6db74>&#34;Punch In&#34;</span> ))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#f92672>&#39;</span>(my/toggle-punch-in-or-out :wk <span style=color:#e6db74>&#34;Punch In or Out&#34;</span>))
</span></span></code></pre></div><h4 id=org-buffer>org buffer</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\*Org Note\\*&#34;</span>
</span></span><span style=display:flex><span>               (display-buffer-in-side-window)
</span></span><span style=display:flex><span>               (side <span style=color:#f92672>.</span> right)
</span></span><span style=display:flex><span>               (slot <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>               (window-width <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.5</span>)
</span></span><span style=display:flex><span>               (<span style=color:#a6e22e>window-parameters</span> <span style=color:#f92672>.</span> ((no-other-window <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>                                     (no-delete-other-windows <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)))))
</span></span></code></pre></div><h4 id=ol>ol</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ol
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-link-frame-setup <span style=color:#f92672>&#39;</span>((vm <span style=color:#f92672>.</span> vm-visit-folder-other-frame)
</span></span><span style=display:flex><span>                               (vm-imap <span style=color:#f92672>.</span> vm-visit-imap-folder-other-frame)
</span></span><span style=display:flex><span>                               (gnus <span style=color:#f92672>.</span> org-gnus-no-new-news)
</span></span><span style=display:flex><span>                               (file <span style=color:#f92672>.</span> find-file)
</span></span><span style=display:flex><span>                               (wl <span style=color:#f92672>.</span> wl-other-frame))))
</span></span></code></pre></div><h3 id=ekg>ekg</h3><p>è½»åº¦å°è¯•ï¼Œç›®å‰è¿˜æœ‰å¾ˆå¤šçš„ä¸è¶³ï¼Œæ—¥å¸¸ä½¿ç”¨ä¸å¤ªå¤Ÿã€‚
å’Œå…¶ä»–çš„æ¨¡å—ä¸èƒ½å¾ˆå¥½çš„åˆä½œï¼Œå¦‚ org-agendaï¼Œmath-previewã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ekg
</span></span><span style=display:flex><span>  :commands (ekg-show-notes-in-trash
</span></span><span style=display:flex><span>             ekg-show-notes-for-today
</span></span><span style=display:flex><span>             ekg-show-notes-with-tag
</span></span><span style=display:flex><span>             ekg-show-notes-with-all-tags
</span></span><span style=display:flex><span>             ekg-show-notes-with-any-tags
</span></span><span style=display:flex><span>             ekg-show-rename-tag
</span></span><span style=display:flex><span>             ekg-browse-url)
</span></span><span style=display:flex><span>  :bind ((<span style=color:#e6db74>&#34;&lt;f9&gt;&#34;</span> <span style=color:#f92672>.</span> ekg-capture)
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;M-&lt;f9&gt;&#34;</span> <span style=color:#f92672>.</span> ekg-capture-url))
</span></span><span style=display:flex><span>  :general
</span></span><span style=display:flex><span>  (evil-define-key <span style=color:#e6db74>&#39;motion</span> ekg-notes-mode-map
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;q&#34;</span> <span style=color:#e6db74>&#39;quit-window</span>)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq triples-default-database-filename (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;ekg/triples.db&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;e&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;EKG&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ee&#34;</span> <span style=color:#f92672>&#39;</span>(ekg-show-notes-with-tag :wk <span style=color:#e6db74>&#34;With TAG&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ed&#34;</span> <span style=color:#f92672>&#39;</span>(ekg-show-notes-for-today :wk <span style=color:#e6db74>&#34;Today&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;eA&#34;</span> <span style=color:#f92672>&#39;</span>(ekg-show-notes-with-all-tags :wk <span style=color:#e6db74>&#34;All TAG&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ea&#34;</span> <span style=color:#f92672>&#39;</span>(ekg-show-notes-with-any-tags :wk <span style=color:#e6db74>&#34;Any TAG&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;et&#34;</span> <span style=color:#f92672>&#39;</span>(ekg-show-notes-in-trash :wk <span style=color:#e6db74>&#34;Trash&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;er&#34;</span> <span style=color:#f92672>&#39;</span>(ekg-rename-tag :wk <span style=color:#e6db74>&#34;Rename TAG&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;eb&#34;</span> <span style=color:#f92672>&#39;</span>(ekg-browse-url :wk <span style=color:#e6db74>&#34;Open URL&#34;</span>))
</span></span></code></pre></div><h3 id=org-roam>org-roam</h3><p>readinglog å’Œ reference æ¨¡æ¿è§ &lt;./template/> æ–‡ä»¶å¤¹ã€‚</p><p>Org-roam é»˜è®¤ä¼šç¼“å­˜æ‰€æœ‰çš„èŠ‚ç‚¹ï¼ˆæ–‡ä»¶æˆ–æ ‡é¢˜ï¼‰ï¼Œè‹¥è¦æ’é™¤ä¸éœ€è¦çš„èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨ <code>ROAM_EXCLUDE</code> å…³é”®å­—æˆ–è€…ä½¿ç”¨ <code>org-roam-db-node-include-function</code> å‡½æ•°ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>(setq org-roam-db-node-include-function
</span></span><span style=display:flex><span>      (lambda ()
</span></span><span style=display:flex><span>        (not (member &#34;ATTACH&#34; (org-get-tags)))))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-roam
</span></span><span style=display:flex><span>  :commands org-roam-node-find
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (setq org-roam-directory (file-truename (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;roam&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>  :hook ((on-first-input <span style=color:#f92672>.</span> org-roam-db-autosync-mode)
</span></span><span style=display:flex><span>         (org-mode <span style=color:#f92672>.</span> (lambda () (setq-local time-stamp-active <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>                                       time-stamp-start <span style=color:#e6db74>&#34;#\\+MODIFIED:[ \t]*&#34;</span>
</span></span><span style=display:flex><span>                                       time-stamp-end <span style=color:#e6db74>&#34;$&#34;</span>
</span></span><span style=display:flex><span>                                       time-stamp-format <span style=color:#e6db74>&#34;\[%Y-%m-%d %3a %H:%M\]&#34;</span>)
</span></span><span style=display:flex><span>                       (add-hook <span style=color:#e6db74>&#39;before-save-hook</span> <span style=color:#e6db74>&#39;time-stamp</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#39;local</span>)))
</span></span><span style=display:flex><span>         (org-roam-mode <span style=color:#f92672>.</span> hide-mode-line-mode))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-roam-database-connector <span style=color:#e6db74>&#39;sqlite</span>)
</span></span><span style=display:flex><span>  (setq org-roam-db-gc-threshold most-positive-fixnum)
</span></span><span style=display:flex><span>  (setq org-roam-mode-sections
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((org-roam-backlinks-section :unique <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>          org-roam-reflinks-section
</span></span><span style=display:flex><span>          org-roam-unlinked-references-section))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (cl-defmethod org-roam-node-type ((node org-roam-node))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Return the TYPE of NODE.&#34;</span>
</span></span><span style=display:flex><span>    (condition-case <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>file-name-nondirectory</span>
</span></span><span style=display:flex><span>         (<span style=color:#a6e22e>directory-file-name</span>
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>file-name-directory</span>
</span></span><span style=display:flex><span>           (file-relative-name (org-roam-node-file node) org-roam-directory))))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>error</span> <span style=color:#e6db74>&#34;&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (cl-defmethod org-roam-node-directories ((node org-roam-node))
</span></span><span style=display:flex><span>    (if-let ((dirs (<span style=color:#a6e22e>file-name-directory</span> (file-relative-name (org-roam-node-file node) org-roam-directory))))
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;(%s)&#34;</span> (<span style=color:#a6e22e>car</span> (split-string dirs <span style=color:#e6db74>&#34;/&#34;</span>)))
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (cl-defmethod org-roam-node-backlinkscount ((node org-roam-node))
</span></span><span style=display:flex><span>    (let* ((count (caar (org-roam-db-query
</span></span><span style=display:flex><span>                         [:select (<span style=color:#a6e22e>funcall</span> count source)
</span></span><span style=display:flex><span>                                  :from links
</span></span><span style=display:flex><span>                                  :where (<span style=color:#a6e22e>=</span> dest $s1)
</span></span><span style=display:flex><span>                                  :and (<span style=color:#a6e22e>=</span> type <span style=color:#e6db74>&#34;id&#34;</span>)]
</span></span><span style=display:flex><span>                         (org-roam-node-id node)))))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;[%d]&#34;</span> count)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (cl-defmethod org-roam-node-doom-filetitle ((node org-roam-node))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Return the value of \&#34;#+title:\&#34; (if any) from file that NODE resides in.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>       If there&#39;s no file-level title in the file, return empty string.&#34;</span>
</span></span><span style=display:flex><span>    (or (if (<span style=color:#a6e22e>=</span> (org-roam-node-level node) <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>            (org-roam-node-title node)
</span></span><span style=display:flex><span>          (org-roam-get-keyword <span style=color:#e6db74>&#34;TITLE&#34;</span> (org-roam-node-file node)))
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (cl-defmethod org-roam-node-doom-hierarchy ((node org-roam-node))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Return hierarchy for NODE, constructed of its file title, OLP and direct title.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>       If some elements are missing, they will be stripped out.&#34;</span>
</span></span><span style=display:flex><span>    (let ((title     (org-roam-node-title node))
</span></span><span style=display:flex><span>          (olp       (org-roam-node-olp   node))
</span></span><span style=display:flex><span>          (level     (org-roam-node-level node))
</span></span><span style=display:flex><span>          (filetitle (org-roam-node-doom-filetitle node))
</span></span><span style=display:flex><span>          (separator (<span style=color:#a6e22e>propertize</span> <span style=color:#e6db74>&#34; &gt; &#34;</span> <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;shadow</span>)))
</span></span><span style=display:flex><span>      (cl-case level
</span></span><span style=display:flex><span>        <span style=color:#75715e>;; node is a top-level file</span>
</span></span><span style=display:flex><span>        (<span style=color:#ae81ff>0</span> filetitle)
</span></span><span style=display:flex><span>        <span style=color:#75715e>;; node is a level 1 heading</span>
</span></span><span style=display:flex><span>        (<span style=color:#ae81ff>1</span> (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>propertize</span> filetitle <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>&#39;</span>(shadow italic))
</span></span><span style=display:flex><span>                   separator title))
</span></span><span style=display:flex><span>        <span style=color:#75715e>;; node is a heading with an arbitrary outline path</span>
</span></span><span style=display:flex><span>        (<span style=color:#66d9ef>t</span> (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>propertize</span> filetitle <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>&#39;</span>(shadow italic))
</span></span><span style=display:flex><span>                   separator (<span style=color:#a6e22e>propertize</span> (string-join olp <span style=color:#e6db74>&#34; &gt; &#34;</span>) <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>&#39;</span>(shadow italic))
</span></span><span style=display:flex><span>                   separator title)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; è·å¾—æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´.</span>
</span></span><span style=display:flex><span>  (cl-defmethod org-roam-node-date ((node org-roam-node))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y-%m-%d&#34;</span> (org-roam-node-file-mtime node)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-roam-node-display-template
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;${type:4} ${backlinkscount:3} &#34;</span>
</span></span><span style=display:flex><span>                (<span style=color:#a6e22e>propertize</span> <span style=color:#e6db74>&#34;${doom-hierarchy:*}&#34;</span> <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;org-level-3</span>)
</span></span><span style=display:flex><span>                (<span style=color:#a6e22e>propertize</span> <span style=color:#e6db74>&#34;${tags:20}&#34;</span> <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;org-tag</span>)
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34; &#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-roam-capture-templates
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#e6db74>&#34;articles&#34;</span> plain <span style=color:#e6db74>&#34;%?&#34;</span>
</span></span><span style=display:flex><span>           :target (file+head <span style=color:#e6db74>&#34;articles/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>           :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;b&#34;</span> <span style=color:#e6db74>&#34;Books&#34;</span> plain (file <span style=color:#e6db74>&#34;~/.emacs.d/template/readinglog&#34;</span>)
</span></span><span style=display:flex><span>           :target (file+head <span style=color:#e6db74>&#34;books/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>           :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#e6db74>&#34;Diary&#34;</span> plain <span style=color:#e6db74>&#34;%?&#34;</span>
</span></span><span style=display:flex><span>           :target (file+datetree <span style=color:#e6db74>&#34;daily/&lt;%Y-%m&gt;.org&#34;</span> day))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;m&#34;</span> <span style=color:#e6db74>&#34;main&#34;</span> plain <span style=color:#e6db74>&#34;%?&#34;</span>
</span></span><span style=display:flex><span>           :target (file+head <span style=color:#e6db74>&#34;main/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>           :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#e6db74>&#34;people&#34;</span> plain (file <span style=color:#e6db74>&#34;~/.emacs.d/template/crm&#34;</span>)
</span></span><span style=display:flex><span>           :target (file+head <span style=color:#e6db74>&#34;crm/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>           :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#e6db74>&#34;reference&#34;</span> plain (file <span style=color:#e6db74>&#34;~/.emacs.d/template/reference&#34;</span>)
</span></span><span style=display:flex><span>           :target (file+head <span style=color:#e6db74>&#34;ref/${citekey}.org&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>           :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#e6db74>&#34;sources&#34;</span> plain <span style=color:#e6db74>&#34;%?&#34;</span>
</span></span><span style=display:flex><span>           :target (file+head <span style=color:#e6db74>&#34;sources/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>           :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;w&#34;</span> <span style=color:#e6db74>&#34;work&#34;</span> plain <span style=color:#e6db74>&#34;%?&#34;</span>
</span></span><span style=display:flex><span>           :target (file+head <span style=color:#e6db74>&#34;work/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>           :unnarrowed <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun my/org-roam-buffer-show (_)
</span></span><span style=display:flex><span>    (when (and
</span></span><span style=display:flex><span>           (not (<span style=color:#a6e22e>minibufferp</span>))
</span></span><span style=display:flex><span>           (not (<span style=color:#a6e22e>&gt;</span> <span style=color:#ae81ff>120</span> (frame-width)))
</span></span><span style=display:flex><span>           (not (derived-mode-p <span style=color:#e6db74>&#39;calendar-mode</span>))
</span></span><span style=display:flex><span>           (not (derived-mode-p <span style=color:#e6db74>&#39;org-agenda-mode</span>))
</span></span><span style=display:flex><span>           (xor (org-roam-file-p) (<span style=color:#a6e22e>eq</span> <span style=color:#e6db74>&#39;visible</span> (org-roam-buffer--visibility))))
</span></span><span style=display:flex><span>      (org-roam-buffer-toggle)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;window-buffer-change-functions</span> <span style=color:#e6db74>&#39;my/org-roam-buffer-show</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\*org-roam\\*&#34;</span>
</span></span><span style=display:flex><span>                 (display-buffer-reuse-window display-buffer-in-side-window)
</span></span><span style=display:flex><span>                 (side <span style=color:#f92672>.</span> right)
</span></span><span style=display:flex><span>                 (slot <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>                 (window-width <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.35</span>)
</span></span><span style=display:flex><span>                 (<span style=color:#a6e22e>window-parameters</span> <span style=color:#f92672>.</span> ((no-other-window <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>                                       (no-delete-other-windows <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>))))))
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;n&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Notes&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;nr&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-node-random :wk <span style=color:#e6db74>&#34;Random node&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;nf&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-node-find :wk <span style=color:#e6db74>&#34;Find node&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ni&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-node-insert :wk <span style=color:#e6db74>&#34;Insert node&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;na&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-alias-add :wk <span style=color:#e6db74>&#34;Add alias&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;nA&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-alias-remove :wk <span style=color:#e6db74>&#34;Remove alias&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;nt&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-tag-add :wk <span style=color:#e6db74>&#34;Add tag&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;nT&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-tag-remove :wk <span style=color:#e6db74>&#34;Remove tag&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;nd&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-dailies-goto-today :wk <span style=color:#e6db74>&#34;Goto today&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;References&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ra&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-ref-add :wk <span style=color:#e6db74>&#34;Ref add&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;rf&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-ref-find :wk <span style=color:#e6db74>&#34;Ref find&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;rr&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-ref-remove :wk <span style=color:#e6db74>&#34;Ref remove&#34;</span>))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org
</span></span><span style=display:flex><span>  :after evil
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (defun gpc/open-node-roam-ref-url ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Open the URL in this node&#39;s ROAM_REFS property, if one exists.&#34;</span>
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (when-let ((ref-url (org-entry-get-with-inheritance <span style=color:#e6db74>&#34;ROAM_REFS&#34;</span>)))
</span></span><span style=display:flex><span>      (browse-url ref-url)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (evil-collection-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;org-mode-map</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;zr&#34;</span> <span style=color:#e6db74>&#39;gpc/open-node-roam-ref-url</span>))
</span></span></code></pre></div><h4 id=org-roam-ui>org-roam-ui</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-roam-ui
</span></span><span style=display:flex><span>  :commands org-roam-ui-open
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-roam-ui-sync-theme <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-roam-ui-follow <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-roam-ui-update-on-save <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-roam-ui-open-on-start <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;nu&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore :wk <span style=color:#e6db74>&#34;Roam UI&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;nuu&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-ui-open :wk <span style=color:#e6db74>&#34;Open&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;nuz&#34;</span> <span style=color:#f92672>&#39;</span>(org-roam-ui-node-zoom :wk <span style=color:#e6db74>&#34;Node zoom&#34;</span>))
</span></span></code></pre></div><h4 id=consult-org-roam>consult-org-roam</h4><p>è¿™ä¸ªåŒ…æä¾›äº† 3 ä¸ªæœ‰ç”¨çš„å‡½æ•°ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œé“¾æ¥çš„ forward å’Œ backlink çš„è·³è½¬ï¼Œä»¥åŠè¿›è¡Œå†…å®¹çš„æŸ¥æ‰¾ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package consult-org-roam
</span></span><span style=display:flex><span>  :commands (consult-org-roam-backlinks consult-org-roam-forward-links))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ns&#34;</span> <span style=color:#f92672>&#39;</span>(consult-org-roam-search :wk <span style=color:#e6db74>&#34;Search&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil</span>
</span></span><span style=display:flex><span>  (evil-collection-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;org-mode-map</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;zb&#34;</span> <span style=color:#e6db74>&#39;consult-org-roam-backlinks</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;zf&#34;</span> <span style=color:#e6db74>&#39;consult-org-roam-forward-links</span>))
</span></span></code></pre></div><h4 id=consult-notes>consult-notes</h4><p>è¿™ä¸ªåŒ…ç»“åˆ denote æ¯”è¾ƒå¥½ç”¨ï¼Œä¸éœ€è¦ç»“åˆ org-roam ä½¿ç”¨ã€‚</p><p>å› ä¸ºæˆ‘å·±ç»ä¸ä½¿ç”¨ deft è€Œæ˜¯ä½¿ç”¨ consult-notes æ¥ç®¡ç†è‡ªå·±å†™çš„åšå®¢ã€‚ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°æ¥åˆ›å»ºæ–°çš„æ–‡ç« ï¼Œ consult-notes åªèƒ½ç”¨äºæŸ¥è¯¢ï¼Œæ— æ–°å»ºæ–‡ä»¶çš„åŠŸèƒ½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package consult-notes
</span></span><span style=display:flex><span>  :after consult
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq consult-notes-file-dir-sources
</span></span><span style=display:flex><span>        <span style=color:#f92672>`</span>((<span style=color:#e6db74>&#34;Articles&#34;</span>  <span style=color:#e6db74>?a</span>  <span style=color:#f92672>,</span>(<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/articles&#34;</span>))))
</span></span><span style=display:flex><span>  (defun my/new-article (article)
</span></span><span style=display:flex><span>    (interactive <span style=color:#e6db74>&#34;sTitle: &#34;</span>)
</span></span><span style=display:flex><span>    (let ((filename (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;%s&#34;</span> article))
</span></span><span style=display:flex><span>          (ext <span style=color:#e6db74>&#34;.org&#34;</span>))
</span></span><span style=display:flex><span>      (find-file (<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/articles/&#34;</span> filename ext))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;#+TITLE: &#34;</span> article <span style=color:#e6db74>&#34;\n&#34;</span>)
</span></span><span style=display:flex><span>      (tempel-insert <span style=color:#e6db74>&#39;hugo</span>)))
</span></span><span style=display:flex><span>  (my/space-leader-def
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;nc&#34;</span> <span style=color:#f92672>&#39;</span>(my/new-article :wk <span style=color:#e6db74>&#34;Create article&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;nn&#34;</span> <span style=color:#f92672>&#39;</span>(consult-notes :wk <span style=color:#e6db74>&#34;Consult notes&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package consult-notes-org-roam
</span></span><span style=display:flex><span>  :commands consult-notes-org-roam-find-node-relation
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (my/space-leader-def
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;nv&#34;</span> <span style=color:#f92672>&#39;</span>(consult-notes-org-roam-find-node-relation :wk <span style=color:#e6db74>&#34;Node navigation&#34;</span>)))
</span></span></code></pre></div><h4 id=org-transclusion>org-transclusion</h4><p>è¿™é‡Œéœ€è¦ç»“åˆ <a href=#fringe-mode>fringe-mode</a> ä½¿ç”¨ï¼Œä¸èƒ½å®Œå…¨éšè— fringe, å¦åˆ™ä¼šæ²¡æœ‰æ•ˆæœã€‚æˆ‘è®¾ç½®çš„æ˜¯ minimal.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-transclusion
</span></span><span style=display:flex><span>  :commands (org-transclusion-make-from-link org-transclusion-add org-transclusion-add-all)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (face-spec-set <span style=color:#e6db74>&#39;org-transclusion-fringe</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>                    :foreground <span style=color:#e6db74>&#34;black&#34;</span>)
</span></span><span style=display:flex><span>                   (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>                    :foreground <span style=color:#e6db74>&#34;white&#34;</span>))
</span></span><span style=display:flex><span>                 <span style=color:#e6db74>&#39;face-override-spec</span>)
</span></span><span style=display:flex><span>  (face-spec-set <span style=color:#e6db74>&#39;org-transclusion-source-fringe</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>                    :foreground <span style=color:#e6db74>&#34;black&#34;</span>)
</span></span><span style=display:flex><span>                   (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>                    :foreground <span style=color:#e6db74>&#34;white&#34;</span>))
</span></span><span style=display:flex><span>                 <span style=color:#e6db74>&#39;face-override-spec</span>))
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ot&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Transclusion&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ota&#34;</span> <span style=color:#f92672>&#39;</span>(org-transclusion-add :wk <span style=color:#e6db74>&#34;Add&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;otA&#34;</span> <span style=color:#f92672>&#39;</span>(org-transclusion-add-all :wk <span style=color:#e6db74>&#34;Add all&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;otr&#34;</span> <span style=color:#f92672>&#39;</span>(org-transclusion-remove :wk <span style=color:#e6db74>&#34;Remove&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;otR&#34;</span> <span style=color:#f92672>&#39;</span>(org-transclusion-remove-all :wk <span style=color:#e6db74>&#34;Remove all&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;otg&#34;</span> <span style=color:#f92672>&#39;</span>(org-transclusion-refresh :wk <span style=color:#e6db74>&#34;Refresh&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;otm&#34;</span> <span style=color:#f92672>&#39;</span>(org-transclusion-make-from-link :wk <span style=color:#e6db74>&#34;Make link&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;oto&#34;</span> <span style=color:#f92672>&#39;</span>(org-transclusion-open-source :wk <span style=color:#e6db74>&#34;Open source&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ote&#34;</span> <span style=color:#f92672>&#39;</span>(org-transclusion-live-sync-start :wk <span style=color:#e6db74>&#34;Edit live&#34;</span>))
</span></span></code></pre></div><h3 id=dynamic-org-agenda>dynamic org-agenda</h3><p>vulpea to build dynamic agenda.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; (autoload &#39;vulpea-buffer-tags-get &#34;vulpea&#34; &#34;&#34; t) ;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (autoload &#39;vulpea-buffer-tags-add &#34;vulpea&#34; &#34;&#34; t)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (autoload &#39;vulpea-buffer-tags-remove &#34;vulpea&#34; &#34;&#34; t)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (autoload &#39;vulpea-buffer-prop-set &#34;vulpea&#34; &#34;&#34; t)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (autoload &#39;vulpea-buffer-prop-get &#34;vulpea&#34; &#34;&#34; t)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (autoload &#39;vulpea-buffer-prop-set-list &#34;vulpea&#34; &#34;&#34; t)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (autoload &#39;vulpea-buffer-prop-get-list &#34;vulpea&#34; &#34;&#34; t)</span>
</span></span><span style=display:flex><span>(use-package vulpea
</span></span><span style=display:flex><span>  :after org-roam
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (defun vulpea-project-p ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Return non-nil if current buffer has any todo entry.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  TODO entries marked as done are ignored, meaning the this
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  function returns nil if current buffer contains only completed
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  tasks.&#34;</span>
</span></span><span style=display:flex><span>    (seq-find                                 <span style=color:#75715e>; (3)</span>
</span></span><span style=display:flex><span>     (lambda (type)
</span></span><span style=display:flex><span>       (or (<span style=color:#a6e22e>eq</span> type <span style=color:#e6db74>&#39;todo</span>)
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>eq</span> type <span style=color:#e6db74>&#39;done</span>)))
</span></span><span style=display:flex><span>     (org-element-map                         <span style=color:#75715e>; (2)</span>
</span></span><span style=display:flex><span>         (org-element-parse-buffer <span style=color:#e6db74>&#39;headline</span>) <span style=color:#75715e>; (1)</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#39;headline</span>
</span></span><span style=display:flex><span>       (lambda (h)
</span></span><span style=display:flex><span>         (org-element-property :todo-type h)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun vulpea-buffer-p ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Return non-nil if the currently visited buffer is a note.&#34;</span>
</span></span><span style=display:flex><span>    (and <span style=color:#a6e22e>buffer-file-name</span>
</span></span><span style=display:flex><span>         (string-prefix-p
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>expand-file-name</span> (<span style=color:#a6e22e>file-name-as-directory</span> org-roam-directory))
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>file-name-directory</span> <span style=color:#a6e22e>buffer-file-name</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun vulpea-project-update-tag ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Update PROJECT tag in the current buffer.&#34;</span>
</span></span><span style=display:flex><span>    (when (and (not (<span style=color:#a6e22e>active-minibuffer-window</span>))
</span></span><span style=display:flex><span>               (vulpea-buffer-p))
</span></span><span style=display:flex><span>      (save-excursion
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>point-min</span>))
</span></span><span style=display:flex><span>        (let* ((tags (vulpea-buffer-tags-get))
</span></span><span style=display:flex><span>               (original-tags tags))
</span></span><span style=display:flex><span>          (if (vulpea-project-p)
</span></span><span style=display:flex><span>              (setq tags (<span style=color:#a6e22e>cons</span> <span style=color:#e6db74>&#34;project&#34;</span> tags))
</span></span><span style=display:flex><span>            (setq tags (remove <span style=color:#e6db74>&#34;project&#34;</span> tags)))
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; cleanup duplicates</span>
</span></span><span style=display:flex><span>          (setq tags (seq-uniq tags))
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; update tags if changed</span>
</span></span><span style=display:flex><span>          (when (or (seq-difference tags original-tags)
</span></span><span style=display:flex><span>                    (seq-difference original-tags tags))
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>apply</span> <span style=color:#a6e22e>#&#39;</span>vulpea-buffer-tags-set tags))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun vulpea-project-files ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Return a list of note files containing &#39;project&#39; tag.&#34;</span> <span style=color:#75715e>;</span>
</span></span><span style=display:flex><span>    (seq-uniq
</span></span><span style=display:flex><span>     (seq-map
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>#&#39;car</span>
</span></span><span style=display:flex><span>      (org-roam-db-query
</span></span><span style=display:flex><span>       [:select [nodes:file]
</span></span><span style=display:flex><span>                :from tags
</span></span><span style=display:flex><span>                :left-join nodes
</span></span><span style=display:flex><span>                :on (<span style=color:#a6e22e>=</span> tags:node-id nodes:id)
</span></span><span style=display:flex><span>                :where (like tag (quote <span style=color:#e6db74>&#34;%\&#34;project\&#34;%&#34;</span>))]))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun vulpea-agenda-files-update (<span style=color:#66d9ef>&amp;rest</span> _)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Update the value of </span><span style=color:#e6db74>`org-agenda-files&#39;</span><span style=color:#e6db74>.&#34;</span>
</span></span><span style=display:flex><span>    (setq org-agenda-files (seq-uniq
</span></span><span style=display:flex><span>                            (<span style=color:#a6e22e>append</span>
</span></span><span style=display:flex><span>                             (vulpea-project-files)
</span></span><span style=display:flex><span>                             <span style=color:#f92672>`</span>(<span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;todos/gtd.org&#34;</span> my-galaxy))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;find-file-hook</span> <span style=color:#a6e22e>#&#39;</span>vulpea-agenda-files-update)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;org-agenda</span> :before <span style=color:#a6e22e>#&#39;</span>vulpea-agenda-files-update)
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;org-todo-list</span> :before <span style=color:#a6e22e>#&#39;</span>vulpea-agenda-files-update)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;find-file-hook</span> <span style=color:#a6e22e>#&#39;</span>vulpea-project-update-tag)
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;before-save-hook</span> <span style=color:#a6e22e>#&#39;</span>vulpea-project-update-tag))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/gtd-file ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;todos/gtd.org&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fog&#34;</span> <span style=color:#f92672>&#39;</span>(my/gtd-file :wk <span style=color:#e6db74>&#34;GTD file&#34;</span>))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-agenda
</span></span><span style=display:flex><span>  :after org
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;&lt;f12&gt;&#34;</span> <span style=color:#f92672>.</span> my/org-agenda)
</span></span><span style=display:flex><span>  :hook (org-agenda-finalize <span style=color:#f92672>.</span> <span style=color:#a6e22e>#&#39;</span>org-agenda-find-same-or-today-or-agenda)
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (setq org-agenda-files (directory-files-recursively (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;todos&#34;</span> my-galaxy) <span style=color:#e6db74>&#34;org$\\|archive$&#34;</span>))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-agenda-dim-blocked-tasks <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-agenda-compact-blocks <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-agenda-window-setup <span style=color:#e6db74>&#39;other-tab</span>)
</span></span><span style=display:flex><span>  (setq org-agenda-align-tags-to-column <span style=color:#ae81ff>-120</span>)
</span></span><span style=display:flex><span>  (setq org-agenda-custom-commands
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;R&#34;</span> <span style=color:#e6db74>&#34;Review projects&#34;</span> tags-todo <span style=color:#e6db74>&#34;-CANCELLED/&#34;</span>
</span></span><span style=display:flex><span>           ((org-agenda-overriding-header <span style=color:#e6db74>&#34;Reviews Scheduled&#34;</span>)
</span></span><span style=display:flex><span>            (org-agenda-skip-function <span style=color:#e6db74>&#39;org-review-agenda-skip</span>)
</span></span><span style=display:flex><span>            (org-agenda-cmp-user-defined <span style=color:#e6db74>&#39;org-review-compare</span>)))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;A&#34;</span> <span style=color:#e6db74>&#34;Archive&#34;</span>
</span></span><span style=display:flex><span>           ((todo <span style=color:#e6db74>&#34;DONE|CNCL&#34;</span>
</span></span><span style=display:flex><span>                  ((org-agenda-prefix-format <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>                   (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                   (org-agenda-overriding-header <span style=color:#e6db74>&#34;Archive&#34;</span>)))))
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34; &#34;</span> <span style=color:#e6db74>&#34;GTD Lists: Daily agenda and tasks&#34;</span>
</span></span><span style=display:flex><span>           ((agenda <span style=color:#e6db74>&#34;&#34;</span> ((org-agenda-span <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>                        (org-deadline-warning-days <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>                        (org-agenda-block-separator <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>                        (org-scheduled-past-days <span style=color:#ae81ff>365</span>)
</span></span><span style=display:flex><span>                        (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-day-face-function (lambda (date) <span style=color:#e6db74>&#39;org-agenda-date</span>))
</span></span><span style=display:flex><span>                        (org-agenda-format-date <span style=color:#e6db74>&#34;%A %-e %B %Y&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-prefix-format <span style=color:#e6db74>&#34; %i %?-12t% s&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-overriding-header <span style=color:#e6db74>&#34;Today&#39;s agenda&#34;</span>)))
</span></span><span style=display:flex><span>            (tags-todo <span style=color:#e6db74>&#34;*&#34;</span>
</span></span><span style=display:flex><span>                       ((org-agenda-skip-function
</span></span><span style=display:flex><span>                         <span style=color:#f92672>`</span>(org-agenda-skip-entry-if <span style=color:#e6db74>&#39;deadline</span>
</span></span><span style=display:flex><span>                                                    <span style=color:#e6db74>&#39;schedule</span>
</span></span><span style=display:flex><span>                                                    <span style=color:#e6db74>&#39;timestamp</span>
</span></span><span style=display:flex><span>                                                    <span style=color:#e6db74>&#39;notregexp</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;\\[#%s\\]&#34;</span> (<span style=color:#a6e22e>char-to-string</span> org-priority-highest))))
</span></span><span style=display:flex><span>                        (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-prefix-format <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-overriding-header <span style=color:#e6db74>&#34;Important tasks without a date&#34;</span>)))
</span></span><span style=display:flex><span>            (todo <span style=color:#e6db74>&#34;NEXT&#34;</span>
</span></span><span style=display:flex><span>                  ((org-agenda-skip-function <span style=color:#f92672>&#39;</span>(org-agenda-skip-if <span style=color:#66d9ef>nil</span> <span style=color:#f92672>&#39;</span>(timestamp)))
</span></span><span style=display:flex><span>                   (org-agenda-prefix-format <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>                   (org-agenda-block-separator <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>                   (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                   (org-agenda-overriding-header <span style=color:#e6db74>&#34;Next tasks list&#34;</span>)))
</span></span><span style=display:flex><span>            (tags-todo <span style=color:#e6db74>&#34;-Reading/INPROGRESS&#34;</span>
</span></span><span style=display:flex><span>                       ((org-agenda-block-separator <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>                        (org-agenda-skip-function <span style=color:#f92672>&#39;</span>(org-agenda-skip-if <span style=color:#66d9ef>nil</span> <span style=color:#f92672>&#39;</span>(timestamp)))
</span></span><span style=display:flex><span>                        (org-agenda-prefix-format <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-overriding-header <span style=color:#e6db74>&#34;Inprogress tasks list&#34;</span>)))
</span></span><span style=display:flex><span>            (tags-todo <span style=color:#e6db74>&#34;-Computer-Emacs-Reading/TODO&#34;</span>
</span></span><span style=display:flex><span>                       ((org-agenda-skip-function
</span></span><span style=display:flex><span>                         <span style=color:#f92672>`</span>(org-agenda-skip-entry-if <span style=color:#e6db74>&#39;deadline</span>
</span></span><span style=display:flex><span>                                                    <span style=color:#e6db74>&#39;schedule</span>
</span></span><span style=display:flex><span>                                                    <span style=color:#e6db74>&#39;timestamp</span>
</span></span><span style=display:flex><span>                                                    <span style=color:#e6db74>&#39;regexp</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;\\[#%s\\]&#34;</span> (<span style=color:#a6e22e>char-to-string</span> org-priority-highest))))
</span></span><span style=display:flex><span>                        (org-agenda-prefix-format <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-block-separator <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>                        (org-agenda-overriding-header <span style=color:#e6db74>&#34;Todo tasks list&#34;</span>)))
</span></span><span style=display:flex><span>            (tags-todo <span style=color:#e6db74>&#34;Emacs|Computer&#34;</span>
</span></span><span style=display:flex><span>                       ((org-agenda-block-separator <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>                        (org-agenda-skip-function <span style=color:#f92672>&#39;</span>(org-agenda-skip-if <span style=color:#66d9ef>nil</span> <span style=color:#f92672>&#39;</span>(timestamp)))
</span></span><span style=display:flex><span>                        (org-agenda-prefix-format <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-overriding-header <span style=color:#e6db74>&#34;Computer science&#34;</span>)))
</span></span><span style=display:flex><span>            (tags-todo <span style=color:#e6db74>&#34;Family&#34;</span>
</span></span><span style=display:flex><span>                       ((org-agenda-skip-function <span style=color:#f92672>&#39;</span>(org-agenda-skip-if <span style=color:#66d9ef>nil</span> <span style=color:#f92672>&#39;</span>(timestamp)))
</span></span><span style=display:flex><span>                        (org-agenda-prefix-format <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-block-separator <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>                        (org-agenda-overriding-header <span style=color:#e6db74>&#34;Family&#34;</span>)))
</span></span><span style=display:flex><span>            (tags-todo <span style=color:#e6db74>&#34;Reading&#34;</span>
</span></span><span style=display:flex><span>                       ((org-agenda-skip-function <span style=color:#f92672>&#39;</span>(org-agenda-skip-if <span style=color:#66d9ef>nil</span> <span style=color:#f92672>&#39;</span>(timestamp)))
</span></span><span style=display:flex><span>                        (org-agenda-prefix-format <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                        (org-agenda-block-separator <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>                        (org-agenda-overriding-header <span style=color:#e6db74>&#34;Reading Lists&#34;</span>)))
</span></span><span style=display:flex><span>            (todo <span style=color:#e6db74>&#34;WAIT|SOMEDAY&#34;</span>
</span></span><span style=display:flex><span>                  ((org-agenda-block-separator <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>                   (org-agenda-prefix-format <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>                   (org-agenda-hide-tags-regexp <span style=color:#e6db74>&#34;project&#34;</span>)
</span></span><span style=display:flex><span>                   (org-agenda-overriding-header <span style=color:#e6db74>&#34;Tasks on hold&#34;</span>)))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-agenda-category-icon-alist
</span></span><span style=display:flex><span>        <span style=color:#f92672>`</span>((<span style=color:#e6db74>&#34;\\</span><span style=color:#e6db74>`gtd\\&#39;</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>           (<span style=color:#f92672>#(</span><span style=color:#e6db74>&#34;ï‚® &#34;</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span> (rear-nonsticky <span style=color:#66d9ef>t</span> display (raise <span style=color:#ae81ff>0.0</span>)
</span></span><span style=display:flex><span>                                       font-lock-face
</span></span><span style=display:flex><span>                                       (:family <span style=color:#e6db74>&#34;FontAwesome&#34;</span> :height <span style=color:#ae81ff>1.0</span>)
</span></span><span style=display:flex><span>                                       face
</span></span><span style=display:flex><span>                                       (:family <span style=color:#e6db74>&#34;FontAwesome&#34;</span> :height <span style=color:#ae81ff>1.0</span>))))
</span></span><span style=display:flex><span>           <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>nil</span> :ascent center)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;\\\cc\\\|[a-zA-z0-9]*&#34;</span>
</span></span><span style=display:flex><span>           (<span style=color:#f92672>#(</span><span style=color:#e6db74>&#34;î¯ &#34;</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span> (rear-nonsticky <span style=color:#66d9ef>t</span> display (raise <span style=color:#ae81ff>0.0</span>)
</span></span><span style=display:flex><span>                                       font-lock-face
</span></span><span style=display:flex><span>                                       (:family <span style=color:#e6db74>&#34;FontAwesome&#34;</span> :height <span style=color:#ae81ff>1.0</span>)
</span></span><span style=display:flex><span>                                       face
</span></span><span style=display:flex><span>                                       (:family <span style=color:#e6db74>&#34;FontAwesome&#34;</span> :height <span style=color:#ae81ff>1.0</span>))))
</span></span><span style=display:flex><span>           <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>nil</span> :ascent center)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun my/org-agenda ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Open my </span><span style=color:#e6db74>`org-agenda&#39;</span><span style=color:#e6db74>.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Run </span><span style=color:#e6db74>`org-roam-db-sync&#39;</span><span style=color:#e6db74> to get full lists of org agenda files.&#34;</span>
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (if (<span style=color:#a6e22e>eq</span> major-mode <span style=color:#e6db74>&#39;org-agenda-mode</span>)
</span></span><span style=display:flex><span>        (org-agenda-redo-all)
</span></span><span style=display:flex><span>      (org-agenda <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#e6db74>&#34; &#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun my/org-agenda-query ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Open my </span><span style=color:#e6db74>`org-agenda&#39;</span><span style=color:#e6db74> and </span><span style=color:#e6db74>`m&#39;</span><span style=color:#e6db74>.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  Run </span><span style=color:#e6db74>`org-roam-db-sync&#39;</span><span style=color:#e6db74> to get full lists of org agenda files.&#34;</span>
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (org-roam-db-sync)
</span></span><span style=display:flex><span>    (org-agenda <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#e6db74>&#34;m&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun my/org-inprogress-tasks ()
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (org-todo-list <span style=color:#e6db74>&#34;INPROGRESS&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (my/space-leader-def
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;o&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Org&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;oa&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Agenda&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;oaa&#34;</span> <span style=color:#f92672>&#39;</span>(my/org-agenda :wk <span style=color:#e6db74>&#34;Agenda&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;oaq&#34;</span> <span style=color:#f92672>&#39;</span>(my/org-agenda-query :wk <span style=color:#e6db74>&#34;Query&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;oat&#34;</span> <span style=color:#f92672>&#39;</span>(org-todo-list :wk <span style=color:#e6db74>&#34;Todo list&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;oav&#34;</span> <span style=color:#f92672>&#39;</span>(org-search-view :wk <span style=color:#e6db74>&#34;View search&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;oai&#34;</span> <span style=color:#f92672>&#39;</span>(my/org-inprogress-tasks :wk <span style=color:#e6db74>&#34;Inprogess tasks&#34;</span>)))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(run-with-idle-timer <span style=color:#ae81ff>300</span> <span style=color:#66d9ef>t</span> (lambda ()
</span></span><span style=display:flex><span>                             (progn
</span></span><span style=display:flex><span>                             (svg-clock)
</span></span><span style=display:flex><span>                             (hide-mode-line-mode))))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-agenda
</span></span><span style=display:flex><span>  :after evil
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (evil-set-initial-state <span style=color:#e6db74>&#39;org-agenda-mode</span> <span style=color:#e6db74>&#39;motion</span>)
</span></span><span style=display:flex><span>  (evil-define-key <span style=color:#e6db74>&#39;motion</span> org-agenda-mode-map
</span></span><span style=display:flex><span>    (kbd <span style=color:#e6db74>&#34;RET&#34;</span>) <span style=color:#e6db74>&#39;org-agenda-switch-to</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gj&#34;</span> <span style=color:#e6db74>&#39;org-agenda-next-item</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gr&#34;</span> <span style=color:#e6db74>&#39;org-agenda-redo</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gR&#34;</span> <span style=color:#e6db74>&#39;org-agenda-redo-all</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;t&#34;</span> <span style=color:#e6db74>&#39;org-agenda-todo</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;u&#34;</span> <span style=color:#e6db74>&#39;org-agenda-undo</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;I&#34;</span> <span style=color:#e6db74>&#39;org-agenda-clock-in</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;O&#34;</span> <span style=color:#e6db74>&#39;org-agenda-clock-out</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;cg&#34;</span> <span style=color:#e6db74>&#39;org-agenda-clock-goto</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;cc&#34;</span> <span style=color:#e6db74>&#39;org-agenda-clock-cancel</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;cr&#34;</span> <span style=color:#e6db74>&#39;org-agenda-clockreport-mode</span>))
</span></span></code></pre></div><h3 id=calendar-and-appt>calendar and appt</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package calendar
</span></span><span style=display:flex><span>  :commands calendar
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq calendar-view-diary-initially-flag <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq calendar-mark-diary-entries-flag <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq calendar-mode-line-format <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq calendar-date-style <span style=color:#e6db74>&#39;iso</span>)
</span></span><span style=display:flex><span>  (setq calendar-date-display-form calendar-iso-date-display-form)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq calendar-time-display-form
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(24-hours <span style=color:#e6db74>&#34;:&#34;</span> minutes
</span></span><span style=display:flex><span>                   (when time-zone
</span></span><span style=display:flex><span>                     (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;(%s)&#34;</span> time-zone))))
</span></span><span style=display:flex><span>  (setq diary-date-forms diary-iso-date-forms)
</span></span><span style=display:flex><span>  :hook (calendar-today-visible <span style=color:#f92672>.</span> <span style=color:#a6e22e>#&#39;</span>calendar-mark-today))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#f92672>&#39;</span>(calendar :wk <span style=color:#e6db74>&#34;Calendar&#34;</span>))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package appt
</span></span><span style=display:flex><span>  :after calendar
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq appt-display-diary <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq appt-disp-window-function <span style=color:#a6e22e>#&#39;</span>appt-disp-window)
</span></span><span style=display:flex><span>  (setq appt-display-mode-line <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq appt-display-interval <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>  (setq appt-audible <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq appt-warning-time-regexp <span style=color:#e6db74>&#34;appt \\([0-9]+\\)&#34;</span>)
</span></span><span style=display:flex><span>  (setq appt-message-warning-time <span style=color:#ae81ff>6</span>)
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;diary-mode-hook</span> <span style=color:#a6e22e>#&#39;</span>appt-activate))
</span></span></code></pre></div><p>Use diary-lib to write diary. å…³äºè¿™ä¸ªçš„ä½¿ç”¨å¯ä»¥è§ï¼š<a href="https://www.youtube.com/watch?v=NkhgIB64zgc">Emacs: Diary and Calendar - YouTube</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package diary-lib
</span></span><span style=display:flex><span>  :after calendar
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;diary-list-entries-hook</span> <span style=color:#a6e22e>#&#39;</span>diary-sort-entries)
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;diary-mode-hook</span> <span style=color:#a6e22e>#&#39;</span>goto-address-mode)
</span></span><span style=display:flex><span>  (setq diary-display-function <span style=color:#a6e22e>#&#39;</span>diary-fancy-display)
</span></span><span style=display:flex><span>  (setq diary-header-line-format <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq diary-list-include-blanks <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq diary-abbreviated-year-flag <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq diary-number-of-entries <span style=color:#ae81ff>7</span>)
</span></span><span style=display:flex><span>  (setq diary-comment-start <span style=color:#e6db74>&#34;);;&#34;</span>)
</span></span><span style=display:flex><span>  (setq diary-comment-end <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>  (setq diary-nonmarking-symbol <span style=color:#e6db74>&#34;!&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq diary-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;diary/diary.org&#34;</span> my-galaxy)))
</span></span></code></pre></div><h3 id=zen>Zen</h3><p>Zen Mode æˆ–è€…å«ç¦…æ¨¡å¼ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†é™ä½ä¸ç›¸å…³å› ç´ å¯¹äºå¿ƒæ™ºçš„å¹²æŒ ã€‚å°†è‡ªå·±çš„è§†é‡é›†ä¸­äºå¯è§çš„åŒºåŸŸï¼Œä¸éœ€è¦ç§»åŠ¨è„‘è¢‹ã€‚</p><p>åœ¨ Emacs ä¸Šæœ‰ä¸¤ä¸ªç›¸å…³çš„åŒ…ï¼Œä¸€ä¸ªæ˜¯ <code>olivetti</code>, å¦å¤–ä¸€ä¸ªæ˜¯ <code>writeroom-mode</code>. <code>olivetti</code> çš„åŠŸèƒ½æ›´å•ä¸€ä¸€äº›ï¼Œä½†æ˜¯è¶³å¤Ÿä½¿ç”¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package olivetti
</span></span><span style=display:flex><span>  :commands olivetti-mode)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil</span>
</span></span><span style=display:flex><span>  (evil-define-key <span style=color:#e6db74>&#39;nromal</span> <span style=color:#e6db74>&#39;org-mode-map</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;zw&#34;</span> <span style=color:#e6db74>&#39;olivetti-mode</span>))
</span></span></code></pre></div><h3 id=toc>TOC</h3><p>åœ¨ Org æ–‡ä»¶çš„é¡¶éƒ¨ç”Ÿæˆç›®å½•ã€‚<a href=https://github.com/snosov1/toc-org>snosov1/toc-org: toc-org is an Emacs utility to have an up-to-date table of contents in the org files without exporting (useful primarily for readme files on GitHub)</a></p><p>éœ€è¦åœ¨æ–‡ä»¶çš„å¤´éƒ¨æ–°å»ºä¸€ä¸ª heading å¹¶åŠ ä¸Š tagï¼štoc.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package toc-org
</span></span><span style=display:flex><span>  :hook (org-mode <span style=color:#f92672>.</span> toc-org-mode))
</span></span></code></pre></div><h3 id=org-super-star>org-super-star</h3><p><a href=https://github.com/integral-dw/org-superstar-mode>integral-dw/org-superstar-mode: Make org-mode stars a little more super</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-superstar
</span></span><span style=display:flex><span>  :hook (org-mode <span style=color:#f92672>.</span> org-superstar-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-superstar-headline-bullets-list <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;â¶&#34;</span> <span style=color:#e6db74>&#34;â·&#34;</span> <span style=color:#e6db74>&#34;â¸&#34;</span> <span style=color:#e6db74>&#34;â¹&#34;</span> <span style=color:#e6db74>&#34;âº&#34;</span> <span style=color:#e6db74>&#34;â»&#34;</span> <span style=color:#e6db74>&#34;â¼&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; (setq org-superstar-headline-bullets-list &#39;(&#34;1&#34; &#34;2&#34; &#34;3&#34; &#34;4&#34; &#34;5&#34; &#34;6&#34; &#34;7&#34;))</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; (setq org-superstar-headline-bullets-list &#39;(&#34;â‘ &#34; &#34;â‘¡&#34; &#34;â‘¢&#34; &#34;â‘£&#34; &#34;â‘¤&#34; &#34;â‘¥&#34;))</span>
</span></span><span style=display:flex><span>  (setq org-hide-leading-stars <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><h3 id=org-download>org-download</h3><p>ç”¨äºç®¡ç†å›¾ç‰‡ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-download
</span></span><span style=display:flex><span>  :commands org-download-enable
</span></span><span style=display:flex><span>  :hook (org-mode <span style=color:#f92672>.</span> org-download-enable)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-download-image-dir (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;pictures&#34;</span> my-galaxy))
</span></span><span style=display:flex><span>  (setq org-download-screenshot-method <span style=color:#e6db74>&#39;screencapture</span>)
</span></span><span style=display:flex><span>  (setq org-download-abbreviate-filename-function <span style=color:#e6db74>&#39;expand-file-name</span>)
</span></span><span style=display:flex><span>  (setq org-download-timestamp <span style=color:#e6db74>&#34;%Y%m%d%H%M%S&#34;</span>)
</span></span><span style=display:flex><span>  (setq org-download-display-inline-images <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq org-download-heading-lvl <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq org-download-annotate-function (lambda (_link) <span style=color:#e6db74>&#34;&#34;</span>))
</span></span><span style=display:flex><span>  (setq org-download-image-attr-list <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;#+NAME: fig: &#34;</span>
</span></span><span style=display:flex><span>                                       <span style=color:#e6db74>&#34;#+CAPTION: &#34;</span>
</span></span><span style=display:flex><span>                                       <span style=color:#e6db74>&#34;#+ATTR_ORG: :width 500px&#34;</span>
</span></span><span style=display:flex><span>                                       <span style=color:#e6db74>&#34;#+ATTR_LATEX: :width 10cm :placement [!htpb]&#34;</span>
</span></span><span style=display:flex><span>                                       <span style=color:#e6db74>&#34;#+ATTR_HTML: :width 600px&#34;</span>)))
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;od&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Download&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;odc&#34;</span> <span style=color:#f92672>&#39;</span>(org-download-clipboard :wk <span style=color:#e6db74>&#34;Download Clipboard&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ody&#34;</span> <span style=color:#f92672>&#39;</span>(org-download-yank :wk <span style=color:#e6db74>&#34;Download Yank&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;odr&#34;</span> <span style=color:#f92672>&#39;</span>(org-download-rename-last-file :wk <span style=color:#e6db74>&#34;Rename last file&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;odR&#34;</span> <span style=color:#f92672>&#39;</span>(org-download-rename-at-point :wk <span style=color:#e6db74>&#34;Rename point&#34;</span>))
</span></span></code></pre></div><h3 id=org-appear>org-appear</h3><p>åœ¨ org ä¸­ç»å¸¸ä½¿ç”¨é“¾æ¥ï¼Œä½¿ Org å…ƒç´ çš„ä¸å¯è§éƒ¨åˆ†æ˜¾ç¤ºä¸ºå¯è§ã€‚ç»“åˆ Evil ä½¿ç”¨ï¼Œå¯¹äºé“¾æ¥çš„ç¼–è¾‘å¾ˆæ–¹ä¾¿ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-appear
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-appear-autolinks <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-appear-trigger <span style=color:#e6db74>&#39;manual</span>)
</span></span><span style=display:flex><span>  :hook ((org-mode <span style=color:#f92672>.</span> (lambda ()
</span></span><span style=display:flex><span>                       (add-hook <span style=color:#e6db74>&#39;evil-insert-state-entry-hook</span>
</span></span><span style=display:flex><span>                                 <span style=color:#a6e22e>#&#39;</span>org-appear-manual-start
</span></span><span style=display:flex><span>                                 <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>                                 <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>                       (add-hook <span style=color:#e6db74>&#39;evil-insert-state-exit-hook</span>
</span></span><span style=display:flex><span>                                 <span style=color:#a6e22e>#&#39;</span>org-appear-manual-stop
</span></span><span style=display:flex><span>                                 <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>                                 <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>         (org-mode <span style=color:#f92672>.</span> org-appear-mode)))
</span></span></code></pre></div><h3 id=math-preview>math-preview</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package math-preview
</span></span><span style=display:flex><span>  :commands (math-preview-all math-preview-at-point)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq math-preview-scale <span style=color:#ae81ff>1.1</span>)
</span></span><span style=display:flex><span>  (setq math-preview-raise <span style=color:#ae81ff>0.3</span>)
</span></span><span style=display:flex><span>  (setq math-preview-margin <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;mpa&#34;</span> <span style=color:#f92672>&#39;</span>(math-preview-all :wk <span style=color:#e6db74>&#34;All&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;mpA&#34;</span> <span style=color:#f92672>&#39;</span>(math-preview-clear-all :wk <span style=color:#e6db74>&#34;Clear All&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;mpp&#34;</span> <span style=color:#f92672>&#39;</span>(math-preview-at-point :wk <span style=color:#e6db74>&#34;Point&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;mpP&#34;</span> <span style=color:#f92672>&#39;</span>(math-preview-clear-at-point :wk <span style=color:#e6db74>&#34;Clear Point&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;mpr&#34;</span> <span style=color:#f92672>&#39;</span>(math-preview-region :wk <span style=color:#e6db74>&#34;Region&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;mpR&#34;</span> <span style=color:#f92672>&#39;</span>(math-preview-clear-region :wk <span style=color:#e6db74>&#34;Clear Region&#34;</span>))
</span></span></code></pre></div><h3 id=plantuml>plantuml</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package plantuml
</span></span><span style=display:flex><span>  :commands (plantuml-org-to-mindmap-open plantuml-org-to-wbs-open)
</span></span><span style=display:flex><span>  :hook (org-mode <span style=color:#f92672>.</span> (lambda ()
</span></span><span style=display:flex><span>                      (require <span style=color:#e6db74>&#39;plantuml</span>)))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq plantuml-jar-path
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>concat</span> (string-trim
</span></span><span style=display:flex><span>                 (shell-command-to-string <span style=color:#e6db74>&#34;readlink -f $(brew --prefix plantuml)&#34;</span>))
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;/libexec/plantuml.jar&#34;</span>)))
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;op&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Plantuml&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;opm&#34;</span> <span style=color:#f92672>&#39;</span>(plantuml-org-to-mindmap-open :wk <span style=color:#e6db74>&#34;Mindmap&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ops&#34;</span> <span style=color:#f92672>&#39;</span>(plantuml-org-to-wbs-open :wk <span style=color:#e6db74>&#34;Work Breakdown Structure&#34;</span>))
</span></span></code></pre></div><h3 id=org-rainbow-tags>org-rainbow-tags</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-rainbow-tags
</span></span><span style=display:flex><span>  :hook (org-mode <span style=color:#f92672>.</span> org-rainbow-tags-mode))
</span></span></code></pre></div><h3 id=alarm-clock>alarm-clock</h3><p>å¦‚å…¶åï¼Œåœ¨ Emacs ä¸­è®¾ç½®é—¹é’Ÿçš„ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package alarm-clock
</span></span><span style=display:flex><span>  :commands (alarm-clock-set alarm-clock-list-view)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq alarm-clock-cache-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;var/.alarm-clock.cache&#34;</span> user-emacs-directory)))
</span></span></code></pre></div><h3 id=pomm>pomm</h3><p>Emacs ä¸­æ‰§è¡Œ Pomodoro å“²å­¦ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package pomm
</span></span><span style=display:flex><span>  :commands pomm
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq pomm-state-file-location (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;pomm&#34;</span> no-littering-var-directory))
</span></span><span style=display:flex><span>  (pomm-mode-line-mode <span style=color:#ae81ff>1</span>))
</span></span></code></pre></div><h3 id=pandoc>Pandoc</h3><p>å°† org æ–‡æ¡£è½¬æ¢ä¸º word æ–‡æ¡£ï¼Œä»…æ”¯æŒç®€å•çš„æ–‡æ¡£ï¼Œè¿‡äºå¤æ‚çš„æ–‡æ¡£ä¸è¡Œã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun org-export-docx ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Convert org to docx.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let ((docx-file (<span style=color:#a6e22e>concat</span> (file-name-sans-extension (<span style=color:#a6e22e>buffer-file-name</span>)) <span style=color:#e6db74>&#34;.docx&#34;</span>))
</span></span><span style=display:flex><span>        (template-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;template/template.docx&#34;</span> user-emacs-directory)))
</span></span><span style=display:flex><span>    (shell-command (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;pandoc %s -o %s --reference-doc=%s&#34;</span> (<span style=color:#a6e22e>buffer-file-name</span>) docx-file template-file))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Convert finish: %s&#34;</span> docx-file)))
</span></span></code></pre></div><p>ox-pandoc å¢åŠ  org-export çš„é€‰é¡¹ã€‚ä¸è¿‡ ox-pandoc å·±ç»ä¸æ€ä¹ˆæ›´æ–°ã€‚</p><p>æ­¤å¤–è¿˜æœ‰ä¸€ä¸ª pandoc-mode, åˆæ­¥å°è¯•åæ„Ÿè§‰è¿˜å¯ä»¥ã€‚.</p><p>Pandoc ä¸æ€ä¹ˆä½¿ç”¨ï¼Œæ—¶é—´é•¿äº†å°±å¿˜è®° pandoc çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; First, install pandoc with `brew install pandoc&#39;.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Only for simple file, no cite info, no latex formular.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Image file has to be absolute path, relative path do not work!</span>
</span></span><span style=display:flex><span>(setq org-pandoc-menu-entry
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>?m</span> <span style=color:#e6db74>&#34;as md.&#34;</span> org-pandoc-export-as-commonmark)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?M</span> <span style=color:#e6db74>&#34;to md and open.&#34;</span> org-pandoc-export-to-commonmark-and-open)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?x</span> <span style=color:#e6db74>&#34;to docx.&#34;</span> org-pandoc-export-to-docx)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?X</span> <span style=color:#e6db74>&#34;to docx and open.&#34;</span> org-pandoc-export-to-docx-and-open)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?e</span> <span style=color:#e6db74>&#34;to epub.&#34;</span> org-pandoc-export-to-epub)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?E</span> <span style=color:#e6db74>&#34;to epub and open.&#34;</span> org-pandoc-export-to-epub-and-open)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?3</span> <span style=color:#e6db74>&#34;to epub3.&#34;</span> org-pandoc-export-to-epub3)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?Â£</span> <span style=color:#e6db74>&#34;to epub3 and open.&#34;</span> org-pandoc-export-to-epub3-and-open)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?j</span> <span style=color:#e6db74>&#34;as json.&#34;</span> org-pandoc-export-as-json)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?J</span> <span style=color:#e6db74>&#34;to json and open.&#34;</span> org-pandoc-export-to-json-and-open)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?r</span> <span style=color:#e6db74>&#34;as rst.&#34;</span> org-pandoc-export-as-rst)
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>?R</span> <span style=color:#e6db74>&#34;to rst and open.&#34;</span> org-pandoc-export-to-rst-and-open)))
</span></span><span style=display:flex><span>(setq org-pandoc-options <span style=color:#f92672>&#39;</span>((standalone <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>                           (mathjax <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>                           (wrap <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;preserve&#34;</span>)))
</span></span></code></pre></div><h3 id=beancount-mode>beancount-mode</h3><p>Beancount has more plugin than ledger-cli.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package beancount
</span></span><span style=display:flex><span>  :mode (<span style=color:#e6db74>&#34;.bean&#34;</span> <span style=color:#f92672>.</span> beancount-mode)
</span></span><span style=display:flex><span>  :hook ((beancount-mode <span style=color:#f92672>.</span> (lambda ()
</span></span><span style=display:flex><span>                             (setq-local electric-indent-chars <span style=color:#66d9ef>nil</span>)))
</span></span><span style=display:flex><span>         (beancount-mode <span style=color:#f92672>.</span> outline-minor-mode))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (evil-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;beancount-mode-map</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;zf&#34;</span> <span style=color:#e6db74>&#39;beancount-fava</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; insert whole transaction instead of only insert date.</span>
</span></span><span style=display:flex><span>  (defun my/beancount-insert-transaction (<span style=color:#66d9ef>&amp;optional</span> days)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Start a new timestamped directive with date shifted by DAYS from today.&#34;</span>
</span></span><span style=display:flex><span>    (interactive <span style=color:#e6db74>&#34;P&#34;</span>)
</span></span><span style=display:flex><span>    (unless (<span style=color:#a6e22e>bolp</span>) (newline))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>insert</span> (beancount--shift-current-date days) <span style=color:#e6db74>&#34; * \&#34;\&#34; \&#34;\&#34;&#34;</span>)
</span></span><span style=display:flex><span>    (evil-backward-char <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>    (evil-insert <span style=color:#ae81ff>0</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;beancount-insert-date</span> :override <span style=color:#e6db74>&#39;my/beancount-insert-transaction</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Auto open browser after beancount-fava started.</span>
</span></span><span style=display:flex><span>  (defun my/browser-beancount-fava ()
</span></span><span style=display:flex><span>    (if beancount--fava-process
</span></span><span style=display:flex><span>        (browse-url <span style=color:#e6db74>&#34;http://127.0.0.1:5000&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;beancount-fava</span> :after <span style=color:#e6db74>&#39;my/browser-beancount-fava</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; auto align transaction before save file.</span>
</span></span><span style=display:flex><span>  (defun my/beancount-align-transaction ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Align visible region in current buffer.&#34;</span>
</span></span><span style=display:flex><span>    (save-excursion
</span></span><span style=display:flex><span>      (indent-region (<span style=color:#a6e22e>window-start</span>) (<span style=color:#a6e22e>window-end</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;before-save-hook</span> (lambda ()
</span></span><span style=display:flex><span>                                (if (<span style=color:#a6e22e>eq</span> major-mode <span style=color:#e6db74>&#39;beancount-mode</span>)
</span></span><span style=display:flex><span>                                    (my/beancount-align-transaction))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; If cursor in &#34;&#34;, activate input method rime.</span>
</span></span><span style=display:flex><span>  (defun my/beancount-activate-input-method ()
</span></span><span style=display:flex><span>    (when (<span style=color:#a6e22e>eq</span> major-mode <span style=color:#e6db74>&#39;beancount-mode</span>)
</span></span><span style=display:flex><span>      (if (not (bounds-of-thing-at-point <span style=color:#e6db74>&#39;whitespace</span>))
</span></span><span style=display:flex><span>          (if (bounds-of-thing-at-point <span style=color:#e6db74>&#39;string</span>)
</span></span><span style=display:flex><span>              (activate-input-method <span style=color:#e6db74>&#34;rime&#34;</span>)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;evil-insert-state-entry-hook</span> <span style=color:#a6e22e>#&#39;</span>my/beancount-activate-input-method))
</span></span></code></pre></div><h3 id=bibtex-management>Bibtex management</h3><p>æ–‡çŒ®ç®¡ç†æ¶‰åŠåˆ°çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæ–‡çŒ®çš„æŸ¥æ‰¾ã€ç®¡ç†ã€é˜…è¯»ä¸å¼•ç”¨ç­‰ç­‰ã€‚</p><p>Emacs è¿›è¡Œæ–‡çŒ®ç®¡ç†éœ€è¦ç”¨åˆ°çš„åŒ…æœ‰ org-cite,bibtex-completion,citar</p><h4 id=org-cite>org-cite</h4><p>Org-cite ç›®å‰æ˜¯ org å†…ç½®çš„è¿›è¡Œæ–‡çŒ®å¼•ç”¨çš„åŒ…ã€‚</p><p>å…³äº org-cite çš„ä½¿ç”¨è§ï¼š<a href=https://blog.tecosaur.com/tmio/2021-07-31-citations.html>https://blog.tecosaur.com/tmio/2021-07-31-citations.html</a> æˆ– <a href=https://kristofferbalintona.me/posts/202206141852/>Citations in org-mode: Org-cite and Citar | Kristoffer Balintona</a>.</p><p>å·±ç»è¯´çš„æ¯”è¾ƒè¯¦ç»†ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package oc
</span></span><span style=display:flex><span>  :after org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-cite-global-bibliography <span style=color:#f92672>`</span>(<span style=color:#f92672>,</span>(<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/bibtexs/References.bib&#34;</span>))))
</span></span></code></pre></div><h4 id=citar>citar</h4><p>ä¸ºä»€ä¹ˆä½¿ç”¨ citar? æ˜¯å› ä¸º org-cite çš„æç¤ºç•Œé¢çœ‹èµ·æ¥ä¸å’‹åœ°ï¼Œè€Œ citar æä¾›çš„ç•Œé¢å°±å¾ˆå‹å¥½ã€‚</p><p>æˆ‘é€šå¸¸ä½¿ç”¨ <code>citar-open-files</code> / <code>SPC n r p</code> æ¥æ‰“å¼€æƒ³è¦é˜…è¯»çš„æ–‡çŒ® PDF æ–‡ä»¶ã€‚</p><p>é˜…è¯»æ–‡çŒ®ä½¿ç”¨çš„æ˜¯ <a href=#pdf-tools>pdf-tools</a> ï¼Œæ›´å¥½ç”¨çš„æ˜¯ <a href=https://github.com/emacs-eaf/eaf-pdf-viewer>emacs-eaf/eaf-pdf-viewer: Fastest PDF Viewer in Emacs</a>.</p><p>eaf-pdf-viewer å­˜åœ¨çš„é—®é¢˜è¿˜æ˜¯å®‰è£…è¾ƒéš¾ï¼Œå¯¹äºç³»ç»Ÿç¯å¢ƒè¦æ±‚è¾ƒé«˜ï¼Œå¦‚ Emacs 29 ä¸Šå°±ä¸èƒ½ä½¿ç”¨ï¼Œå­˜åœ¨é—®é¢˜ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package citar
</span></span><span style=display:flex><span>  :commands citar-open citar-open-entry citar-open-files citar-open-notes citar-open-links
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq citar-bibliography org-cite-global-bibliography)
</span></span><span style=display:flex><span>  (setq citar-notes-paths <span style=color:#f92672>`</span>(<span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;roam/ref&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>  (setq citar-library-file-extensions <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;pdf&#34;</span> <span style=color:#e6db74>&#34;jpg&#34;</span> <span style=color:#e6db74>&#34;epub&#34;</span>))
</span></span><span style=display:flex><span>  (setq citar-templates <span style=color:#f92672>&#39;</span>((main <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${author editor:30} ${date year issued:4} ${title:48}&#34;</span>)
</span></span><span style=display:flex><span>                          (suffix <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=key= id:15} ${=type=:12} ${tags keywords:*}&#34;</span>)
</span></span><span style=display:flex><span>                          (preview <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${author editor} (${year issued date}) ${title}, ${journal journaltitle publisher container-title collection-title}.\n&#34;</span>)
</span></span><span style=display:flex><span>                          (note <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${title}&#34;</span>)))
</span></span><span style=display:flex><span>  (setq citar-symbol-separator <span style=color:#e6db74>&#34;  &#34;</span>)
</span></span><span style=display:flex><span>  (setq citar-file-additional-files-separator <span style=color:#e6db74>&#34;-&#34;</span>)
</span></span><span style=display:flex><span>  (setq citar-at-point-function <span style=color:#e6db74>&#39;embark-act</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package citar
</span></span><span style=display:flex><span>  :after all-the-icons
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq citar-symbols
</span></span><span style=display:flex><span>        <span style=color:#f92672>`</span>((file <span style=color:#f92672>,</span>(all-the-icons-faicon <span style=color:#e6db74>&#34;file-pdf-o&#34;</span> :face <span style=color:#e6db74>&#39;all-the-icons-dred</span> :v-adjust <span style=color:#ae81ff>-0.1</span>) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; &#34;</span>)
</span></span><span style=display:flex><span>          (note <span style=color:#f92672>,</span>(all-the-icons-material <span style=color:#e6db74>&#34;speaker_notes&#34;</span> :face <span style=color:#e6db74>&#39;all-the-icons-blue</span> :v-adjust <span style=color:#ae81ff>-0.3</span>) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; &#34;</span>)
</span></span><span style=display:flex><span>          (link <span style=color:#f92672>,</span>(all-the-icons-octicon <span style=color:#e6db74>&#34;link&#34;</span> :face <span style=color:#e6db74>&#39;all-the-icons-orange</span> :v-adjust <span style=color:#ae81ff>0.01</span>) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; &#34;</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package citar-capf
</span></span><span style=display:flex><span>  :hook ((LaTeX-mode <span style=color:#f92672>.</span> citar-capf-setup)
</span></span><span style=display:flex><span>         (org-mode <span style=color:#f92672>.</span> citar-capf-setup)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package citar-org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-cite-insert-processor <span style=color:#e6db74>&#39;citar</span>)
</span></span><span style=display:flex><span>  (setq org-cite-follow-processor <span style=color:#e6db74>&#39;citar</span>)
</span></span><span style=display:flex><span>  (setq org-cite-activate-processor <span style=color:#e6db74>&#39;citar</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (with-eval-after-load <span style=color:#e6db74>&#39;citar-org</span>
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>define-key</span> citar-org-citation-map (kbd <span style=color:#e6db74>&#34;RET&#34;</span>) <span style=color:#e6db74>&#39;org-open-at-point</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package citar-embark
</span></span><span style=display:flex><span>  :commands citar-embark-mode
</span></span><span style=display:flex><span>  :hook (org-mode <span style=color:#f92672>.</span> citar-embark-mode))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;re&#34;</span> <span style=color:#f92672>&#39;</span>(citar-open-entry :wk <span style=color:#e6db74>&#34;Open entry&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;rp&#34;</span> <span style=color:#f92672>&#39;</span>(citar-open-files :wk <span style=color:#e6db74>&#34;Open files&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ri&#34;</span> <span style=color:#f92672>&#39;</span>(citar-insert-citation :wk <span style=color:#e6db74>&#34;Insert citation&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;rn&#34;</span> <span style=color:#f92672>&#39;</span>(citar-open-notes :wk <span style=color:#e6db74>&#34;Open/Create note&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;rl&#34;</span> <span style=color:#f92672>&#39;</span>(citar-open-links :wk <span style=color:#e6db74>&#34;Open links&#34;</span>))
</span></span></code></pre></div><h4 id=citar-org-roam>citar-org-roam</h4><p>è¿™ä¸ªåŒ…å°† citar å’Œ org-roam ç›¸ç»“åˆï¼Œæˆ‘ä¸»è¦ä½¿ç”¨å®ƒæ¥åˆ›å»ºæ–‡çŒ®ç¬”è®°å†…å®¹ã€‚</p><p>ç›®å‰ citar-org-roam ä¸æ”¯æŒ capture with template, æˆ‘æ”¹å†™äº† citar-org-roam&ndash;create-capture-note å‡½æ•°ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package citar-org-roam
</span></span><span style=display:flex><span>  :commands (citar-org-roam-mode citar-org-roam-cited)
</span></span><span style=display:flex><span>  :hook (org-roam-mode <span style=color:#f92672>.</span> citar-org-roam-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq citar-org-roam-subdir <span style=color:#e6db74>&#34;ref&#34;</span>)
</span></span><span style=display:flex><span>  (setq citar-org-roam-note-title-template <span style=color:#e6db74>&#34;${title}&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Temporarily work, wait citar-org-roam update to support capture with template.</span>
</span></span><span style=display:flex><span>  (defun my/citar-org-roam--create-capture-note (citekey entry)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Open or create org-roam node for CITEKEY and ENTRY.&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; adapted from https://jethrokuan.github.io/org-roam-guide/#orgc48eb0d</span>
</span></span><span style=display:flex><span>    (let ((title (citar-format--entry
</span></span><span style=display:flex><span>                  citar-org-roam-note-title-template entry)))
</span></span><span style=display:flex><span>      (org-roam-capture-
</span></span><span style=display:flex><span>       :templates
</span></span><span style=display:flex><span>       <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#e6db74>&#34;reference&#34;</span> plain (file <span style=color:#e6db74>&#34;~/.emacs.d/template/reference&#34;</span>) :if-new <span style=color:#75715e>;; Change &#34;%?&#34; to a template file.</span>
</span></span><span style=display:flex><span>          (file+head
</span></span><span style=display:flex><span>           <span style=color:#e6db74>&#34;%(concat
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  (when citar-org-roam-subdir (concat citar-org-roam-subdir \&#34;/\&#34;)) \&#34;${citekey}.org\&#34;)&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#e6db74>&#34;#+title: ${title}\n&#34;</span>)
</span></span><span style=display:flex><span>          :immediate-finish <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>          :unnarrowed <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>       :info (<span style=color:#a6e22e>list</span> :citekey citekey)
</span></span><span style=display:flex><span>       :node (org-roam-node-create :title title)
</span></span><span style=display:flex><span>       :props <span style=color:#f92672>&#39;</span>(:finalize find-file))
</span></span><span style=display:flex><span>      (org-roam-ref-add (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;@&#34;</span> citekey))))
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;citar-org-roam--create-capture-note</span> :override <span style=color:#a6e22e>#&#39;</span>my/citar-org-roam--create-capture-note))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;rc&#34;</span> <span style=color:#f92672>&#39;</span>(citar-org-roam-cited :wk <span style=color:#e6db74>&#34;Cited Roam Node&#34;</span>))
</span></span></code></pre></div><h4 id=bibtex-completion>bibtex-completion</h4><p>bibtex-completion è¿™ä¸ªåŒ…æ˜¯ org-roam-bibtex çš„ä¾èµ–ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package bibtex-completion
</span></span><span style=display:flex><span>  :after org-roam-bibtex
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq bibtex-completion-bibliography org-cite-global-bibliography)
</span></span><span style=display:flex><span>  (setq bibtex-completion-notes-path (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;roam/ref&#34;</span> my-galaxy))
</span></span><span style=display:flex><span>  (setq bibtex-completion-pdf-field <span style=color:#e6db74>&#34;File&#34;</span>)
</span></span><span style=display:flex><span>  (setq bibtex-completion-additional-search-fields <span style=color:#f92672>&#39;</span>(keywords journal booktitle))
</span></span><span style=display:flex><span>  (setq bibtex-completion-pdf-symbol <span style=color:#e6db74>&#34;P&#34;</span>)
</span></span><span style=display:flex><span>  (setq bibtex-completion-notes-symbol <span style=color:#e6db74>&#34;N&#34;</span>)
</span></span><span style=display:flex><span>  (setq bibtex-completion-display-formats <span style=color:#f92672>&#39;</span>((article <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${journal:40}&#34;</span>)
</span></span><span style=display:flex><span>                                            (inbook <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} Chapter ${chapter:32}&#34;</span>)
</span></span><span style=display:flex><span>                                            (incollection <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}&#34;</span>)
</span></span><span style=display:flex><span>                                            (inproceedings <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}&#34;</span>)
</span></span><span style=display:flex><span>                                            (<span style=color:#66d9ef>t</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*}&#34;</span>))))
</span></span></code></pre></div><h4 id=org-roam-bibtex>org-roam-bibtex</h4><p>org-roam-bibtex çš„ä¸»è¦ä½œç”¨æ˜¯å½“åˆ›å»ºæ–‡çŒ®ç¬”è®°æ—¶ï¼Œä¼šåœ¨æ–‡ä»¶çš„å¤´éƒ¨åˆ›å»ºä¸€ä¸ª <code>ROAM_REFS: @xxx</code> ï¼Œè¿™æ ·é€šè¿‡ @xxx å¯ä»¥æ‰“å¼€å¯¹åº”æ–‡çŒ®çš„ PDF æ–‡ä»¶ã€‚</p><p>æˆ‘è®¾ç½®äº† <code>z m</code> è°ƒç”¨ <code>orb-note-actions</code>. ä¸»è¦ä½œç”¨æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æ‰“å¼€å¯¹åº”æ–‡çŒ®ç¬”è®°çš„ PDF æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡ scrapper æ¥è·å– PDF æ–‡ä»¶çš„å¼•æ–‡ä¿¡æ¯ã€‚</p><p>ä½¿ç”¨ scrapper åŠŸèƒ½éœ€è¦å®‰è£… <a href=https://github.com/inukshuk/anystyle>inukshuk/anystyle: Fast and smart citation reference parsing</a>, <code>[sudo] gem install anystyle-cli</code>.</p><p>è¿™æ ·æ–‡çŒ®æ£€ç´¢å°±æœ‰äº†å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡å·±æœ‰çš„æ–‡çŒ®æ¥æŸ¥æ‰¾æ–‡çŒ®ï¼Œè¿™ä¹Ÿæ˜¯é˜…è¯»æ–‡çŒ®çš„ä¸€ä¸ªé‡è¦æ–¹æ³•ã€‚åˆ«äººå¼•ç”¨äº†å•¥ï¼Œæ¡é‡è¦çš„çœ‹å“ˆã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org-roam-bibtex
</span></span><span style=display:flex><span>  :commands orb-note-actions)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil</span>
</span></span><span style=display:flex><span>  (evil-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;org-mode-map</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;zm&#34;</span> <span style=color:#e6db74>&#39;orb-note-actions</span>))
</span></span></code></pre></div><h4 id=ebib>ebib</h4><p>Ebib æ˜¯ Emacs ä¸­çš„æ–‡çŒ®ç®¡ç†è½¯ä»¶ï¼Œç±»ä¼¼äº zotero, ä½†æ˜¯æˆ‘æ„Ÿè§‰ Zotero æ›´å¼ºä¸€äº›ï¼Œä½†æ˜¯ Zotero å ç”¨çš„å†…å­˜å®åœ¨æ˜¯å¤§ï¼ŒMacOS ä¸Šçº¦æœ‰ä¸€ä¸ªG.</p><p>ç›¸æ¯”è¾ƒè€Œè¨€ï¼ŒEmacs æ•´ä¸ªå ç”¨çš„å†…å­˜æ‰å‡ ç™¾å…†ã€‚</p><p>æˆ‘ä¿ç•™ Ebib çš„åŸå› æ˜¯å®ƒå¯ä»¥ä»ä¸» bibtex æ–‡ä»¶ä¸­æå–æ–‡ç« éœ€è¦çš„æ–‡çŒ®å†…å®¹ã€‚</p><p>å…·ä½“çš„ä½¿ç”¨è§ï¼š<a href=https://joostkremers.github.io/ebib/ebib-manual.html#main-and-dependent-databases>Ebib Manual</a></p><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª dependent database <code>M c</code>, ç„¶åä½¿ç”¨ <code>M a</code> æŠŠ main database ä¸­çš„å¼•æ–‡æ·»åŠ åˆ° dependent database ä¸­ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ebib
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;&lt;f2&gt;&#34;</span> <span style=color:#f92672>.</span> ebib)
</span></span><span style=display:flex><span>  :hook (ebib-index-mode <span style=color:#f92672>.</span> hide-mode-line-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq ebib-index-mode-line <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq ebib-entry-mode-line <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq ebib-preload-bib-files org-cite-global-bibliography)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq ebib-keywords (<span style=color:#a6e22e>concat</span> org-roam-directory <span style=color:#e6db74>&#34;/bibtexs/keywords.txt&#34;</span>))
</span></span><span style=display:flex><span>  (setq ebib-notes-directory (<span style=color:#a6e22e>concat</span> org-roam-directory <span style=color:#e6db74>&#34;/ref&#34;</span>))
</span></span><span style=display:flex><span>  (setq ebib-filters-default-file (<span style=color:#a6e22e>concat</span> org-roam-directory <span style=color:#e6db74>&#34;/bibtexs/ebib-filters&#34;</span>))
</span></span><span style=display:flex><span>  (setq ebib-reading-list-file (<span style=color:#a6e22e>concat</span> org-roam-directory <span style=color:#e6db74>&#34;/bibtexs/reading_list.org&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq ebib-keywords-field-keep-sorted <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq ebib-keywords-file-save-on-exit <span style=color:#e6db74>&#39;always</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq ebib-index-columns
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;Entry Key&#34;</span> <span style=color:#ae81ff>30</span> <span style=color:#66d9ef>t</span>) (<span style=color:#e6db74>&#34;Note&#34;</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>nil</span>) (<span style=color:#e6db74>&#34;Year&#34;</span> <span style=color:#ae81ff>6</span> <span style=color:#66d9ef>t</span>) (<span style=color:#e6db74>&#34;Title&#34;</span> <span style=color:#ae81ff>50</span> <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>  (setq ebib-file-associations <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;ps&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;gv&#34;</span>))))
</span></span></code></pre></div><h4 id=scihub>scihub</h4><p>å½“æœ‰äº† DOI ä¹‹åæƒ³è¦ä¸‹è½½æ–‡çŒ®ï¼Œå¯ä»¥ä½¿ç”¨ scihub è¿™ä¸ªé€šè¿‡ scihub ä¸‹è½½ã€‚è‹¥æ²¡æœ‰æºçš„è¯å†æƒ³å…¶ä»–çš„æ–¹å¼ã€‚</p><p>ä½¿ç”¨ scihub éœ€è¦æä¾› DOI æˆ–è€…å®Œæ•´çš„æ–‡çŒ®é¢˜ç›®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package scihub
</span></span><span style=display:flex><span>  :commands scihub
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq scihub-download-directory <span style=color:#e6db74>&#34;~/Downloads/&#34;</span>)
</span></span><span style=display:flex><span>  (setq scihub-open-after-download <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq scihub-fetch-domain <span style=color:#e6db74>&#39;scihub-fetch-domains-lovescihub</span>))
</span></span></code></pre></div><h4 id=biblio>biblio</h4><p>æ–‡çŒ®çš„æŸ¥æ‰¾ç›®å‰æœ‰å¤šç§æ–¹å¼ï¼Œå¦‚å¯ä»¥ä½¿ç”¨ biblio è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¸¸ç”¨çš„æœ‰ crossfer-lookup.</p><p>æˆ‘é»˜è®¤ä½¿ç”¨ crossref ä½œä¸ºåç«¯ï¼Œé€šè¿‡ <code>SPC n r d</code> è°ƒç”¨ï¼Œè‹¥è¦ä½¿ç”¨å…¶ä»–çš„åç«¯ï¼Œé€šè¿‡ <code>M-x biblio-lookup</code> è¿›è¡Œã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package biblio
</span></span><span style=display:flex><span>  :commands biblio-lookup
</span></span><span style=display:flex><span>  :general
</span></span><span style=display:flex><span>  (:states <span style=color:#e6db74>&#39;normal</span>
</span></span><span style=display:flex><span>           <span style=color:#e6db74>&#34;SPC rd&#34;</span> <span style=color:#e6db74>&#39;my/biblio-lookup-crossref</span> :no-autoload <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  :preface
</span></span><span style=display:flex><span>  (defun my/biblio-lookup-crossref ()
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (biblio-lookup <span style=color:#e6db74>&#39;biblio-crossref-backend</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;rd&#34;</span> <span style=color:#f92672>&#39;</span>(my/biblio-lookup-crossref :wk <span style=color:#e6db74>&#34;Get bib from crossfer&#34;</span>))
</span></span></code></pre></div><h3 id=latex>latex</h3><p>å‚è€ƒèµ„æ–™ï¼š<a href=https://gist.github.com/karthink/7d89df35ee9b7ac0c93d0177b862dadb>fast latex input</a>.</p><p>Latex å¯ä»¥ç»“åˆ eglot ä½¿ç”¨ï¼Œæœ‰å¤šä¸ª server å¯ä»¥ä½¿ç”¨ï¼Œ <code>digestif</code> å’Œ =texlab=ï¼Œæˆ‘ä½¿ç”¨å‰è€…ã€‚</p><h4 id=auctex>Auctex</h4><p>Auctex è‹¥é€šè¿‡æºæ–‡ä»¶å®‰è£…ï¼Œéœ€è¦å…ˆå°†å…¶å…‹éš†åˆ°æœ¬åœ°ï¼Œç„¶åæ‰§è¡Œï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>./autogen.sh
</span></span><span style=display:flex><span>./configure
</span></span><span style=display:flex><span>make
</span></span><span style=display:flex><span>sudo make install
</span></span></code></pre></div><p>emacs ä¸Šæœ‰ <code>latex-mode</code> å’Œ <code>LaTeX-mode</code> ä¸¤ä¸ªï¼Œä½¿ç”¨å“ªä¸ªå–å†³äºæ˜¯å¦å®‰è£…äº† <code>auctex</code> è¿™ä¸ªåŒ…ã€‚è‹¥æœ‰ï¼Œä½¿ç”¨ <code>LaTex-mode</code> å°±å¥½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package tex
</span></span><span style=display:flex><span>  :mode (<span style=color:#e6db74>&#34;.tex&#34;</span> <span style=color:#f92672>.</span> LaTeX-mode)
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>load</span> <span style=color:#e6db74>&#34;auctex.el&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>load</span> <span style=color:#e6db74>&#34;preview-latex.el&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq TeX-auto-save <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq TeX-parse-self <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq TeX-save-query <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq TeX-electric-sub-and-superscript <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq TeX-auto-local <span style=color:#e6db74>&#34;.auctex-auto&#34;</span>)
</span></span><span style=display:flex><span>  (setq TeX-style-local <span style=color:#e6db74>&#34;.auctex-style&#34;</span>)
</span></span><span style=display:flex><span>  (setq TeX-source-correlate-mode <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq TeX-source-correlate-method <span style=color:#e6db74>&#39;synctex</span>)
</span></span><span style=display:flex><span>  (setq TeX-source-correlate-start-server <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq-default TeX-master <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;TeX-command-list</span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;XeLaTeX&#34;</span> <span style=color:#e6db74>&#34;%`xelatex%(mode)%&#39; %t&#34;</span> TeX-run-TeX <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;TeX-view-program-selection</span> <span style=color:#f92672>&#39;</span>(output-pdf <span style=color:#e6db74>&#34;PDF Tools&#34;</span>))
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;TeX-view-program-list</span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;PDF Tools&#34;</span> TeX-pdf-tools-sync-view))
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;TeX-after-compilation-finished-functions</span> <span style=color:#a6e22e>#&#39;</span>TeX-revert-document-buffer))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package latex
</span></span><span style=display:flex><span>  :bind (:map LaTeX-mode-map
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;C-c h&#34;</span> <span style=color:#f92672>.</span> TeX-doc)))
</span></span></code></pre></div><h4 id=fontification>fontification</h4><p><a href=https://tex.stackexchange.com/questions/85849/auctex-new-commands-recognized-as-such/86119#86119>macros - AUCTeX â€“ new commands recognized as such - TeX - LaTeX Stack Exchange</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package font-latex
</span></span><span style=display:flex><span>  :after tex
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq font-latex-match-reference-keywords
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(<span style=color:#75715e>;; BibLaTeX.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;printbibliography&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;addbibresource&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Standard commands.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;cite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;citep&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;citet&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Cite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;parencite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Parencite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;footcite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;footcitetext&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Style-specific commands.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;textcite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Textcite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;smartcite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Smartcite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;cite*&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;parencite*&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;supercite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Qualified citation lists.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;cites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Cites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;parencites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Parencites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;footcites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;footcitetexts&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;smartcites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Smartcites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;textcites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Textcites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;supercites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Style-independent commands.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;autocite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Autocite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;autocite*&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Autocite*&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;autocites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Autocites&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Text commands.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;citeauthor&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Citeauthor&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;citetitle&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;citetitle*&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;citeyear&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;citedate&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;citeurl&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Special commands.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;fullcite&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Cleveref.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;cref&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Cref&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;cpageref&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Cpageref&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;cpagerefrange&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Cpagerefrange&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;crefrange&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;Crefrange&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;labelcref&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq font-latex-match-textual-keywords
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(<span style=color:#75715e>;; BibLaTeX brackets.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;parentext&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;brackettext&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;hybridblockquote&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Auxiliary commands.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;textelp&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;textelp*&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;textins&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;textins*&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Subcaption.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;subcaption&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq font-latex-match-variable-keywords
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(<span style=color:#75715e>;; Amsmath.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;numberwithin&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          <span style=color:#75715e>;; Enumitem.</span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;setlist&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;setlist*&#34;</span> <span style=color:#e6db74>&#34;[{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;newlist&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;renewlist&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;setlistdepth&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;restartlist&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;crefname&#34;</span> <span style=color:#e6db74>&#34;{&#34;</span>))))
</span></span></code></pre></div><h4 id=cdlatex>cdlatex</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package cdlatex
</span></span><span style=display:flex><span>  :hook ((LaTeX-mode <span style=color:#f92672>.</span> turn-on-cdlatex)
</span></span><span style=display:flex><span>         (org-mode <span style=color:#f92672>.</span> org-cdlatex-mode)))
</span></span></code></pre></div><h4 id=reftex>Reftex</h4><p>Hide mode line see <a href=#hide-mode-line>hide-mode-line</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package reftex
</span></span><span style=display:flex><span>  :hook ((LaTeX-mode <span style=color:#f92672>.</span> turn-on-reftex)
</span></span><span style=display:flex><span>         (reftex-toc-mode <span style=color:#f92672>.</span> menu-bar--visual-line-mode-enable)
</span></span><span style=display:flex><span>         (reftex-toc-mode <span style=color:#f92672>.</span> hide-mode-line-mode))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq reftex-toc-split-windows-horizontally <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq reftex-toc-split-windows-fraction <span style=color:#ae81ff>0.25</span>))
</span></span></code></pre></div><h4 id=ox-latex>ox-latex</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package org
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-highlight-latex-and-related <span style=color:#f92672>&#39;</span>(latex script)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package ox-latex
</span></span><span style=display:flex><span>  :defer <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-latex-src-block-backend <span style=color:#e6db74>&#39;minted</span>)
</span></span><span style=display:flex><span>  (setq org-latex-minted-options <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;breaklines&#34;</span> <span style=color:#e6db74>&#34;true&#34;</span>)
</span></span><span style=display:flex><span>                                   (<span style=color:#e6db74>&#34;breakanywhere&#34;</span> <span style=color:#e6db74>&#34;true&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-latex-classes <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;org-latex-classes</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;book&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#e6db74>&#34;\\documentclass[UTF8,twoside,a4paper,12pt,openright]{ctexrep}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                   [NO-DEFAULT-PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                   [NO-PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                   [EXTRA]&#34;</span>
</span></span><span style=display:flex><span>                 (<span style=color:#e6db74>&#34;\\chapter{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\chapter*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                 (<span style=color:#e6db74>&#34;\\section{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\section*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                 (<span style=color:#e6db74>&#34;\\subsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsection*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                 (<span style=color:#e6db74>&#34;\\subsubsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsubsection*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                 (<span style=color:#e6db74>&#34;\\paragraph{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\paragraph*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                 (<span style=color:#e6db74>&#34;\\subparagraph{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subparagraph*{%s}&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;org-latex-classes</span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;article-cn&#34;</span> <span style=color:#e6db74>&#34;\\documentclass{ctexart}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                      [NO-DEFAULT-PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                      [NO-PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                      [EXTRA]&#34;</span>
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\section{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\section*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\subsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsection*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\subsubsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsubsection*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\paragraph{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\paragraph*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\subparagraph{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subparagraph*{%s}&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;org-latex-classes</span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;article&#34;</span> <span style=color:#e6db74>&#34;\\documentclass[11pt]{article}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                      [NO-DEFAULT-PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                      [NO-PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                      [EXTRA]&#34;</span>
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\section{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\section*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\subsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsection*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\subsubsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsubsection*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\paragraph{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\paragraph*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\subparagraph{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subparagraph*{%s}&#34;</span>)))
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;org-latex-classes</span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;beamer&#34;</span> <span style=color:#e6db74>&#34;\\documentclass[presentation]{beamer}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                      [DEFAULT-PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                      [PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                                      [EXTRA]&#34;</span>
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\section{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\section*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\subsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsection*{%s}&#34;</span>)
</span></span><span style=display:flex><span>                                    (<span style=color:#e6db74>&#34;\\subsubsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsubsection*{%s}&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-latex-pdf-process
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;xelatex -8bit --shell-escape  -interaction=nonstopmode -output-directory %o %f&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;bibtex -shell-escape %b&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;xelatex -8bit --shell-escape  -interaction=nonstopmode -output-directory %o %f&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;xelatex -8bit --shell-escape  -interaction=nonstopmode -output-directory %o %f&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;rm -fr %b.out %b.log %b.tex %b.brf %b.bbl&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-latex-logfiles-extensions <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;lof&#34;</span> <span style=color:#e6db74>&#34;lot&#34;</span> <span style=color:#e6db74>&#34;tex~&#34;</span> <span style=color:#e6db74>&#34;aux&#34;</span> <span style=color:#e6db74>&#34;idx&#34;</span> <span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>                                        <span style=color:#e6db74>&#34;out&#34;</span> <span style=color:#e6db74>&#34;toc&#34;</span> <span style=color:#e6db74>&#34;nav&#34;</span> <span style=color:#e6db74>&#34;snm&#34;</span> <span style=color:#e6db74>&#34;vrb&#34;</span> <span style=color:#e6db74>&#34;dvi&#34;</span>
</span></span><span style=display:flex><span>                                        <span style=color:#e6db74>&#34;fdb_latexmk&#34;</span> <span style=color:#e6db74>&#34;blg&#34;</span> <span style=color:#e6db74>&#34;brf&#34;</span> <span style=color:#e6db74>&#34;fls&#34;</span>
</span></span><span style=display:flex><span>                                        <span style=color:#e6db74>&#34;entoc&#34;</span> <span style=color:#e6db74>&#34;ps&#34;</span> <span style=color:#e6db74>&#34;spl&#34;</span> <span style=color:#e6db74>&#34;bbl&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-latex-prefer-user-labels <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><h4 id=auctex-latexmk>auctex-latexmk</h4><p><a href=https://github.com/tom-tan/auctex-latexmk>tom-tan/auctex-latexmk: This library adds LatexMk support to AUCTeX.</a>
æœ€æ–°çš„ auctex ä¸èƒ½ä½¿ç”¨æ­¤å¤„çš„åŒ…æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ <a href=https://github.com/emacsmirror/auctex-latexmk>emacsmirror/auctex-latexmk: Add LatexMk support to AUCTeX</a> æ›¿ä»£ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package auctex-latexmk
</span></span><span style=display:flex><span>  :hook (LaTeX-mode <span style=color:#f92672>.</span> auctex-latexmk-setup))
</span></span></code></pre></div><h4 id=ox-beamer>ox-beamer</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ox-beamer
</span></span><span style=display:flex><span>  :defer <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  :after org)
</span></span></code></pre></div><h3 id=blog>Blog</h3><p>ä½¿ç”¨ org-mode å†™ blog æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨ ox-hugo, å¦å¤–ä¸€ä¸ªå°±æ˜¯ä½¿ç”¨ org-publish.</p><p>è¿™ä¸¤ä¸ªéƒ½å¯ä»¥åŸºäº github å»ºç«‹è‡ªå·±çš„åšå®¢ã€‚</p><p>ä½¿ç”¨ deft ç®¡ç†è‡ªå·±çš„å†™ä½œï¼ŒåŸå…ˆæƒ³ä½¿ç”¨ denote è¿›è¡Œï¼Œä½†æ˜¯ denote åˆ›å»ºçš„æ–‡ä»¶åè¿‡é•¿ï¼Œä¼šå¯¼è‡´ <a href=https://codeberg.org/ideasman42/emacs-undo-fu-session>undo-fu-session</a> æŠ¥ <code>file name too long</code> çš„é”™è¯¯ã€‚</p><p>å‘ç°ä½¿ç”¨ <a href=#consult-notes>consult-notes</a> æ¯” deft å¥½ç”¨ã€‚Deft é»˜è®¤åˆ›å»ºçš„æ–‡ä»¶åæ˜¯ä¸€ä¸²æ—¥æœŸæ ¼å¼ï¼Œæ²¡æœ‰ç›´æ¥ä½¿ç”¨ title ç›´è§‚ã€‚è™½ç„¶å¯ä»¥ä½¿ç”¨ deft æä¾›çš„ç•Œé¢æŸ¥æ‰¾æ–‡ä»¶ï¼Œä½†æ˜¯ä¸èƒ½ç»“åˆ vertico ç›´æ¥ä½¿ç”¨æ‹¼éŸ³è¿›è¡Œä¸­æ–‡çš„æ£€ç´¢ã€‚</p><h4 id=ox-hugo>ox-hugo</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ox-hugo
</span></span><span style=display:flex><span>  :defer <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  :after ox)
</span></span></code></pre></div><h4 id=ox-html>ox-html</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ox-html
</span></span><span style=display:flex><span>  :after ox
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq org-html-preamble <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq org-html-preamble-format
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;en&#34;</span> <span style=color:#e6db74>&#34;&lt;a href=\&#34;/index.html\&#34; class=\&#34;button\&#34;&gt;Home&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>               &lt;a href=\&#34;/notes/index.html\&#34; class=\&#34;button\&#34;&gt;Notes&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>               &lt;a href=\&#34;/engineering/index.html\&#34; class=\&#34;button\&#34;&gt;Engineering&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>               &lt;a href=\&#34;/movies/index.html\&#34; class=\&#34;button\&#34;&gt;Movies&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>               &lt;a href=\&#34;/books/index.html\&#34; class=\&#34;button\&#34;&gt;Books&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>               &lt;a href=\&#34;/about.html\&#34; class=\&#34;button\&#34;&gt;About&lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>               &lt;hr&gt;&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-html-postamble <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-html-postamble-format
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;en&#34;</span> <span style=color:#e6db74>&#34;&lt;hr&gt;&lt;div class=\&#34;generated\&#34;&gt;Created with %c on MacOS&lt;/div&gt;&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-html-head-include-default-style <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-html-head
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&lt;link rel=\&#34;stylesheet\&#34; type=\&#34;text/css\&#34; href=\&#34;../css/style.css\&#34; /&gt;&#34;</span>))
</span></span></code></pre></div><h4 id=ox-publish>ox-publish</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package ox-publish
</span></span><span style=display:flex><span>  :after ox
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (defvar my/publish-directory <span style=color:#e6db74>&#34;~/shuyi.github.io&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq org-publish-project-alist
</span></span><span style=display:flex><span>        <span style=color:#f92672>`</span>((<span style=color:#e6db74>&#34;site&#34;</span>
</span></span><span style=display:flex><span>           :base-directory <span style=color:#f92672>,</span>website-directory
</span></span><span style=display:flex><span>           :base-extension <span style=color:#e6db74>&#34;org&#34;</span>
</span></span><span style=display:flex><span>           :recursive <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>           :publishing-directory <span style=color:#f92672>,</span>my/publish-directory
</span></span><span style=display:flex><span>           :publishing-function org-html-publish-to-html)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;notes&#34;</span>
</span></span><span style=display:flex><span>           :base-directory <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;notes&#34;</span> website-directory)
</span></span><span style=display:flex><span>           :base-extension <span style=color:#e6db74>&#34;org&#34;</span>
</span></span><span style=display:flex><span>           :publishing-directory <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;notes&#34;</span> my/publish-directory)
</span></span><span style=display:flex><span>           :publishing-function org-html-publish-to-html
</span></span><span style=display:flex><span>           :auto-sitemap <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>           :sitemap-filename <span style=color:#e6db74>&#34;index.org&#34;</span>
</span></span><span style=display:flex><span>           :sitemap-title <span style=color:#e6db74>&#34;Notes&#34;</span>
</span></span><span style=display:flex><span>           :sitemap-sort-files anti-chronologically)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;books&#34;</span>
</span></span><span style=display:flex><span>           :base-directory <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;books&#34;</span> website-directory)
</span></span><span style=display:flex><span>           :base-extension <span style=color:#e6db74>&#34;org&#34;</span>
</span></span><span style=display:flex><span>           :publishing-directory <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;books&#34;</span> my/publish-directory)
</span></span><span style=display:flex><span>           :publishing-function org-html-publish-to-html
</span></span><span style=display:flex><span>           :auto-sitemap <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>           :sitemap-filename <span style=color:#e6db74>&#34;index.org&#34;</span>
</span></span><span style=display:flex><span>           :sitemap-title <span style=color:#e6db74>&#34;Books&#34;</span>
</span></span><span style=display:flex><span>           :sitemap-sort-files anti-chronologically)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;movies&#34;</span>
</span></span><span style=display:flex><span>           :base-directory <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;movies&#34;</span> website-directory)
</span></span><span style=display:flex><span>           :base-extension <span style=color:#e6db74>&#34;org&#34;</span>
</span></span><span style=display:flex><span>           :publishing-directory <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;movies&#34;</span> my/publish-directory)
</span></span><span style=display:flex><span>           :publishing-function org-html-publish-to-html
</span></span><span style=display:flex><span>           :auto-sitemap <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>           :sitemap-filename <span style=color:#e6db74>&#34;index.org&#34;</span>
</span></span><span style=display:flex><span>           :sitemap-title <span style=color:#e6db74>&#34;Movies&#34;</span>
</span></span><span style=display:flex><span>           :sitemap-sort-files anti-chronologically)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;engineering&#34;</span>
</span></span><span style=display:flex><span>           :base-directory <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;engineering&#34;</span> website-directory)
</span></span><span style=display:flex><span>           :base-extension <span style=color:#e6db74>&#34;org&#34;</span>
</span></span><span style=display:flex><span>           :publishing-directory <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;engineering&#34;</span> my/publish-directory)
</span></span><span style=display:flex><span>           :publishing-function org-html-publish-to-html
</span></span><span style=display:flex><span>           :auto-sitemap <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>           :sitemap-filename <span style=color:#e6db74>&#34;index.org&#34;</span>
</span></span><span style=display:flex><span>           :sitemap-title <span style=color:#e6db74>&#34;Engineering&#34;</span>
</span></span><span style=display:flex><span>           :sitemap-sort-files anti-chronologically)
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;static&#34;</span>
</span></span><span style=display:flex><span>           :base-directory <span style=color:#f92672>,</span>website-directory
</span></span><span style=display:flex><span>           :base-extension <span style=color:#e6db74>&#34;css\\|txt\\|jpg\\|gif\\|png&#34;</span>
</span></span><span style=display:flex><span>           :recursive <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>           :publishing-directory  <span style=color:#f92672>,</span>my/publish-directory
</span></span><span style=display:flex><span>           :publishing-function org-publish-attachment)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          (<span style=color:#e6db74>&#34;personal-website&#34;</span> :components (<span style=color:#e6db74>&#34;site&#34;</span> <span style=color:#e6db74>&#34;notes&#34;</span> <span style=color:#e6db74>&#34;books&#34;</span>
</span></span><span style=display:flex><span>                                           <span style=color:#e6db74>&#34;movies&#34;</span> <span style=color:#e6db74>&#34;engineering&#34;</span> <span style=color:#e6db74>&#34;static&#34;</span>)))))
</span></span></code></pre></div><h2 id=applications>Applications</h2><h3 id=browser>Browser</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; eww</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Install readability first.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; npm install -g readability-cli</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq eww-retrieve-command &#39;(&#34;readable&#34;))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Another choice `websearch&#39;.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Search engine</span>
</span></span><span style=display:flex><span>(use-package engine-mode
</span></span><span style=display:flex><span>  :hook (on-first-input <span style=color:#f92672>.</span> engine-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (defengine google <span style=color:#e6db74>&#34;https://google.com/search?q=%s&#34;</span>
</span></span><span style=display:flex><span>             :keybinding <span style=color:#e6db74>&#34;g&#34;</span>
</span></span><span style=display:flex><span>             :docstring <span style=color:#e6db74>&#34;Search Google.&#34;</span>)
</span></span><span style=display:flex><span>  (defengine wikipedia <span style=color:#e6db74>&#34;https://en.wikipedia.org/wiki/Special:Search?search=%s&#34;</span>
</span></span><span style=display:flex><span>             :keybinding <span style=color:#e6db74>&#34;w&#34;</span>
</span></span><span style=display:flex><span>             :docstring <span style=color:#e6db74>&#34;Search Wikipedia.&#34;</span>)
</span></span><span style=display:flex><span>  (defengine github <span style=color:#e6db74>&#34;https://github.com/search?ref=simplesearch&amp;q=%s&#34;</span>
</span></span><span style=display:flex><span>             :keybinding <span style=color:#e6db74>&#34;h&#34;</span>
</span></span><span style=display:flex><span>             :docstring <span style=color:#e6db74>&#34;Search GitHub.&#34;</span>)
</span></span><span style=display:flex><span>  (defengine youtube <span style=color:#e6db74>&#34;http://www.youtube.com/results?aq=f&amp;oq=&amp;search_query=%s&#34;</span>
</span></span><span style=display:flex><span>             :keybinding <span style=color:#e6db74>&#34;y&#34;</span>
</span></span><span style=display:flex><span>             :docstring <span style=color:#e6db74>&#34;Search YouTube.&#34;</span>)
</span></span><span style=display:flex><span>  (defengine moviedouban <span style=color:#e6db74>&#34;https://search.douban.com/movie/subject_search?search_text=%s&#34;</span>
</span></span><span style=display:flex><span>             :keybinding <span style=color:#e6db74>&#34;m&#34;</span>
</span></span><span style=display:flex><span>             :docstring <span style=color:#e6db74>&#34;Search Moive DouBan.&#34;</span>)
</span></span><span style=display:flex><span>  (defengine bookdouban <span style=color:#e6db74>&#34;https://search.douban.com/book/subject_search?search_text=%s&#34;</span>
</span></span><span style=display:flex><span>             :keybinding <span style=color:#e6db74>&#34;b&#34;</span>
</span></span><span style=display:flex><span>             :docstring <span style=color:#e6db74>&#34;Search Book DouBan.&#34;</span>)
</span></span><span style=display:flex><span>  (defengine zhihu <span style=color:#e6db74>&#34;https://www.zhihu.com/search?type=content&amp;q=%s&#34;</span>
</span></span><span style=display:flex><span>             :keybinding <span style=color:#e6db74>&#34;z&#34;</span>
</span></span><span style=display:flex><span>             :docstring <span style=color:#e6db74>&#34;Search Zhihu.&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Search&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;sb&#34;</span> <span style=color:#f92672>&#39;</span>(engine/search-bookdouban :wk <span style=color:#e6db74>&#34;Book DouBan&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;ss&#34;</span> <span style=color:#f92672>&#39;</span>(engine/search-google :wk <span style=color:#e6db74>&#34;Google&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;sg&#34;</span> <span style=color:#f92672>&#39;</span>(engine/search-github :wk <span style=color:#e6db74>&#34;Github&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;sy&#34;</span> <span style=color:#f92672>&#39;</span>(engine/search-youtube :wk <span style=color:#e6db74>&#34;Youtube&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;sw&#34;</span> <span style=color:#f92672>&#39;</span>(engine/search-wikipedia :wk <span style=color:#e6db74>&#34;Wikipedia&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;sm&#34;</span> <span style=color:#f92672>&#39;</span>(engine/search-moviedouban :wk <span style=color:#e6db74>&#34;Movie DouBan&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;sz&#34;</span> <span style=color:#f92672>&#39;</span>(engine/search-zhihu :wk <span style=color:#e6db74>&#34;Zhihu&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;sr&#34;</span> <span style=color:#f92672>&#39;</span>(rg :wk <span style=color:#e6db74>&#34;rg&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;sl&#34;</span> <span style=color:#f92672>&#39;</span>(consult-git-log-grep :wk <span style=color:#e6db74>&#34;Git Log Grep&#34;</span>))
</span></span></code></pre></div><p><a href=https://github.com/xuchunyang/grab-mac-link.el>xuchunyang/grab-mac-link.el: Grab link from Mac Apps and insert it into Emacs</a>. å¾ˆæ–¹ä¾¿çš„åœ¨æ–‡ä»¶ä¸­å¢åŠ å½“å‰æµè§ˆç½‘é¡µçš„é“¾æ¥ï¼Œæˆ‘ä½¿ç”¨ MacOS, å¸¸ç”¨çš„æ˜¯ Safari æµè§ˆå™¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package grab-mac-link
</span></span><span style=display:flex><span>  :commands grab-mac-link-dwim
</span></span><span style=display:flex><span>  :preface
</span></span><span style=display:flex><span>  (defun my/link-grab ()
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (grab-mac-link-dwim <span style=color:#e6db74>&#39;safari</span>))
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;&lt;f8&gt;&#34;</span> <span style=color:#f92672>.</span> my/link-grab))
</span></span></code></pre></div><h3 id=elfeed>Elfeed</h3><p><a href=https://github.com/skeeto/elfeed>https://github.com/skeeto/elfeed</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package elfeed
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;C-c , r&#34;</span> <span style=color:#f92672>.</span> elfeed)
</span></span><span style=display:flex><span>  :preface
</span></span><span style=display:flex><span>  (defun elfeed-display-buffer (buf <span style=color:#66d9ef>&amp;optional</span> act)
</span></span><span style=display:flex><span>    (pop-to-buffer buf <span style=color:#f92672>&#39;</span>((display-buffer-reuse-window display-buffer-in-side-window)
</span></span><span style=display:flex><span>                         (side <span style=color:#f92672>.</span> bottom)
</span></span><span style=display:flex><span>                         (window-height <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.8</span>)
</span></span><span style=display:flex><span>                         (reusable-frames <span style=color:#f92672>.</span> visible)
</span></span><span style=display:flex><span>                         (<span style=color:#a6e22e>window-parameters</span>
</span></span><span style=display:flex><span>                          (select <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>                          (quit <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>                          (popup <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)))))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq elfeed-show-entry-switch <span style=color:#a6e22e>#&#39;</span>elfeed-display-buffer))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>&#39;</span>(elfeed-summary :wk <span style=color:#e6db74>&#34;Elfeed&#34;</span>))
</span></span></code></pre></div><h4 id=elfeed-org>elfeed-org</h4><p><a href=https://github.com/remyhonig/elfeed-org>remyhonig/elfeed-org: Configure the Elfeed RSS reader with an Orgmode file</a> é€šè¿‡ org é›†ä¸­ç®¡ç† elfeed æºã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package elfeed-org
</span></span><span style=display:flex><span>  :after elfeed
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (setq rmh-elfeed-org-files <span style=color:#f92672>`</span>(<span style=color:#f92672>,</span>(<span style=color:#a6e22e>concat</span> my-galaxy <span style=color:#e6db74>&#34;/rss/elfeed.org&#34;</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/rss-source ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Open elfeed config file.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (find-file (<span style=color:#a6e22e>car</span> rmh-elfeed-org-files)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;foe&#34;</span> <span style=color:#f92672>&#39;</span>(my/rss-source :wk <span style=color:#e6db74>&#34;Elfeed file&#34;</span>))
</span></span></code></pre></div><h4 id=elfeed-summary>elfeed-summary</h4><p><a href=https://github.com/SqrtMinusOne/elfeed-summary>SqrtMinusOne/elfeed-summary: Feed summary interface for elfeed</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package elfeed-summary
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;C-c , r&#34;</span> <span style=color:#f92672>.</span> elfeed-summary)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq elfeed-summary-other-window <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq elfeed-summary-settings
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#39;</span>((group (:title <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;ç§‘æŠ€&#34;</span>)
</span></span><span style=display:flex><span>                 (:elements (query <span style=color:#f92672>.</span> (and tec (not emacs) (not blogs)))
</span></span><span style=display:flex><span>                            (group (:title <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Emacs&#34;</span>)
</span></span><span style=display:flex><span>                                   (:elements (query <span style=color:#f92672>.</span> emacs))
</span></span><span style=display:flex><span>                                   (:face <span style=color:#f92672>.</span> org-level-1))
</span></span><span style=display:flex><span>                            (group (:title <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Blogs&#34;</span>)
</span></span><span style=display:flex><span>                                   (:elements (query <span style=color:#f92672>.</span> blogs)))))
</span></span><span style=display:flex><span>          (group (:title <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;News&#34;</span>)
</span></span><span style=display:flex><span>                 (:elements (query <span style=color:#f92672>.</span> news)))
</span></span><span style=display:flex><span>          (group (:title <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Books&#34;</span>)
</span></span><span style=display:flex><span>                 (:elements (query <span style=color:#f92672>.</span> book)))
</span></span><span style=display:flex><span>          (group (:title <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Finance&#34;</span>)
</span></span><span style=display:flex><span>                 (:elements (query <span style=color:#f92672>.</span> finance)))
</span></span><span style=display:flex><span>          (group (:title <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Youtube&#34;</span>)
</span></span><span style=display:flex><span>                 (:elements (query <span style=color:#f92672>.</span> video)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;elfeed-summary</span> :after <span style=color:#e6db74>&#39;elfeed-summary-update</span>)
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;elfeed-summary</span> :before <span style=color:#e6db74>&#39;elfeed-org</span>))
</span></span></code></pre></div><p><a href=https://github.com/karthink/elfeed-tube>karthink/elfeed-tube: Youtube integration for Elfeed, the feed reader for Emacs</a> ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸èƒ½æ›´æ–° RSS. æš‚æ—¶åœç”¨äº†ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;elfeed</span>
</span></span><span style=display:flex><span>  (require <span style=color:#e6db74>&#39;elfeed-tube</span>)
</span></span><span style=display:flex><span>  (elfeed-tube-setup)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> elfeed-show-mode-map (kbd <span style=color:#e6db74>&#34;F&#34;</span>) <span style=color:#e6db74>&#39;elfeed-tube-fetch</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> elfeed-show-mode-map [remap save-buffer] <span style=color:#e6db74>&#39;elfeed-tube-save</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> elfeed-search-mode-map (kbd <span style=color:#e6db74>&#34;F&#34;</span>) <span style=color:#e6db74>&#39;elfeed-tube-fetch</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> elfeed-search-mode-map [remap save-buffer] <span style=color:#e6db74>&#39;elfeed-tube-save</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (require-package <span style=color:#e6db74>&#39;elfeed-tube-mpv</span>)
</span></span><span style=display:flex><span>  (with-eval-after-load <span style=color:#e6db74>&#39;elfeed</span>
</span></span><span style=display:flex><span>    (require <span style=color:#e6db74>&#39;elfeed-tube-mpv</span>)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>define-key</span> elfeed-show-mode-map (kbd <span style=color:#e6db74>&#34;C-c C-f&#34;</span>) <span style=color:#e6db74>&#39;elfeed-tube-mpv-follow-mode</span>)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>define-key</span> elfeed-show-mode-map (kbd <span style=color:#e6db74>&#34;C-c C-w&#34;</span>) <span style=color:#e6db74>&#39;elfeed-tube-mpv-where</span>)))
</span></span></code></pre></div><h3 id=reader>Reader</h3><h4 id=pdf-tools>pdf-tools</h4><p>å‡çº§ pdf-tools åè¦é‡æ–°ç”Ÿæˆ <code>epdfinfo</code> æ–‡ä»¶ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯é‡è£… pdf-toolsï¼Œä»¥å…æœ‰é—®é¢˜ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package pdf-tools
</span></span><span style=display:flex><span>  :hook ((doc-view-mode <span style=color:#f92672>.</span> pdf-tools-install)
</span></span><span style=display:flex><span>         (dirvish-setup <span style=color:#f92672>.</span> pdf-tools-install)
</span></span><span style=display:flex><span>         (pdf-tools-enabled <span style=color:#f92672>.</span> pdf-view-themed-minor-mode)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package pdf-view
</span></span><span style=display:flex><span>  :mode (<span style=color:#e6db74>&#34;\\.[pP][dD][fF]\\&#39;&#34;</span> <span style=color:#f92672>.</span> pdf-view-mode)
</span></span><span style=display:flex><span>  :magic (<span style=color:#e6db74>&#34;%PDF&#34;</span> <span style=color:#f92672>.</span> pdf-view-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (pdf-tools-install <span style=color:#66d9ef>t</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (evil-declare-key <span style=color:#e6db74>&#39;normal</span> pdf-view-mode-map
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gh&#34;</span> <span style=color:#e6db74>&#39;pdf-annot-add-highlight-markup-annotation</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;ga&#34;</span> <span style=color:#e6db74>&#39;pdf-annot-add-text-annotation</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gd&#34;</span> <span style=color:#e6db74>&#39;pdf-annot-delete</span>)
</span></span><span style=display:flex><span>  :init
</span></span><span style=display:flex><span>  (setq pdf-view-display-size <span style=color:#e6db74>&#39;fit-width</span>)
</span></span><span style=display:flex><span>  (setq pdf-view-use-unicode-ligther <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq pdf-view-use-scaling <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq pdf-view-use-imagemagick <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq pdf-annot-activate-created-annotations <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package pdf-occur
</span></span><span style=display:flex><span>  :hook (pdf-view-mode <span style=color:#f92672>.</span> pdf-occur-global-minor-mode))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package pdf-history
</span></span><span style=display:flex><span>  :hook (pdf-view-mode <span style=color:#f92672>.</span> pdf-history-minor-mode))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package pdf-links
</span></span><span style=display:flex><span>  :hook (pdf-view-mode <span style=color:#f92672>.</span> pdf-links-minor-mode))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/get-file-name ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Copy pdf file name.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (kill-new (file-name-base (<span style=color:#a6e22e>buffer-file-name</span>)))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Copied %s&#34;</span> (file-name-base (<span style=color:#a6e22e>buffer-file-name</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package pdf-outline
</span></span><span style=display:flex><span>  :hook ((pdf-view-mode <span style=color:#f92672>.</span> pdf-outline-minor-mode)
</span></span><span style=display:flex><span>         (pdf-outline-buffer-mode <span style=color:#f92672>.</span> hide-mode-line-mode))
</span></span><span style=display:flex><span>  :bind (:map pdf-outline-buffer-mode-map
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;RET&#34;</span> <span style=color:#f92672>.</span> pdf-outline-follow-link-and-quit)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package pdf-annot
</span></span><span style=display:flex><span>  :hook (pdf-view-mode <span style=color:#f92672>.</span> pdf-annot-minor-mode)
</span></span><span style=display:flex><span>  :bind (:map pdf-annot-edit-contents-minor-mode-map
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;&lt;return&gt;&#34;</span> <span style=color:#f92672>.</span> pdf-annot-edit-contents-commit)
</span></span><span style=display:flex><span>              (<span style=color:#e6db74>&#34;&lt;S-return&gt;&#34;</span> <span style=color:#f92672>.</span> newline)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package pdf-sync
</span></span><span style=display:flex><span>  :hook (pdf-view-mode <span style=color:#f92672>.</span> pdf-sync-minor-mode))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package pdf-cache
</span></span><span style=display:flex><span>  :after pdf-view
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (define-pdf-cache-function pagelabels))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(use-package pdf-misc
</span></span><span style=display:flex><span>  :after pdf-view
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq pdf-misc-print-program-executable <span style=color:#e6db74>&#34;/usr/bin/lp&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun mrb/pdf-misc-print-pages(filename pages <span style=color:#66d9ef>&amp;optional</span> interactive-p)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Wrapper for `pdf-misc-print-document` to add page selection support.&#34;</span>
</span></span><span style=display:flex><span>    (interactive (<span style=color:#a6e22e>list</span> (pdf-view-buffer-file-name)
</span></span><span style=display:flex><span>                       (<span style=color:#a6e22e>read-string</span> <span style=color:#e6db74>&#34;Page range (empty for all pages): &#34;</span>
</span></span><span style=display:flex><span>                                    (<span style=color:#a6e22e>number-to-string</span> (pdf-view-current-page)))
</span></span><span style=display:flex><span>                       <span style=color:#66d9ef>t</span>) pdf-view-mode)
</span></span><span style=display:flex><span>    (let ((pdf-misc-print-program-args
</span></span><span style=display:flex><span>           (if (not (string-blank-p pages))
</span></span><span style=display:flex><span>               (<span style=color:#a6e22e>cons</span> (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;-P &#34;</span> pages) pdf-misc-print-program-args)
</span></span><span style=display:flex><span>             pdf-misc-print-program-args)))
</span></span><span style=display:flex><span>      (pdf-misc-print-document filename)))
</span></span><span style=display:flex><span>  :bind (:map pdf-view-mode-map
</span></span><span style=display:flex><span>              ([remap pdf-misc-print-document] <span style=color:#f92672>.</span> mrb/pdf-misc-print-pages)))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/pdf-extract-highlight ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Extract highlight to plain text.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>When it finised, it will jump to note file.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let* ((pdf-filename (<span style=color:#a6e22e>buffer-name</span>))
</span></span><span style=display:flex><span>         (txt-filename (<span style=color:#a6e22e>make-temp-name</span> <span style=color:#e6db74>&#34;/tmp/annot-&#34;</span>))
</span></span><span style=display:flex><span>         (org-file (read-file-name <span style=color:#e6db74>&#34;Save extracted highlights to org file: &#34;</span> (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;roam/ref/&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>         (org-heading <span style=color:#e6db74>&#34;Highlights&#34;</span>)
</span></span><span style=display:flex><span>         (process (start-process-shell-command
</span></span><span style=display:flex><span>                   <span style=color:#e6db74>&#34;pdfannots&#34;</span>
</span></span><span style=display:flex><span>                   <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>                   (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;python3 ~/pdfannots/pdfannots.py \&#34;%s\&#34; -o \&#34;%s\&#34;&#34;</span>
</span></span><span style=display:flex><span>                           pdf-filename txt-filename))))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>set-process-sentinel</span>
</span></span><span style=display:flex><span>     process
</span></span><span style=display:flex><span>     (lambda (process _event)
</span></span><span style=display:flex><span>       (when (<span style=color:#a6e22e>eq</span> (<span style=color:#a6e22e>process-status</span> process) <span style=color:#e6db74>&#39;exit</span>)
</span></span><span style=display:flex><span>         (find-file org-file)
</span></span><span style=display:flex><span>         (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>point-min</span>))
</span></span><span style=display:flex><span>         (if (<span style=color:#a6e22e>re-search-forward</span> (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;^* %s&#34;</span> org-heading) <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>             (progn
</span></span><span style=display:flex><span>               (<span style=color:#a6e22e>end-of-line</span>)
</span></span><span style=display:flex><span>               (<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;\n&#34;</span>)
</span></span><span style=display:flex><span>               (<span style=color:#a6e22e>insert-file-contents</span> txt-filename)
</span></span><span style=display:flex><span>               (<span style=color:#a6e22e>delete-file</span> txt-filename)
</span></span><span style=display:flex><span>               (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;PDF highlights added to org heading &#39;%s&#39;&#34;</span> org-heading))
</span></span><span style=display:flex><span>           (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Org heading &#39;%s&#39; not found&#34;</span> org-heading)))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;h&#34;</span> <span style=color:#f92672>&#39;</span>(my/pdf-extract-highlight :wk <span style=color:#e6db74>&#34;Extract highlight&#34;</span>))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/dired-pdf-to-png ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let* ((filename (dired-get-filename)))
</span></span><span style=display:flex><span>    (if (<span style=color:#a6e22e>string-match</span> <span style=color:#e6db74>&#34;\.pdf&#34;</span> filename)
</span></span><span style=display:flex><span>        (let* ((pdf-base-name (file-name-sans-extension (<span style=color:#a6e22e>file-name-nondirectory</span> filename)))
</span></span><span style=display:flex><span>               (png (<span style=color:#a6e22e>concat</span> pdf-base-name <span style=color:#e6db74>&#34;.png&#34;</span>))
</span></span><span style=display:flex><span>               (pdf-info (shell-command-to-string (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;pdfinfo %s | grep Pages | awk &#39;{print $2}&#39;&#34;</span> filename)))
</span></span><span style=display:flex><span>               (pdf-pages (<span style=color:#a6e22e>string-to-number</span> pdf-info)))
</span></span><span style=display:flex><span>          (when (<span style=color:#a6e22e>file-exists-p</span> png)
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>delete-file</span> png))
</span></span><span style=display:flex><span>          (if (<span style=color:#a6e22e>=</span> pdf-pages <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>              (start-process-shell-command
</span></span><span style=display:flex><span>               <span style=color:#e6db74>&#34;pdf-to-png&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>               (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;pdftoppm -singlefile -r 600 %s %s -png&#34;</span> filename pdf-base-name))
</span></span><span style=display:flex><span>            (start-process-shell-command
</span></span><span style=display:flex><span>             <span style=color:#e6db74>&#34;pdf-to-png&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>             (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;pdftoppm -r 600 %s %s -png&#34;</span> filename pdf-base-name))))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Current file is not a PDF file.&#34;</span>))))
</span></span></code></pre></div><h4 id=nov>Nov</h4><p>Nov ç”¨äºé˜…è¯» epub æ–‡ä»¶ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package nov
</span></span><span style=display:flex><span>  :mode (<span style=color:#e6db74>&#34;.epub&#34;</span> <span style=color:#f92672>.</span> nov-mode)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq nov-unzip-program (executable-find <span style=color:#e6db74>&#34;bsdtar&#34;</span>)
</span></span><span style=display:flex><span>        nov-unzip-args <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;-xC&#34;</span> directory <span style=color:#e6db74>&#34;-f&#34;</span> filename)))
</span></span></code></pre></div><h4 id=calibredb>Calibredb</h4><p>Calibre ç”¨äºç®¡ç†ä¹¦ç±ï¼ŒCalibredb å¯ä»¥åœ¨ Emacs ä¸­ç®¡ç†è€Œä¸éœ€è¦æ‰“å¼€ Calibre è½¯ä»¶ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; Export catalog need to use argument: set entry type to mixed, default is book.</span>
</span></span><span style=display:flex><span>(use-package calibredb
</span></span><span style=display:flex><span>  :bind ((<span style=color:#e6db74>&#34;&lt;f1&gt;&#34;</span> <span style=color:#f92672>.</span> calibredb)
</span></span><span style=display:flex><span>         :map calibredb-search-mode-map
</span></span><span style=display:flex><span>         (<span style=color:#e6db74>&#34;C-c l&#34;</span> <span style=color:#f92672>.</span> calibredb-copy-as-org-link))
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq calibredb-root-dir <span style=color:#e6db74>&#34;~/Nextcloud/L.Calibre/&#34;</span>)
</span></span><span style=display:flex><span>  (setq calibredb-db-dir (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;metadata.db&#34;</span> calibredb-root-dir))
</span></span><span style=display:flex><span>  (setq calibredb-add-delete-original-file <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq calibredb-size-show <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq calibredb-format-character-icons <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (setq calibredb-ref-default-bibliography (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;calibre.bib&#34;</span> calibredb-root-dir))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (evil-set-initial-state <span style=color:#e6db74>&#39;calibredb-search-mode</span> <span style=color:#e6db74>&#39;emacs</span>))
</span></span></code></pre></div><h3 id=vterm>vterm</h3><p>ä½¿ç”¨<a href=https://github.com/akermu/emacs-libvterm>akermu/emacs-libvterm: Emacs libvterm integration</a> æ›¿ä»£äº†å†…ç½®çš„ eshell.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package vterm
</span></span><span style=display:flex><span>  :bind (<span style=color:#e6db74>&#34;C-c , v&#34;</span> <span style=color:#f92672>.</span> toggle-vterm)
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq vterm-kill-buffer-on-exit <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq vterm-max-scrollback <span style=color:#ae81ff>5000</span>)
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\*vterm\\*&#34;</span>
</span></span><span style=display:flex><span>                 (display-buffer-in-side-window)
</span></span><span style=display:flex><span>                 (window-height <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.35</span>)
</span></span><span style=display:flex><span>                 (side <span style=color:#f92672>.</span> bottom)
</span></span><span style=display:flex><span>                 (slot <span style=color:#f92672>.</span> <span style=color:#ae81ff>-1</span>)))
</span></span><span style=display:flex><span>  (defun toggle-vterm ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Toggle vterm on or off.&#34;</span>
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (if (<span style=color:#a6e22e>get-buffer-window</span> <span style=color:#e6db74>&#34;*vterm*&#34;</span>)
</span></span><span style=display:flex><span>        (delete-window (<span style=color:#a6e22e>get-buffer-window</span> <span style=color:#e6db74>&#34;*vterm*&#34;</span>))
</span></span><span style=display:flex><span>      (progn
</span></span><span style=display:flex><span>        (vterm)
</span></span><span style=display:flex><span>        (evil-insert <span style=color:#ae81ff>1</span>)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;v&#34;</span> <span style=color:#f92672>&#39;</span>(toggle-vterm :wk <span style=color:#e6db74>&#34;vterm&#34;</span>))
</span></span></code></pre></div><h3 id=mail>Mail</h3><h4 id=personal-info>Personal Info</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq <span style=color:#a6e22e>user-full-name</span> <span style=color:#e6db74>&#34;Duan Ning&#34;</span>)
</span></span><span style=display:flex><span>(setq user-mail-address <span style=color:#e6db74>&#34;duan_n@outlook.com&#34;</span>)
</span></span></code></pre></div><h4 id=message>Message</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq message-sendmail-envelope-from <span style=color:#e6db74>&#39;header</span>)
</span></span><span style=display:flex><span>(setq message-kill-buffer-query <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>(setq message-sendmail-extra-arguments <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;-a&#34;</span> <span style=color:#e6db74>&#34;outlook&#34;</span>))
</span></span><span style=display:flex><span>(setq message-send-mail-function <span style=color:#e6db74>&#39;sendmail-send-it</span>)
</span></span></code></pre></div><h4 id=mu4e>Mu4e</h4><p>åœ¨ MacOS ä¸Šé…ç½® mu å’Œ mu4e çš„æ•™ç¨‹è§ï¼š<a href=https://macowners.club/posts/email-emacs-mu4e-macos/>Email setup in Emacs with Mu4e on macOS | macOS & (open-source) Software</a>.</p><p>ä¸Šè¿°çš„æ•™ç¨‹å†™çš„å¾ˆè¯¦ç»†ï¼ŒæŒ‰ç…§æ­¥éª¤è¿›è¡Œä¸€å®šä¼šæˆåŠŸã€‚</p><p>é…ç½® Emacs æ—¶ç»å¸¸è¦å¤šæ¬¡é‡å¯ï¼Œè¿™æœ‰å¯èƒ½å¯¼è‡´ mu æŠ¥ä»¥ä¸‹çš„é”™è¯¯ï¼š</p><blockquote><p>error in process sentinel: mu4e&ndash;server-sentinel: Mu server process ended with exit code 1
error in process sentinel: Mu server process ended with exit code 1</p></blockquote><p>è¿™æ—¶éœ€è¦åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œä»¥ä¸‹çš„å‘½ä»¤æ¥æ¢å¤ mu çš„çŠ¶æ€ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mu init --maildir<span style=color:#f92672>=</span>~/.maildir --my-address<span style=color:#f92672>=</span>your_email_account <span style=color:#f92672>&amp;&amp;</span> mu index
</span></span></code></pre></div><p>å¯åŠ¨ Emacs æ—¶ç›´æ¥å¯åŠ¨ mu4e ä¼šå¯¼è‡´ Emacs å¯åŠ¨é€Ÿåº¦å˜çš„å¾ˆæ…¢ï¼Œå½“ Emacs å¤„äº idle çŠ¶æ€æ—¶åœ¨åå°å¯åŠ¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;load-path</span> <span style=color:#e6db74>&#34;/opt/homebrew/opt/mu/share/emacs/site-lisp/mu/mu4e&#34;</span>)
</span></span><span style=display:flex><span>(unless (<span style=color:#a6e22e>fboundp</span> <span style=color:#e6db74>&#39;mu4e</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>autoload</span> <span style=color:#a6e22e>#&#39;</span>mu4e <span style=color:#e6db74>&#34;mu4e&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(run-with-idle-timer <span style=color:#ae81ff>5</span> <span style=color:#66d9ef>nil</span> <span style=color:#a6e22e>#&#39;</span>(lambda () (mu4e <span style=color:#e6db74>&#39;background</span>)))
</span></span></code></pre></div><p>è¿™é‡Œæœ‰ä¸ª <a href=https://github.com/rougier/mu4e-dashboard>rougier/mu4e-dashboard: A dashboard for mu4e (mu for emacs)</a> çœ‹ç€å¾ˆå¥½çœ‹ï¼Œä½†æ˜¯ä¸å®ç”¨ï¼Œä¸è¦å†å°è¯•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>  (setq mail-user-agent <span style=color:#e6db74>&#39;mu4e-user-agent</span>)
</span></span><span style=display:flex><span>  (setq mu4e-mu-binary (executable-find <span style=color:#e6db74>&#34;mu&#34;</span>))
</span></span><span style=display:flex><span>  (setq mu4e-update-interval (<span style=color:#a6e22e>*</span> <span style=color:#ae81ff>15</span> <span style=color:#ae81ff>60</span>))
</span></span><span style=display:flex><span>  (setq mu4e-attachment-dir <span style=color:#e6db74>&#34;~/Downloads/&#34;</span>)
</span></span><span style=display:flex><span>  (setq mu4e-get-mail-command (<span style=color:#a6e22e>concat</span> (executable-find <span style=color:#e6db74>&#34;mbsync&#34;</span>) <span style=color:#e6db74>&#34; -a&#34;</span>))
</span></span><span style=display:flex><span>  (setq mu4e-index-update-in-background <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq mu4e-index-update-error-warning <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq mu4e-index-update-error-warning <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq mu4e-index-cleanup <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq mu4e-view-show-images <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq mu4e-view-image-max-width <span style=color:#ae81ff>800</span>)
</span></span><span style=display:flex><span>  (setq mu4e-view-show-addresses <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq mu4e-confirm-quit <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq mu4e-context-policy <span style=color:#e6db74>&#39;pick-first</span>)
</span></span><span style=display:flex><span>  (with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>    (setq mu4e-sent-folder   <span style=color:#e6db74>&#34;/outlook/Sent&#34;</span>
</span></span><span style=display:flex><span>          mu4e-drafts-folder <span style=color:#e6db74>&#34;/outlook/Drafts&#34;</span>
</span></span><span style=display:flex><span>          mu4e-trash-folder  <span style=color:#e6db74>&#34;/outlook/Deleted&#34;</span>
</span></span><span style=display:flex><span>          mu4e-refile-folder  <span style=color:#e6db74>&#34;/outlook/Archive&#34;</span>))
</span></span><span style=display:flex><span>  (setq mu4e-view-prefer-html <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq mu4e-html2text-command <span style=color:#e6db74>&#39;mu4e-shr2text</span>)
</span></span><span style=display:flex><span>  (setq mu4e-main-hide-personal-addresses <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq mu4e-headers-precise-alignment <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq mu4e-headers-include-related <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq mu4e-headers-auto-update <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (setq mu4e-headers-date-format <span style=color:#e6db74>&#34;%d/%m/%y&#34;</span>)
</span></span><span style=display:flex><span>  (setq mu4e-headers-time-format <span style=color:#e6db74>&#34;%H:%M&#34;</span>)
</span></span><span style=display:flex><span>  (setq mu4e-headers-fields <span style=color:#f92672>&#39;</span>((:flags <span style=color:#f92672>.</span> <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>                              (:human-date <span style=color:#f92672>.</span> <span style=color:#ae81ff>9</span>)
</span></span><span style=display:flex><span>                              (:subject <span style=color:#f92672>.</span> <span style=color:#ae81ff>90</span>)
</span></span><span style=display:flex><span>                              (:from-or-to <span style=color:#f92672>.</span> <span style=color:#ae81ff>40</span>)
</span></span><span style=display:flex><span>                              (:tags <span style=color:#f92672>.</span> <span style=color:#ae81ff>20</span>)))
</span></span><span style=display:flex><span>  (setq mu4e-bookmarks <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;flag:unread AND NOT flag:trashed&#34;</span> <span style=color:#e6db74>&#34;Unread messages&#34;</span> <span style=color:#e6db74>?u</span>)
</span></span><span style=display:flex><span>                         (<span style=color:#e6db74>&#34;date:today..now&#34;</span> <span style=color:#e6db74>&#34;Today&#39;s messages&#34;</span> <span style=color:#e6db74>?t</span>)
</span></span><span style=display:flex><span>                         (<span style=color:#e6db74>&#34;date:7d..now&#34;</span> <span style=color:#e6db74>&#34;Last 7 days&#34;</span> <span style=color:#e6db74>?w</span>)
</span></span><span style=display:flex><span>                         (<span style=color:#e6db74>&#34;date:1d..now AND NOT list:emacs-orgmode.gnu.org&#34;</span> <span style=color:#e6db74>&#34;Last 1 days&#34;</span> <span style=color:#e6db74>?o</span>)
</span></span><span style=display:flex><span>                         (<span style=color:#e6db74>&#34;date:1d..now AND list:emacs-orgmode.gnu.org&#34;</span> <span style=color:#e6db74>&#34;Last 1 days (org mode)&#34;</span> <span style=color:#e6db74>?m</span>)
</span></span><span style=display:flex><span>                         (<span style=color:#e6db74>&#34;maildir:/drafts&#34;</span> <span style=color:#e6db74>&#34;drafts&#34;</span> <span style=color:#e6db74>?d</span>)
</span></span><span style=display:flex><span>                         (<span style=color:#e6db74>&#34;flag:flagged AND NOT flag:trashed&#34;</span> <span style=color:#e6db74>&#34;flagged&#34;</span> <span style=color:#e6db74>?f</span>)
</span></span><span style=display:flex><span>                         (<span style=color:#e6db74>&#34;mime:image/*&#34;</span> <span style=color:#e6db74>&#34;Messages with images&#34;</span> <span style=color:#e6db74>?p</span>)))
</span></span><span style=display:flex><span>  (setq mu4e-compose-reply-ignore-address <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;no-?reply&#34;</span> <span style=color:#e6db74>&#34;duan_n@outlook.com&#34;</span>))
</span></span><span style=display:flex><span>  (setq mu4e-compose-format-flowed <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq mu4e-compose-signature-auto-include <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (setq mu4e-compose-dont-reply-to-self <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><p>è‹¥è¦æŠŠ mail å’Œ org ç¬”è®°ç›¸ç»“åˆï¼Œå¯ä»¥ä½¿ç”¨ <code>org-store-link</code> å’Œ <code>org-insert-link</code> ç»™åˆä½¿ç”¨ï¼Œåœ¨ org æ–‡ä»¶ä¸­æ’å…¥ mail çš„é“¾æ¥ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> mu4e-headers-mode-map (kbd <span style=color:#e6db74>&#34;C-c l&#34;</span>) <span style=color:#e6db74>&#39;org-store-link</span>))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;e&#34;</span> <span style=color:#f92672>&#39;</span>(mu4e :wk <span style=color:#e6db74>&#34;MAIL&#34;</span>))
</span></span></code></pre></div><h4 id=mu4e-actions>mu4e-actions</h4><p>Save mail to pdf as backup.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun extra-email-to-pdf (msg <span style=color:#66d9ef>&amp;optional</span> args)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Pdf temp file MSG to a new name with ARGS ignored.&#34;</span>
</span></span><span style=display:flex><span>  (let* ((async-shell-command-display-buffer <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>         (temp (<span style=color:#a6e22e>format-time-string</span> (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;%Y-%m-%dT%H:%M.pdf&#34;</span> mail-source-directory)))
</span></span><span style=display:flex><span>         (name (<span style=color:#a6e22e>read-string</span> <span style=color:#e6db74>&#34;File name: &#34;</span> temp))
</span></span><span style=display:flex><span>         (html (replace-regexp-in-string (<span style=color:#a6e22e>regexp-quote</span> <span style=color:#e6db74>&#34;file://&#34;</span>) <span style=color:#e6db74>&#34;&#34;</span> msg <span style=color:#66d9ef>t</span> <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>    (if args (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Additional optional argument was ignored when saving to PDF.&#34;</span>))
</span></span><span style=display:flex><span>    (async-shell-command (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;pandoc &#34;</span> html <span style=color:#e6db74>&#34; -o &#34;</span> name))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun extra-print-email-to-pdf (msg <span style=color:#66d9ef>&amp;optional</span> skip-headers)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Save current MSG as a pdf if it includes an HTML-part.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If SKIP-HEADERS is set, do not show include message headers.&#34;</span>
</span></span><span style=display:flex><span>  (let* ((browse-url-browser-function  <span style=color:#e6db74>&#39;extra-email-to-pdf</span>))
</span></span><span style=display:flex><span>    (mu4e-action-view-in-browser msg skip-headers)))
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;mu4e-view-actions</span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;print to PDF&#34;</span>  <span style=color:#f92672>.</span> extra-print-email-to-pdf)))
</span></span></code></pre></div><p>Save mail to html as backup.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun extra-move-temp-email-location (msg <span style=color:#66d9ef>&amp;optional</span> args)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Move and rename temp file MSG to a new location with ARGS ignored.&#34;</span>
</span></span><span style=display:flex><span>  (let* ((temp (<span style=color:#a6e22e>format-time-string</span> (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;html/%Y-%m-%dT%H:%M.html&#34;</span> mail-source-directory)))
</span></span><span style=display:flex><span>         (name (<span style=color:#a6e22e>read-string</span> <span style=color:#e6db74>&#34;File name: &#34;</span> temp))
</span></span><span style=display:flex><span>         (file (replace-regexp-in-string (<span style=color:#a6e22e>regexp-quote</span> <span style=color:#e6db74>&#34;file://&#34;</span>) <span style=color:#e6db74>&#34;&#34;</span> msg <span style=color:#66d9ef>t</span> <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>    (if args (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Additional optional argument was ignored when saving to HTML.&#34;</span>))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>rename-file</span> file name)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun extra-save-email-html (msg <span style=color:#66d9ef>&amp;optional</span> skip-headers)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Save current MSG HTML-part.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If SKIP-HEADERS is set, do not show include message headers.&#34;</span>
</span></span><span style=display:flex><span>  (let* ((extra-temp-email-dir (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;html&#34;</span> mail-source-directory))
</span></span><span style=display:flex><span>         (browse-url-browser-function  <span style=color:#e6db74>&#39;extra-move-temp-email-location</span>))
</span></span><span style=display:flex><span>    (mu4e-action-view-in-browser msg skip-headers)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;mu4e-view-actions</span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;download as html&#34;</span>  <span style=color:#f92672>.</span> extra-save-email-html)))
</span></span></code></pre></div><h4 id=icons>Icons</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;all-the-icons</span>
</span></span><span style=display:flex><span>  (setq display-time-mail-icon <span style=color:#f92672>`</span>(<span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>                                   (all-the-icons-material <span style=color:#e6db74>&#34;mail&#34;</span>)
</span></span><span style=display:flex><span>                                   <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>`</span>(:family <span style=color:#f92672>,</span>(all-the-icons-material-family))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>  (setq mu4e-use-fancy-chars <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span><span style=color:#75715e>;; (require-package &#39;mu4e-marker-icons)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (add-hook &#39;mu4e-headers-mode-hook &#39;mu4e-marker-icons-mode)</span>
</span></span></code></pre></div><h4 id=send-mail>Send mail</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;mu4e-main-mode-hook</span>
</span></span><span style=display:flex><span>          (lambda ()
</span></span><span style=display:flex><span>            (progn
</span></span><span style=display:flex><span>              (require <span style=color:#e6db74>&#39;smtpmail-async</span>)
</span></span><span style=display:flex><span>              (setq send-mail-function <span style=color:#e6db74>&#39;async-sendmail-send-it</span>)
</span></span><span style=display:flex><span>              (setq message-send-mail-function <span style=color:#e6db74>&#39;async-smtpmail-send-it</span>))))
</span></span><span style=display:flex><span>(setq sendmail-program (executable-find <span style=color:#e6db74>&#34;msmtp&#34;</span>))
</span></span><span style=display:flex><span>(setq mail-specify-envelope-from <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq mail-envelope-from <span style=color:#e6db74>&#39;header</span>)
</span></span></code></pre></div><h3 id=report>Report</h3><p>æˆ‘ä½¿ç”¨ <a href=#calibredb>Calibredb</a> ç®¡ç†ä¹¦ç±ï¼Œä½¿ç”¨ org-roam ä¸‹çš„ books æ–‡ä»¶å¤¹ç®¡ç†è¯»ä¹¦ç¬”è®°å†…å®¹ã€‚å‡¡æ˜¯è¯»ä¹¦å¿…å»ºç«‹å¯¹åº”çš„ç¬”è®°å†…å®¹ï¼Œåœ¨ç¬”è®°å†…å®¹ä¸­ä¼šä½¿ç”¨ org-clock çš„åŠŸèƒ½è®°å½•è¯»ä¹¦çš„æ—¶é•¿ã€‚</p><p>è¯»ä¹¦ç¬”è®°é€šè¿‡ org-roam-capture ä¸­çš„ books ä¸€é¡¹åˆ›å»ºã€‚</p><p>ç„¶ååœ¨è¯»ä¹¦è®°å½•ç¬”è®°ä¸­å¯ä»¥é€šè¿‡ org report åŠŸèƒ½ç”Ÿæˆä¸€å¹´çš„è¯»ä¹¦è®°å½•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>#+BEGIN: clocktable :scope my/reading-list :maxlevel 9 :emphasize t :fileskip0 t :hidefiles t :block 2023
</span></span><span style=display:flex><span>#+END:
</span></span></code></pre></div><p>clocktable ä¸­çš„ scope å¯ä»¥æ˜¯è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œä¸‹é¢çš„å‡½æ•°å°† books ä¸‹çš„æ‰€æœ‰è¯»ä¹¦ç¬”è®°çº³å…¥ç»Ÿè®¡èŒƒå›´ã€‚ç”Ÿæˆçš„è¡¨æ ¼ä¸­åŒ…æ‹¬äº†ä¹¦ååŠé˜…è¯»æœ¬ä¹¦æ‰€èŠ±çš„æ—¶é—´ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; Get reading list from books directory for org-clock report.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; The org-clock report scope can be a function.</span>
</span></span><span style=display:flex><span>(defun my/reading-list ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Get reading list.&#34;</span>
</span></span><span style=display:flex><span>  (let (reading-list)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>append</span> reading-list
</span></span><span style=display:flex><span>            (file-expand-wildcards (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;roam/books/*.org&#34;</span> my-galaxy)))))
</span></span></code></pre></div><h3 id=achive>Achive</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(use-package achive
</span></span><span style=display:flex><span>  :commands achive
</span></span><span style=display:flex><span>  :config
</span></span><span style=display:flex><span>  (setq achive-language <span style=color:#e6db74>&#39;zh</span>)
</span></span><span style=display:flex><span>  (setq achive-cache-path (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;.achive&#34;</span> no-littering-var-directory)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>&#39;</span>(achive :wk <span style=color:#e6db74>&#34;A-share&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil-collection</span>
</span></span><span style=display:flex><span>  (evil-collection-define-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;achive-visual-mode-map</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;q&#34;</span> <span style=color:#e6db74>&#39;quit-window</span>))
</span></span></code></pre></div><h2 id=easy-use-code-snippets>Easy use, Code snippets</h2><h3 id=open-app-within-emacs>Open APP within Emacs</h3><p>è¯¥é…ç½®æ¥æºï¼š<a href=https://emacs-china.org/t/emacs-mini-buffer-app-macos-only/23153>[æŠ€å·§åˆ†äº«] åœ¨ Emacs mini buffer ä¸­é€‰æ‹©å¹¶æ‰“å¼€å…¶ä»– Appã€macOS onlyã€‘ - Emacs-general - Emacs China</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun mac-launchpad/string-ends-with (s ending)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return non-nil if string S ends with ENDING.&#34;</span>
</span></span><span style=display:flex><span>  (cond ((<span style=color:#a6e22e>&gt;=</span> (<span style=color:#a6e22e>length</span> s) (<span style=color:#a6e22e>length</span> ending))
</span></span><span style=display:flex><span>         (let ((elength (<span style=color:#a6e22e>length</span> ending)))
</span></span><span style=display:flex><span>           (string= (<span style=color:#a6e22e>substring</span> s (<span style=color:#a6e22e>-</span> <span style=color:#ae81ff>0</span> elength)) ending)))
</span></span><span style=display:flex><span>        (<span style=color:#66d9ef>t</span> <span style=color:#66d9ef>nil</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun mac-launchpad/find-mac-apps (folder)
</span></span><span style=display:flex><span>  (let* ((files (<span style=color:#a6e22e>directory-files</span> folder))
</span></span><span style=display:flex><span>         (without-dots (cl-delete-if (lambda (f) (or (string= <span style=color:#e6db74>&#34;.&#34;</span> f) (string= <span style=color:#e6db74>&#34;..&#34;</span> f))) files))
</span></span><span style=display:flex><span>         (all-files (<span style=color:#a6e22e>mapcar</span> (lambda (f) (<span style=color:#a6e22e>file-name-as-directory</span> (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>file-name-as-directory</span> folder) f))) without-dots))
</span></span><span style=display:flex><span>         (result (cl-delete-if-not (lambda (s) (mac-launchpad/string-ends-with s <span style=color:#e6db74>&#34;.app/&#34;</span>)) all-files)))
</span></span><span style=display:flex><span>    result))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun mac-launchpad ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let* ((apps (mac-launchpad/find-mac-apps <span style=color:#e6db74>&#34;/Applications&#34;</span>))
</span></span><span style=display:flex><span>         (to-launch (<span style=color:#a6e22e>completing-read</span> <span style=color:#e6db74>&#34;launch: &#34;</span> apps)))
</span></span><span style=display:flex><span>    (shell-command (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;defaults read \&#34;%s\&#34;Contents/Info.plist CFBundleIdentifier | xargs open -b&#34;</span> to-launch))))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/comma-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;j&#34;</span> <span style=color:#f92672>&#39;</span>(mac-launchpad :wk <span style=color:#e6db74>&#34;Jump to App&#34;</span>))
</span></span></code></pre></div><h3 id=open-file-with-system-file-manager>Open file with system file manager</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun xah-show-in-desktop ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Show current file in desktop.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>This command can be called when in a file buffer or in </span><span style=color:#e6db74>`dired&#39;</span><span style=color:#e6db74>.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let (($path (if (<span style=color:#a6e22e>buffer-file-name</span>) (<span style=color:#a6e22e>buffer-file-name</span>) default-directory)))
</span></span><span style=display:flex><span>    (cond
</span></span><span style=display:flex><span>     ((<span style=color:#a6e22e>string-equal</span> system-type <span style=color:#e6db74>&#34;windows-nt&#34;</span>)
</span></span><span style=display:flex><span>      (shell-command
</span></span><span style=display:flex><span>       (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;PowerShell -Command Start-Process Explorer -FilePath %s&#34;</span>
</span></span><span style=display:flex><span>               (shell-quote-argument default-directory))))
</span></span><span style=display:flex><span>     ((<span style=color:#a6e22e>string-equal</span> system-type <span style=color:#e6db74>&#34;darwin&#34;</span>)
</span></span><span style=display:flex><span>      (if (<span style=color:#a6e22e>eq</span> major-mode <span style=color:#e6db74>&#39;dired-mode</span>)
</span></span><span style=display:flex><span>          (let (($files (dired-get-marked-files )))
</span></span><span style=display:flex><span>            (if (<span style=color:#a6e22e>eq</span> (<span style=color:#a6e22e>length</span> $files) <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>                (shell-command (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;open &#34;</span> (shell-quote-argument (<span style=color:#a6e22e>expand-file-name</span> default-directory ))))
</span></span><span style=display:flex><span>              (shell-command (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;open -R &#34;</span> (shell-quote-argument (<span style=color:#a6e22e>car</span> (dired-get-marked-files )))))))
</span></span><span style=display:flex><span>        (shell-command
</span></span><span style=display:flex><span>         (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;open -R &#34;</span> (shell-quote-argument $path)))))
</span></span><span style=display:flex><span>     ((<span style=color:#a6e22e>string-equal</span> system-type <span style=color:#e6db74>&#34;gnu/linux&#34;</span>)
</span></span><span style=display:flex><span>      (let ((process-connection-type <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>            (openFileProgram (if (<span style=color:#a6e22e>file-exists-p</span> <span style=color:#e6db74>&#34;/usr/bin/gvfs-open&#34;</span>)
</span></span><span style=display:flex><span>                                 <span style=color:#e6db74>&#34;/usr/bin/gvfs-open&#34;</span>
</span></span><span style=display:flex><span>                               <span style=color:#e6db74>&#34;/usr/bin/xdg-open&#34;</span>)))
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>start-process</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#66d9ef>nil</span> openFileProgram (shell-quote-argument $path)))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fd&#34;</span> <span style=color:#f92672>&#39;</span>(xah-show-in-desktop :wk <span style=color:#e6db74>&#34;Open in Finder&#34;</span>))
</span></span></code></pre></div><h3 id=remove-link>Remove link</h3><p>ä¸‹é¢çš„é…ç½®æ¥æºï¼š<a href=https://github.com/jeremyf/dotemacs/blob/main/emacs.d/jf-org-mode.el>dotemacs/jf-org-mode.el at main Â· jeremyf/dotemacs</a>. ä½œç”¨æ˜¯ç§»é™¤ org æ–‡ä»¶ä¸­çš„é“¾æ¥ï¼Œä»…ä¿ç•™é“¾æ¥çš„æè¿°å†…å®¹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun jf/org-link-remove-link ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Remove the link part of an </span><span style=color:#e6db74>`org-mode&#39;</span><span style=color:#e6db74> link at point and keep only the description.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let ((elem (org-element-context)))
</span></span><span style=display:flex><span>    (when (<span style=color:#a6e22e>eq</span> (<span style=color:#a6e22e>car</span> elem) <span style=color:#e6db74>&#39;link</span>)
</span></span><span style=display:flex><span>      (let* ((content-begin (org-element-property :contents-begin elem))
</span></span><span style=display:flex><span>             (content-end  (org-element-property :contents-end elem))
</span></span><span style=display:flex><span>             (link-begin (org-element-property :begin elem))
</span></span><span style=display:flex><span>             (link-end (org-element-property :end elem)))
</span></span><span style=display:flex><span>        (when (and content-begin content-end)
</span></span><span style=display:flex><span>          (let ((content (<span style=color:#a6e22e>buffer-substring-no-properties</span> content-begin content-end)))
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>delete-region</span> link-begin link-end)
</span></span><span style=display:flex><span>            (<span style=color:#a6e22e>insert</span> content)))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;evil</span>
</span></span><span style=display:flex><span>  (evil-declare-key <span style=color:#e6db74>&#39;normal</span> <span style=color:#e6db74>&#39;global</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gX&#34;</span> <span style=color:#e6db74>&#39;jf/org-link-remove-link</span>))
</span></span></code></pre></div><h3 id=add-timestamps-to-youtube-links>Add timestamps to youtube links</h3><p>æ­¤é…ç½®æ¥æºï¼š<a href=https://mbork.pl/2022-10-10_Adding_timestamps_to_youtube_links>Marcin Borkowski: 2022-10-10 Adding timestamps to youtube links</a>.</p><p>è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯åœ¨ youtube é“¾æ¥ä¸­å¢åŠ æ—¶é—´ï¼Œè¿™æ ·å¯ä»¥è¿›è¡Œè§†é¢‘å†…å®¹çš„ç²¾å‡†è·³è½¬ï¼Œå½“ä½ çœ‹äº†ä¸€éƒ¨ä»½è§†é¢‘å†…å®¹æ—¶è®°å½•æ—¶é—´ç­‰åæœŸæ¥ç€çœ‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun yt-set-time (time)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Set TIME in the YouTube link at point.)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  TIME is number of seconds if called from Lisp, and a string if
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  called interactively.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  Supported formats:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - seconds
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - minutes:seconds
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - number of seconds with the \&#34;s\&#34; suffix.&#34;</span>
</span></span><span style=display:flex><span>  (interactive (<span style=color:#a6e22e>list</span>
</span></span><span style=display:flex><span>                (if current-prefix-arg
</span></span><span style=display:flex><span>                    (<span style=color:#a6e22e>prefix-numeric-value</span> current-prefix-arg)
</span></span><span style=display:flex><span>                  (<span style=color:#a6e22e>read-string</span> <span style=color:#e6db74>&#34;Time: &#34;</span>))))
</span></span><span style=display:flex><span>  (let ((url (thing-at-point-url-at-point)))
</span></span><span style=display:flex><span>    (if (and url
</span></span><span style=display:flex><span>             (<span style=color:#a6e22e>string-match</span>
</span></span><span style=display:flex><span>              (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;^%s&#34;</span>
</span></span><span style=display:flex><span>                      (regexp-opt
</span></span><span style=display:flex><span>                       <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;https://www.youtube.com/&#34;</span>
</span></span><span style=display:flex><span>                         <span style=color:#e6db74>&#34;https://youtu.be/&#34;</span>)
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;\\(?:&#34;</span>)))
</span></span><span style=display:flex><span>             url))
</span></span><span style=display:flex><span>    (let* ((bounds (thing-at-point-bounds-of-url-at-point))
</span></span><span style=display:flex><span>           (time-present-p (<span style=color:#a6e22e>string-match</span> <span style=color:#e6db74>&#34;t=[0-9]+&#34;</span> url))
</span></span><span style=display:flex><span>           (question-mark-present-p (string-search <span style=color:#e6db74>&#34;?&#34;</span> url))
</span></span><span style=display:flex><span>           (seconds (cond
</span></span><span style=display:flex><span>                     ((<span style=color:#a6e22e>numberp</span> time)
</span></span><span style=display:flex><span>                      time)
</span></span><span style=display:flex><span>                     ((<span style=color:#a6e22e>string-match</span>
</span></span><span style=display:flex><span>                       <span style=color:#e6db74>&#34;^\\([0-9]+\\):\\([0-9]\\{2\\}\\)$&#34;</span> time)
</span></span><span style=display:flex><span>                      (<span style=color:#a6e22e>+</span> (<span style=color:#a6e22e>*</span> <span style=color:#ae81ff>60</span> (<span style=color:#a6e22e>string-to-number</span>
</span></span><span style=display:flex><span>                                (match-string <span style=color:#ae81ff>1</span> time)))
</span></span><span style=display:flex><span>                         (<span style=color:#a6e22e>string-to-number</span> (match-string <span style=color:#ae81ff>2</span> time))))
</span></span><span style=display:flex><span>                     ((<span style=color:#a6e22e>string-match</span> <span style=color:#e6db74>&#34;^\\([0-9]+\\)s?$&#34;</span> time)
</span></span><span style=display:flex><span>                      (<span style=color:#a6e22e>string-to-number</span> (match-string <span style=color:#ae81ff>1</span> time)))
</span></span><span style=display:flex><span>                     (<span style=color:#66d9ef>t</span> (<span style=color:#a6e22e>error</span> <span style=color:#e6db74>&#34;Wrong argument format&#34;</span>))))
</span></span><span style=display:flex><span>           (new-url (if time-present-p
</span></span><span style=display:flex><span>                        (replace-regexp-in-string
</span></span><span style=display:flex><span>                         <span style=color:#e6db74>&#34;t=[0-9]+&#34;</span>
</span></span><span style=display:flex><span>                         (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;t=%i&#34;</span> seconds)
</span></span><span style=display:flex><span>                         url)
</span></span><span style=display:flex><span>                      (<span style=color:#a6e22e>concat</span> url
</span></span><span style=display:flex><span>                              (if question-mark-present-p <span style=color:#e6db74>&#34;&amp;&#34;</span> <span style=color:#e6db74>&#34;?&#34;</span>)
</span></span><span style=display:flex><span>                              (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;t=%i&#34;</span> seconds)))))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>delete-region</span> (<span style=color:#a6e22e>car</span> bounds) (<span style=color:#a6e22e>cdr</span> bounds))
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>insert</span> new-url))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>error</span> <span style=color:#e6db74>&#34;Not on a Youtube link&#34;</span>)))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;lt&#34;</span> <span style=color:#f92672>&#39;</span>(yt-set-time :wk <span style=color:#e6db74>&#34;Set Youtube link time&#34;</span>))
</span></span></code></pre></div><h3 id=self-define-function>self define function</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun switch-to-message ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Quick switch to </span><span style=color:#e6db74>`*Message*&#39;</span><span style=color:#e6db74> buffer.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (switch-to-buffer <span style=color:#e6db74>&#34;*Messages*&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun switch-to-scratch ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Quick switch to </span><span style=color:#e6db74>`*Scratch*&#39;</span><span style=color:#e6db74> buffer.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (switch-to-buffer <span style=color:#e6db74>&#34;*scratch*&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;bs&#34;</span> <span style=color:#f92672>&#39;</span>(switch-to-scratch :wk <span style=color:#e6db74>&#34;Swtich to scratch&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;bm&#34;</span> <span style=color:#f92672>&#39;</span>(switch-to-message :wk <span style=color:#e6db74>&#34;Swtich to message&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/inbox-file ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Open inbox file.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;inbox/inbox.org&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/plan-file ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Open plan file.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;inbox/plan.org&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/index-file ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;roam/main/index.org&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/reflection-file ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;roam/main/reflection.org&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/finance-file ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Open finance file.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;finance/finance.bean&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/reading-record ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Open reading record file.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;roam/main/reading-record.org&#34;</span> my-galaxy)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(my/space-leader-def
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fo&#34;</span> <span style=color:#f92672>&#39;</span>(:ignore <span style=color:#66d9ef>t</span> :wk <span style=color:#e6db74>&#34;Open file&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fob&#34;</span> <span style=color:#f92672>&#39;</span>(my/reading-record :wk <span style=color:#e6db74>&#34;Reading record&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;foi&#34;</span> <span style=color:#f92672>&#39;</span>(my/inbox-file :wk <span style=color:#e6db74>&#34;Inbox file&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;foI&#34;</span> <span style=color:#f92672>&#39;</span>(my/index-file :wk <span style=color:#e6db74>&#34;Index file&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fop&#34;</span> <span style=color:#f92672>&#39;</span>(my/plan-file :wk <span style=color:#e6db74>&#34;Plan file&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fof&#34;</span> <span style=color:#f92672>&#39;</span>(my/finance-file :wk <span style=color:#e6db74>&#34;Finance file&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;for&#34;</span> <span style=color:#f92672>&#39;</span>(my/reflection-file :wk <span style=color:#e6db74>&#34;Reflection file&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fog&#34;</span> <span style=color:#f92672>&#39;</span>(my/gtd-file :wk <span style=color:#e6db74>&#34;GTD file&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/start-server ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (if (not (server-running-p))
</span></span><span style=display:flex><span>      (server-start))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Server has started&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/scroll-other-windown-down ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Scroll other window down.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (scroll-other-window-down <span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-p&#34;</span>) <span style=color:#e6db74>&#39;my/scroll-other-windown-down</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/scroll-other-windown ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Scroll other window up.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>scroll-other-window</span> <span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-n&#34;</span>) <span style=color:#e6db74>&#39;my/scroll-other-windown</span>)
</span></span></code></pre></div><h2 id=end>End</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;;; init.el ends here.</span>
</span></span></code></pre></div></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/emacs>Emacs</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/Jousimies/.emacs.d rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a></div><div class=footer-info>2023 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script>feather.replace()</script></div></body></html>